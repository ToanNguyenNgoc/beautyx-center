import{a8 as N,ae as y,e as v,ar as g,Q as j,aE as f,j as e,a9 as D,L as Y,aD as b,aa as P,al as w,a7 as p}from"./index-Cy0ECsl2.js";import{F as E}from"./index-B1EJo-OQ.js";/* empty css              */import{E as F}from"./export-code-sEwSNmzf.js";import"./LoadingButton-BnUDQfN1.js";function O(){var m,h,x;const o=N(),t=y(),i=v(),l=g.parse(i.search),d=i.state,{data:c}=j({queryKey:[f.DISCOUNT,t.id],queryFn:()=>p.Discount.detDetail({id:t.id}),enabled:!d,onError:()=>o("/error/404")}),s=d??(c==null?void 0:c.context),{data:a}=j({queryKey:[f.DISCOUNT_CODE,t.id,l],queryFn:()=>p.Discount.getCodeCampaign({uuid:t.id,limit:50,page:(l==null?void 0:l.page)??1}),enabled:!!(t!=null&&t.id)}),u=n=>{const r={page:n};o({pathname:i.pathname,search:g.stringify(r)})};return s?e.jsxs(e.Fragment,{children:[e.jsx(D,{title:(s==null?void 0:s.title)??"",element:e.jsx(Y,{to:{pathname:`/pages/discounts-form/${s==null?void 0:s.uuid}`},className:"btn btn-sm btn-success",children:"Thay đổi thông tin"})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"detail",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("p",{className:"fw-semobold d-block fs-4",children:["Danh sách mã giảm giá (",s.total," mã)"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{style:{marginRight:"8px"},children:"Nền tảng"}),e.jsx(E,{platForm:(s==null?void 0:s.platform)??""})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{style:{marginRight:"8px"},children:"Áp dụng từ"}),(s==null?void 0:s.valid_from)&&(s==null?void 0:s.valid_util)&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"fw-semobold d-block fs-6",children:b(s.valid_from).format("DD/MM/YYYY")}),"-",e.jsx("span",{className:"fw-semobold d-block fs-6",children:b(s.valid_util).format("DD/MM/YYYY")})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-2 mb-2",children:e.jsx(F,{discount:s})})]})]}),e.jsxs("table",{className:"table table-rounded table-row-bordered border gy-7 gs-7",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold fs-6 text-gray-800 border-bottom-2 border-gray-200",children:[e.jsx("th",{children:"STT"}),e.jsx("th",{children:"Mã giảm giá"}),e.jsx("th",{children:"Trạng thái sử dụng"})]})}),e.jsx("tbody",{children:(m=a==null?void 0:a.context)==null?void 0:m.data.map((n,r)=>e.jsxs("tr",{className:n.status==="1"?"":"table-active",children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:n.coupon_code}),e.jsx("td",{children:n.status==="1"?"Chưa sử dụng":"Đã sử dụng"})]},r))})]}),e.jsx(P,{totalPage:(h=a==null?void 0:a.context)!=null&&h.total?Math.ceil(((x=a==null?void 0:a.context)==null?void 0:x.total)/50):1,defaultPage:(l==null?void 0:l.page)??1,onChangePage:u})]})})]}):e.jsx(w,{loading:!0})}export{O as default};
