import{aG as v,Q as N,a as m,V as S,aF as w,j as e,bO as O,an as k,aC as y,bN as x}from"./index-CPKrhu4T.js";import{C as E}from"./Chip-DMkwgItY.js";import{A as G}from"./Avatar-Br_zHEGO.js";const R=({origin:a,setOrigin:c,organization_id:l,required:h,onChange:r})=>{var u;const{isGmupSite:p}=v();N({queryKey:["ORG_SELECTION",l],queryFn:()=>x.getOrgById(l).then(s=>s.data),enabled:!!l,onSuccess:s=>c(s.context)});const o=m.useRef(null),n=s=>{o.current&&(s==="hide"&&o.current.classList.remove("org-search-show"),s==="show"&&(o.current.classList.add("org-search-show"),d("")))};window.addEventListener("click",()=>n("hide"));const f=s=>{const t={keyword:s,is_ecommerce:!0,is_gmup:void 0};return p&&(t.is_gmup=!0),t},{data:i,mutate:d,isLoading:j}=S({mutationFn:s=>x.getAll(f(s)).then(t=>t.data.context)}),b=m.useCallback(w.debounce(s=>d(s),600),[]),g=s=>b(s.target.value);return e.jsxs("div",{className:"col col-org",children:[e.jsx("label",{className:`${h&&"required"} filter-row_label mb-2`,children:"Gắn doanh nghiệp"}),e.jsx("div",{onClick:s=>{s.stopPropagation(),n("show")},className:"form-control form-control-solid",children:a?e.jsx(E,{avatar:e.jsx(G,{src:a.image_url,alt:a.subdomain}),color:"success",label:a.name,onDelete:()=>{c(void 0),r==null||r(void 0)}}):"Gắn doanh nghiệp"}),e.jsx(O,{ref:o,sx:{boxShadow:3},className:"org-search",children:e.jsxs("div",{onClick:s=>s.stopPropagation(),children:[e.jsx("input",{onChange:g,type:"text",className:"form-control form-control-solid",placeholder:"Tìm kiếm..."}),j&&e.jsx(k,{size:16}),e.jsx("div",{className:"org-list",children:e.jsx("ul",{className:"list",children:(u=i==null?void 0:i.data)==null?void 0:u.map(s=>e.jsx(y,{onClick:()=>{c(s),r==null||r(s)},children:s.name},s.id))})})]})})]})};export{R as S};
