import{Q as x,j as s,a8 as h,at as r,L as c,am as j,U as p,V as b,av as l,au as u,K as o,ao as g,aD as d}from"./index-CzmKoHlB.js";import{p as m}from"./promotionApi-BAs_Q2-_.js";function y(){var a;const{data:e,isLoading:n}=x({queryKey:[d.PROMOTION],queryFn:()=>m.getAll({limit:15,page:1})});return s.jsxs(s.Fragment,{children:[s.jsx(h,{element:s.jsx(r,{permissions:["v1.promotions.store"],children:s.jsx(c,{to:{pathname:"/pages/promotions-form"},className:"btn btn-sm btn-primary",children:"Tạo mới"})}),title:"Danh sách Promotion"}),s.jsxs("div",{className:"card mb-5 mb-xl-8",children:[s.jsx("div",{className:"card-header border-0 pt-5",children:s.jsxs("h3",{className:"card-title align-items-start flex-column",children:[s.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Promotion"}),s.jsxs("span",{className:"text-muted mt-1 fw-semobold fs-7",children:["Số lượng : ",(e==null?void 0:e.total)??1]})]})}),s.jsx("div",{className:"card-body py-3",children:s.jsxs("div",{className:"table-responsive",children:[s.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"fw-bold text-muted",children:[s.jsx("th",{className:"min-w-100px",children:"Image"}),s.jsx("th",{className:"min-w-150px",children:"Tên promotion"}),s.jsx("th",{className:"min-w-50px",children:"Popup"}),s.jsx("th",{className:"min-w-100px",children:"Từ ngày"}),s.jsx("th",{className:"min-w-100px",children:"Đến ngày"}),s.jsx("th",{className:"min-w-80px"})]})}),s.jsx("tbody",{children:(a=e==null?void 0:e.data)==null?void 0:a.map((t,i)=>s.jsx(f,{item:t},i))})]}),s.jsx(j,{loading:n})]})})]})]})}const f=({item:e})=>{const n=p(),{mutate:a,isLoading:t}=b({mutationFn:i=>m.delete(i),onSuccess:()=>n.invalidateQueries({queryKey:d.PROMOTION})});return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("div",{className:"d-flex align-items-center",children:s.jsx("div",{className:"symbol symbol-100px me-5",children:s.jsx("img",{style:{objectFit:"contain"},src:String(e.media_url),alt:""})})})}),s.jsx("td",{children:s.jsx("div",{className:"d-flex align-items-center",children:s.jsxs("div",{className:"d-flex justify-content-start flex-column",children:[s.jsx("span",{className:"text-dark fw-bold text-hover-primary fs-6",children:e.name}),e.priority<0&&s.jsx("span",{children:"Webview đối tác"}),s.jsx("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:l(e.created_at)})]})})}),s.jsx("td",{children:s.jsx(u,{value:e.is_popup===1,label:""})}),s.jsx("td",{children:s.jsx("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:l(e.valid_from)})}),s.jsx("td",{children:s.jsx("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:l(e.valid_util)})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex justify-content-end flex-shrink-0 tb-control",children:[s.jsx(r,{permissions:["v1.promotions.update"],children:s.jsx(c,{to:{pathname:`/pages/promotions-form/${e.id}`},"aria-label":"Xem chi tiết",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:s.jsx(o,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),s.jsx(r,{permissions:["v1.promotions.destroy"],children:s.jsx("button",{onClick:()=>a(e.id),disabled:t,className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:t?s.jsx(g,{size:12}):s.jsx(o,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]})})]})};export{y as default};
