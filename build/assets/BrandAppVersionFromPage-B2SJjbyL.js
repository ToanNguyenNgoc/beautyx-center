import{ae as p,V as v,z as f,s as x,bV as g,v as j,j as e,as as b,a9 as N,ay as y,bD as _,ax as r,a7 as P}from"./index-B-8ZwVwN.js";import{u as w}from"./usePostMedia-A8ePNnx5.js";import{L as F}from"./LoadingButton-CddcXNEg.js";import"./mediaApi-D5m0zIdO.js";const B=()=>{const i=p(),l=(i==null?void 0:i.os_platform)||"ios",o=i==null?void 0:i.bundle,{isLoading:t,handlePostMedia:d}=w(),{mutate:c,isLoading:m}=v({mutationFn:a=>P.Admin.postBrandAppVersion(String(o),a),onSuccess:()=>r.open({title:"Tạo mới thành công",type:"success"}),onError:()=>r.open({title:"Có lỗi xảy ra",type:"error"})}),s=f({initialValues:{version:"",os_platform:l,media_id:void 0,status:!0},validationSchema:x({version:j().required("Nhập phiên bản"),media_id:g().required("upload file build")}),onSubmit(a){o&&c(a)}}),u=a=>{d({e:{target:{files:[a]}},callBack(h){var n;r.open({title:"Upload file thành công",type:"success"}),s.setFieldValue("media_id",(n=h[0])==null?void 0:n.model_id)},version:"myspa",resetOriginalResult:!0})};return e.jsxs(b,{permissions:["v1.brand_app_versions.store"],showEmpty:!0,children:[e.jsx(N,{title:`Tạo mới build ${l}`}),e.jsx("div",{className:"card p-4",children:e.jsxs("form",{onSubmit:s.handleSubmit,noValidate:!0,className:"form",children:[e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Phiên bản hiện tại trên Store"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx("input",{type:"text",className:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:"Phiên bản",...s.getFieldProps("version")}),s.touched.version&&s.errors.version&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.version})})]})})})]}),e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Build file"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx(y,{handleChange:u,name:"file",types:["zip"]}),t&&e.jsx("div",{style:{marginTop:8},children:e.jsx(_,{})}),s.touched.media_id&&s.errors.media_id&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.media_id})})]})})})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(F,{loading:m,size:"large",color:"success",type:"submit",variant:"contained",children:"Tạo mới"})})]})})]})};export{B as default};
