import{a as c,an as _}from"./index-BHl1vF-Z.js";import{m as x}from"./mediaApi-BVlMDnWK.js";function U(){const[h,y]=c.useState([]),[L,n]=c.useState(!1);return{medias:h,handlePostMedia:async({e:t,callBack:d,version:m="myspa",resetOriginalResult:M})=>{var f,p;if(t.target.files){n(!0);let u=[];for(var a=0;a<((f=t.target.files)==null?void 0:f.length);a++){const r={id:-a,model_id:-a,original_url:URL.createObjectURL(t.target.files[a]),mime_type:t.target.files[a].type};u.push(r)}d&&d(u);try{const r=[];for(var i=0;i<((p=t.target.files)==null?void 0:p.length);i++){const g=t.target.files[i];let o=new FormData,l={id:i,original_url:URL.createObjectURL(g),model_id:i,mime_type:t.target.files[i].type};o.append("file",g);let e;m==="api.beautyx"&&(e=await _.media(o).then(s=>s.data)),m==="api.beautyx/cloud"&&(e=await _.mediaCloud(o).then(s=>s.data)),m==="myspa"&&(e=await x.postMedia(o).then(s=>s.data.context)),e&&(l={...l,id:e.id,model_id:e.model_id,original_url:M?e.original_url:l.original_url}),r.push(l)}y(r),n(!1),d&&d(r)}catch{}}},isLoading:L}}export{U as u};
