import{aE as v,Q as S,a as m,V as w,ah as N,j as e,bS as E,ao as k,aB as y,bR as h}from"./index-CzmKoHlB.js";import{C as O}from"./Chip-CPKVIjen.js";import{A as L}from"./Avatar-DB29V3e2.js";const P=({origin:a,setOrigin:c,organization_id:l,required:x,onChange:r})=>{var u;const{isGmupSite:p}=v();S({queryKey:["ORG_SELECTION",l],queryFn:()=>h.getOrgById(l).then(s=>s.data),enabled:!!l,onSuccess:s=>c(s.context)});const o=m.useRef(null),n=s=>{o.current&&(s==="hide"&&o.current.classList.remove("org-search-show"),s==="show"&&(o.current.classList.add("org-search-show"),d("")))};window.addEventListener("click",()=>n("hide"));const f=s=>{const t={keyword:s,is_ecommerce:!0,is_gmup:void 0};return p&&(t.is_gmup=!0),t},{data:i,mutate:d,isLoading:j}=w({mutationFn:s=>h.getAll(f(s)).then(t=>t.data.context)}),b=m.useCallback(N.debounce(s=>d(s),600),[]),g=s=>b(s.target.value);return e.jsxs("div",{className:"col col-org",children:[e.jsx("label",{className:`${x&&"required"} filter-row_label mb-2`,children:"Gắn doanh nghiệp"}),e.jsx("div",{onClick:s=>{s.stopPropagation(),n("show")},className:"form-control form-control-solid",children:a?e.jsx(O,{avatar:e.jsx(L,{src:a.image_url,alt:a.subdomain}),color:"success",label:a.name,onDelete:()=>{c(void 0),r==null||r(void 0)}}):"Gắn doanh nghiệp"}),e.jsx(E,{ref:o,sx:{boxShadow:3},className:"org-search",children:e.jsxs("div",{onClick:s=>s.stopPropagation(),children:[e.jsx("input",{onChange:g,type:"text",className:"form-control form-control-solid",placeholder:"Tìm kiếm..."}),j&&e.jsx(k,{size:16}),e.jsx("div",{className:"org-list",children:e.jsx("ul",{className:"list",children:(u=i==null?void 0:i.data)==null?void 0:u.map(s=>e.jsx(y,{onClick:()=>{c(s),r==null||r(s)},children:s.name},s.id))})})]})})]})};export{P as S};
