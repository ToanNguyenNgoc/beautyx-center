import{ad as p,V as f,z as v,s as x,bV as g,v as j,j as e,at as b,a8 as N,ay as y,ax as r}from"./index-BlvkBlq-.js";import{u as _}from"./usePostMedia-Cr3nD3Ch.js";import{a as P}from"./adminApi-eUYF2dd1.js";import{L as w}from"./LinearProgress-BnscHxm9.js";import{L}from"./LoadingButton-DGqjgf5H.js";import"./mediaApi-B-sYGa9p.js";const q=()=>{const i=p(),o=(i==null?void 0:i.os_platform)||"ios",l=i==null?void 0:i.bundle,{isLoading:t,handlePostMedia:d}=_(),{mutate:c,isLoading:m}=f({mutationFn:a=>P.postBrandAppVersion(String(l),a),onSuccess:()=>r.open({title:"Tạo mới thành công",type:"success"}),onError:()=>r.open({title:"Có lỗi xảy ra",type:"error"})}),s=v({initialValues:{version:"",os_platform:o,media_id:void 0,status:!0},validationSchema:x({version:j().required("Nhập phiên bản"),media_id:g().required("upload file build")}),onSubmit(a){l&&c(a)}}),u=a=>{d({e:{target:{files:[a]}},callBack(h){var n;r.open({title:"Upload file thành công",type:"success"}),s.setFieldValue("media_id",(n=h[0])==null?void 0:n.model_id)},version:"myspa",resetOriginalResult:!0})};return e.jsxs(b,{permissions:["v1.brand_app_versions.store"],showEmpty:!0,children:[e.jsx(N,{title:`Tạo mới build ${o}`}),e.jsx("div",{className:"card p-4",children:e.jsxs("form",{onSubmit:s.handleSubmit,noValidate:!0,className:"form",children:[e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Phiên bản hiện tại trên Store"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx("input",{type:"text",className:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:"Phiên bản",...s.getFieldProps("version")}),s.touched.version&&s.errors.version&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.version})})]})})})]}),e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Build file"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx(y,{handleChange:u,name:"file",types:["zip"]}),t&&e.jsx("div",{style:{marginTop:8},children:e.jsx(w,{})}),s.touched.media_id&&s.errors.media_id&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.media_id})})]})})})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(L,{loading:m,size:"large",color:"success",type:"submit",variant:"contained",children:"Tạo mới"})})]})})]})};export{q as default};
