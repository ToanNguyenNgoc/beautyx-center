import{Q as j,j as s,a8 as b,L as u,am as g,a7 as N,f as p,au as f,aD as h,K as v,aE as y}from"./index-BlvkBlq-.js";import{c as w}from"./style--Sgrkkf5.js";import{A as o}from"./Avatar-Ch_5iS73.js";function T(){var a;const{data:e,isLoading:n}=j({queryKey:[y.COMMUNITY],queryFn:()=>w.getAll({limit:15,append:"media_url",sort:"-created_at"})});return s.jsxs(s.Fragment,{children:[s.jsx(b,{title:"Cộng đồng và kiểm duyệt",element:s.jsx(u,{to:{pathname:"/pages/community-form"},className:"btn btn-sm btn-primary",children:"Tạo mới bài viết"})}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header border-0 pt-5",children:s.jsxs("h3",{className:"card-title align-items-start flex-column",children:[s.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Bài viết"}),s.jsxs("span",{className:"text-muted mt-1 fw-semobold fs-7",children:[(e==null?void 0:e.total)||0," bài viết"]})]})}),s.jsx("div",{className:"card-body py-3",children:s.jsxs("div",{className:"table-responsive",children:[s.jsxs("table",{className:"table align-middle gs-0 gy-4",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"fw-bold text-muted bg-light",children:[s.jsx("th",{className:"ps-4 min-w-200px rounded-start",children:"Tác giả"}),s.jsx("th",{className:"min-w-300px",children:"Nội dung"}),s.jsx("th",{className:"min-w-80px",children:"Trạng thái"}),s.jsx("th",{className:"min-w-150px",children:"Gắn doanh nghiệp"}),s.jsx("th",{className:"min-w-150px",children:"Gắn dịch vụ"}),s.jsx("th",{className:"min-w-125px",children:"Tag"}),s.jsx("th",{className:"min-w-100px",children:"Bình luận"}),s.jsx("th",{className:"min-w-100px",children:"Yêu thích"}),s.jsx("th",{className:"min-w-100px",children:"Cập nhật"}),s.jsx("th",{className:"min-w-100px",children:"Ngày đăng"}),s.jsx("th",{className:"min-w-100px"})]})}),s.jsx("tbody",{children:(a=e==null?void 0:e.data)==null?void 0:a.map(i=>s.jsx(Y,{post:i},i.id))})]}),s.jsx(g,{loading:n})]})})]})]})}const Y=({post:e})=>{var i,t,c,r,d,m,x;const n=N(),{USER:a}=p(l=>l.ACCOUNT);return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"symbol symbol-50px me-5",children:s.jsx(o,{src:((i=e.user)==null?void 0:i.avatar)||((t=e.user)==null?void 0:t.fullname),alt:""})}),s.jsx("div",{className:"d-flex justify-content-start flex-column",children:s.jsx("span",{className:"text-dark fw-bold mb-1 fs-6",children:(c=e.user)==null?void 0:c.fullname})})]})}),s.jsx("td",{children:s.jsx("span",{className:"post-content",children:e.content})}),s.jsx("td",{children:s.jsx(f,{value:e.status===1,label:""})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(o,{className:"me-1",src:((r=e.organization)==null?void 0:r.image_url)||((d=e.organization)==null?void 0:d.name)}),s.jsx("span",{children:(m=e.organization)==null?void 0:m.name})]})}),s.jsx("td",{children:s.jsx("span",{className:"d-block fs-7",children:e.list_service.map(l=>l.service_name).join(", ")})}),s.jsx("td",{children:s.jsx("span",{className:"badge badge-success",children:(x=e.tag)==null?void 0:x.name})}),s.jsx("td",{children:s.jsx("span",{className:"text-center d-block fs-6",children:e.comment_count})}),s.jsx("td",{children:s.jsx("span",{className:"text-center d-block fs-6",children:e.favorite_count})}),s.jsx("td",{children:s.jsxs("span",{children:[" ",h(e.updated_at).format("DD/MM/YYYY")]})}),s.jsx("td",{children:s.jsxs("span",{children:[" ",h(e.created_at).format("DD/MM/YYYY")]})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex",children:[s.jsx("button",{onClick:()=>n(`/pages/community/${e.id}`),className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 btn-co",children:s.jsx("i",{className:"bi bi-eye-fill"})}),e.user_id===(a==null?void 0:a.id)&&s.jsx("button",{onClick:()=>n(`/pages/community/${e.id}`),className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 btn-co",children:s.jsx("i",{className:"bi bi-pencil-fill fs-6"})}),s.jsx("button",{onClick:()=>n(`/pages/community/${e.id}`),className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 btn-co",children:s.jsx(v,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})]})})]})};export{T as default};
