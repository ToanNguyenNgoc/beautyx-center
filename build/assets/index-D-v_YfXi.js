import{a7 as h,a as b,Q as j,j as s,a8 as p,at as d,al as u,am as g,U as N,V as f,t as v,av as y,bh as w,aD as k,L as E,K as o,ao as B,bi as m,ay as x}from"./index-BuiS39ZH.js";/* empty css              */import{a as C}from"./index-YW9JZPqe.js";function T(){const l=h(),[n,t]=b.useState([]);j({queryKey:[x.BANNER],queryFn:()=>m.banners(),onSuccess(a){t(a.data)}});const i=(a,r)=>{t(C(n,a,r))};return s.jsxs(s.Fragment,{children:[s.jsx(p,{element:s.jsx(d,{permissions:["v1.banners.store"],children:s.jsx(u,{onClick:()=>{var a;return l("/pages/banners-form",{state:(a=n[0])==null?void 0:a.priority})},variant:"contained",size:"large",children:"Tạo mới banner"})}),title:"Danh sách banners"}),s.jsx("div",{className:"row g-5 gx-xxl-8 table-banner",children:s.jsxs("div",{className:"card mb-5 mb-xl-8",children:[s.jsx("div",{className:"card-header border-0 pt-5",children:s.jsxs("h3",{className:"card-title align-items-start flex-column",children:[s.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Banners Campaigns"}),s.jsx("span",{className:"text-muted mt-1 fw-semobold fs-7",children:n.length})]})}),s.jsx("div",{className:"card-body py-3",children:s.jsxs("div",{className:"table-responsive",children:[s.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"fw-bold text-muted",children:[s.jsx("th",{className:"w-25px",children:s.jsx("div",{className:"form-check form-check-sm form-check-custom form-check-solid"})}),s.jsx("th",{className:"min-w-150px",children:"Banner"}),s.jsx("th",{className:"min-w-140px",children:"Loại"}),s.jsx("th",{className:"min-w-140px",children:"Ngày hết hạn"}),s.jsx("th",{className:"min-w-140px",children:"Nền tảng"}),s.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),s.jsx(S,{onSortEnd:i,banners:n})]}),s.jsx(g,{loading:n.length===0})]})})]})})]})}const S=({banners:l,onSortEnd:n})=>{const t=({oldIndex:e,newIndex:c})=>{n(e,c)},i=N(),{mutate:a,isLoading:r}=f({mutationFn:e=>m.deleteBanner(e),onSuccess:()=>{i.invalidateQueries({queryKey:[x.BANNER]})},onError:()=>{}});return s.jsx(s.Fragment,{children:l.map((e,c)=>s.jsxs("tr",{onClick:()=>t({newIndex:1,oldIndex:1}),children:[s.jsx("td",{children:s.jsx("img",{src:v("/media/icons/duotune/abstract/abs015.svg"),alt:""})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("div",{className:"symbol symbol-45px me-5",children:s.jsx("img",{className:"banner-item__img",src:e.imageURL,alt:""})}),s.jsxs("div",{className:"d-flex justify-content-start flex-column",children:[s.jsx("span",{className:"text-dark fw-bold text-hover-primary fs-6",children:e.name}),s.jsx("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:y(e.created_at)})]})]})}),s.jsx("td",{children:s.jsx(w,{TYPE:e.type})}),s.jsx("td",{children:s.jsx("span",{className:"text-dark fw-bold text-hover-primary d-block fs-6",children:e.expires_at?k(e.expires_at).format("DD/MM/YYYY"):"Không thời hạn"})}),s.jsx("td",{children:s.jsx("span",{className:"text-dark fw-bold text-hover-primary d-block fs-6",children:"Tất cả"})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex justify-content-end flex-shrink-0",children:[s.jsx(d,{permissions:["v1.banners.update"],children:s.jsx(E,{to:{pathname:`/pages/banners-form/${e.id}`},className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:s.jsx(o,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),s.jsx(d,{permissions:["v1.banners.destroy"],children:s.jsx("button",{onClick:()=>a(e.id),disabled:r,className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",children:r?s.jsx(B,{size:12}):s.jsx(o,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]})})]},c))})};export{T as default};
