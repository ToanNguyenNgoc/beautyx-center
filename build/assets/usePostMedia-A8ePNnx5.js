import{a as c,am as h}from"./index-B-8ZwVwN.js";import{m as w}from"./mediaApi-D5m0zIdO.js";function U(){const[y,_]=c.useState([]),[L,n]=c.useState(!1);return{medias:y,handlePostMedia:async({e,callBack:o,version:l="myspa",resetOriginalResult:M})=>{var f,p;if(console.log(M),e.target.files){n(!0);let u=[];for(var i=0;i<((f=e.target.files)==null?void 0:f.length);i++){const t={id:-i,model_id:-i,original_url:URL.createObjectURL(e.target.files[i]),mime_type:e.target.files[i].type};u.push(t)}o&&o(u);try{const t=[];for(var s=0;s<((p=e.target.files)==null?void 0:p.length);s++){const g=e.target.files[s];let d=new FormData,m={id:s,original_url:URL.createObjectURL(g),model_id:s,mime_type:e.target.files[s].type};d.append("file",g);let a;l==="api.beautyx"&&(a=await h.media(d).then(r=>r.data)),l==="api.beautyx/cloud"&&(a=await h.mediaCloud(d).then(r=>r.data)),l==="myspa"&&(a=await w.postMedia(d).then(r=>r.data.context)),a&&(m={...m,id:a.id,model_id:a.model_id,preview_url:a.original_url}),t.push(m)}_(t),n(!1),o&&o(t)}catch(t){console.log(t)}}},isLoading:L}}export{U as u};
