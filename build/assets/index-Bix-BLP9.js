import{a7 as b,ad as u,e as N,as as h,Q as g,aD as x,j as e,a8 as y,L as v,aC as j,a9 as D,am as Y}from"./index-CzmKoHlB.js";import{F as P}from"./index-Q9bSjWuR.js";import{d as f}from"./discounts-DJL2REOx.js";/* empty css              */import{E as w}from"./export-code-GGVzyiPE.js";import"./LoadingButton-CQgDJbfP.js";function k(){var m;const o=b(),a=u(),n=N(),t=h.parse(n.search),c=n.state,{data:d}=g({queryKey:[x.DISCOUNT,a.id],queryFn:()=>f.getDiscountDetail({id:a.id}),enabled:!c,onError:()=>o("/error/404")}),s=c??(d==null?void 0:d.context),{data:l}=g({queryKey:[x.DISCOUNT_CODE,a.id,t],queryFn:()=>f.getCodeIsCampaign({uuid:a.id,limit:50,page:(t==null?void 0:t.page)??1}),enabled:!!(a!=null&&a.id)}),p=r=>{const i={page:r};o({pathname:n.pathname,search:h.stringify(i)})};return s?e.jsxs(e.Fragment,{children:[e.jsx(y,{title:(s==null?void 0:s.title)??"",element:e.jsx(v,{to:{pathname:`/pages/discounts-form/${s==null?void 0:s.uuid}`},className:"btn btn-sm btn-success",children:"Thay đổi thông tin"})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"detail",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("p",{className:"fw-semobold d-block fs-4",children:["Danh sách mã giảm giá (",s.total," mã)"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{style:{marginRight:"8px"},children:"Nền tảng"}),e.jsx(P,{platForm:(s==null?void 0:s.platform)??""})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{style:{marginRight:"8px"},children:"Áp dụng từ"}),(s==null?void 0:s.valid_from)&&(s==null?void 0:s.valid_util)&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"fw-semobold d-block fs-6",children:j(s.valid_from).format("DD/MM/YYYY")}),"-",e.jsx("span",{className:"fw-semobold d-block fs-6",children:j(s.valid_util).format("DD/MM/YYYY")})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-2 mb-2",children:e.jsx(w,{discount:s})})]})]}),e.jsxs("table",{className:"table table-rounded table-row-bordered border gy-7 gs-7",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold fs-6 text-gray-800 border-bottom-2 border-gray-200",children:[e.jsx("th",{children:"STT"}),e.jsx("th",{children:"Mã giảm giá"}),e.jsx("th",{children:"Trạng thái sử dụng"})]})}),e.jsx("tbody",{children:(m=l==null?void 0:l.data)==null?void 0:m.map((r,i)=>e.jsxs("tr",{className:r.status==="1"?"":"table-active",children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:r.coupon_code}),e.jsx("td",{children:r.status==="1"?"Chưa sử dụng":"Đã sử dụng"})]},i))})]}),e.jsx(D,{totalPage:l!=null&&l.total?Math.ceil(l.total/50):1,defaultPage:(t==null?void 0:t.page)??1,onChangePage:p})]})})]}):e.jsx(Y,{loading:!0})}export{k as default};
