import{as as x,j as s,a8 as h,at as i,L as p,a7 as j,a as u,au as b,av as g,K as o,aw as v,ax as r}from"./index-CwORS_Xz.js";import{A as m}from"./axios.instance-4ExcG6zI.js";import{u as N}from"./useGetGmupTags-2BofUJ1p.js";const T=()=>{var n;const e=x.parse(location.search),{data:t,refetch:c}=N({page:(e==null?void 0:e.page)??1,limit:15,"filter[is_root]":!0,include:"media",sort:e.sort?e.sort:"-created_at"}),d=a=>v.open({callBack:()=>m({version:"v4"}).delete(`/tags/${a}`).then(()=>{r.open({title:"Xóa thành công"}),c()}).catch(()=>r.open({title:"Có lỗi xảy ra. Vui lòng thử lại",type:"error"}))});return s.jsxs("div",{children:[s.jsx(h,{element:s.jsx(i,{permissions:["v4.tags.store"],children:s.jsx(p,{to:{pathname:"/pages/tags-form"},className:"btn btn-sm btn-primary",children:"Tạo mới"})}),title:"Danh sách"}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header border-0 pt-5",children:s.jsx("h3",{className:"card-title align-items-start flex-column",children:s.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Tags"})})}),s.jsx("div",{className:"card-body py-3",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"fw-bold text-muted",children:[s.jsx("th",{className:"min-w-150px",children:"Tag"}),s.jsx("th",{className:"min-w-140px",children:"Độ ưu tiên"}),s.jsx(i,{permissions:["v4.tags.update"],children:s.jsx("th",{className:"min-w-140px",children:"Status"})}),s.jsx("th",{className:"min-w-120px",children:"Ngày tạo"}),s.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),s.jsx("tbody",{children:(n=t==null?void 0:t.context.data)==null?void 0:n.map(a=>s.jsx(f,{tag:a,onDeleteTag:()=>d(Number(a.id))},a.id))})]})})})]})]})},f=({tag:e,onDeleteTag:t})=>{const c=j(),[d,n]=u.useState(e.status),a=l=>(n(l),m({version:"v4"}).put(`/tags/${e.id}`,{status:l}).then(()=>r.open({title:"Lưu thành công",type:"success"})).catch(()=>{r.open({title:"Có lỗi xảy ra. Vui lòng thử lại",type:"error"}),n(e.status)}));return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"d-flex align-items-center",children:[e.media.length>0&&s.jsx("div",{className:"symbol symbol-45px me-5",children:s.jsx("div",{className:"symbol symbol-45px me-5",children:s.jsx("img",{src:e.media[0].original_url,alt:""})})}),s.jsx("div",{className:"d-flex justify-content-start flex-column",children:s.jsx("span",{className:"text-dark fw-bold fs-6",children:e.name})})]})}),s.jsx("td",{children:s.jsx("span",{className:"text-dark fw-bold text-hover-primary d-block fs-6",children:e.priority})}),s.jsx(i,{permissions:["v4.tags.update"],children:s.jsx("td",{children:s.jsx(b,{value:d,onChange:l=>a(l.target.checked),label:""})})}),s.jsx("td",{className:"text-end",children:s.jsx("div",{className:"d-flex flex-column w-100 me-2",children:s.jsx("div",{className:"d-flex flex-stack mb-2",children:s.jsx("span",{className:"text-muted me-2 fs-7 fw-semobold",children:g(e.created_at,"DD/MM/YYYY HH:mm")})})})}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex justify-content-end flex-shrink-0 tb-control",children:[s.jsx(i,{permissions:["v4.tags.update"],children:s.jsx("button",{onClick:()=>c(`/pages/tags-form/${e.id}`),"aria-label":"Xem chi tiết",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:s.jsx(o,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})})}),s.jsx(i,{permissions:["v4.tags.destroy"],children:s.jsx("button",{"aria-label":"Xóa",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:t,children:s.jsx(o,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})})]})})]})};export{T as default};
