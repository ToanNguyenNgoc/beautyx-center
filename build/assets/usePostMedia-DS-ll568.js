import{a as c,an as h}from"./index-CwORS_Xz.js";import{m as x}from"./mediaApi-CdKh61ja.js";function U(){const[y,_]=c.useState([]),[L,n]=c.useState(!1);return{medias:y,handlePostMedia:async({e,callBack:r,version:l="myspa",resetOriginalResult:M})=>{var f,p;if(console.log(M),e.target.files){n(!0);let g=[];for(var a=0;a<((f=e.target.files)==null?void 0:f.length);a++){const t={id:-a,model_id:-a,original_url:URL.createObjectURL(e.target.files[a]),mime_type:e.target.files[a].type};g.push(t)}r&&r(g);try{const t=[];for(var i=0;i<((p=e.target.files)==null?void 0:p.length);i++){const u=e.target.files[i];let d=new FormData,m={id:i,original_url:URL.createObjectURL(u),model_id:i,mime_type:e.target.files[i].type};d.append("file",u);let s;l==="api.beautyx"&&(s=await h.media(d).then(o=>o.data)),l==="api.beautyx/cloud"&&(s=await h.mediaCloud(d).then(o=>o.data)),l==="myspa"&&(s=await x.postMedia(d).then(o=>o.data.context)),s&&(m={...m,id:s.id,model_id:s.model_id}),t.push(m)}_(t),n(!1),r&&r(t)}catch(t){console.log(t)}}},isLoading:L}}export{U as u};
