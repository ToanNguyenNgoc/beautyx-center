import{a as N,bE as Ft,bw as lt,bx as qe,c6 as Et,aO as O,aR as Ct,aS as kt,aT as St,aJ as Ae,j as e,aV as B,aW as Ie,aX as Je,aY as $t,c7 as zt,aZ as Lt,c8 as Ht,aK as Bt,c9 as ve,ca as ce,cb as Nt,cc as it,bD as Tt,cd as ct,e as At,a7 as Rt,as as pe,Q as ft,at as Gt,a8 as Vt,ao as Wt,L as Ut,bM as ne,aD as Kt,ce as ht,a9 as Qt,bR as Yt,aA as pt,cf as dt,aB as ut,aC as Ne,cg as qt,aG as Xt,ah as H,a0 as Jt,ch as Zt,ci as es,a3 as ts,cj as ss,bQ as It}from"./index-BuiS39ZH.js";import{a as ns}from"./adminApi-MwFBpXe1.js";import{u as _t}from"./useDebounce-Ds-45r2W.js";import{u as os}from"./useGetRolesAndPermissions-CJAmRctH.js";import{F as as}from"./index-DGoIgz2e.js";import{A as rs}from"./Avatar-ZghSeTi1.js";import{P as Dt}from"./Popper-GozLk9RW.js";import{C as ls}from"./Chip-B5qCQMpp.js";import{T as is}from"./TextField-CIjkaLjU.js";const cs=s=>{const o=N.useRef({});return N.useEffect(()=>{o.current=s}),o.current};function Ot(s){return typeof s.normalize<"u"?s.normalize("NFD").replace(/[\u0300-\u036f]/g,""):s}function ps(s={}){const{ignoreAccents:o=!0,ignoreCase:l=!0,limit:h,matchFrom:y="any",stringify:j,trim:u=!1}=s;return(b,{inputValue:$,getOptionLabel:L})=>{let P=u?$.trim():$;l&&(P=P.toLowerCase()),o&&(P=Ot(P));const T=P?b.filter(R=>{let a=(j||L)(R);return l&&(a=a.toLowerCase()),o&&(a=Ot(a)),y==="start"?a.indexOf(P)===0:a.indexOf(P)>-1}):b;return typeof h=="number"?T.slice(0,h):T}}function Xe(s,o){for(let l=0;l<s.length;l+=1)if(o(s[l]))return l;return-1}const ds=ps(),us=5,fs=s=>{var o;return s.current!==null&&((o=s.current.parentElement)==null?void 0:o.contains(document.activeElement))},hs=[];function ms(s){const{unstable_isActiveElementInListbox:o=fs,unstable_classNamePrefix:l="Mui",autoComplete:h=!1,autoHighlight:y=!1,autoSelect:j=!1,blurOnSelect:u=!1,clearOnBlur:b=!s.freeSolo,clearOnEscape:$=!1,componentName:L="useAutocomplete",defaultValue:P=s.multiple?hs:null,disableClearable:T=!1,disableCloseOnSelect:R=!1,disabled:a,disabledItemsFocusable:m=!1,disableListWrap:Z=!1,filterOptions:oe=ds,filterSelectedOptions:ee=!1,freeSolo:G=!1,getOptionDisabled:E,getOptionKey:de,getOptionLabel:Re=n=>{var t;return(t=n.label)!=null?t:n},groupBy:Oe,handleHomeEndKeys:te=!s.freeSolo,id:mt,includeInputInList:Ze=!1,inputValue:_e,isOptionEqualToValue:ue=(n,t)=>n===t,multiple:g=!1,onChange:Pe,onClose:De,onHighlightChange:Me,onInputChange:q,onOpen:Fe,open:gt,openOnFocus:xt=!1,options:we,readOnly:ae=!1,selectOnFocus:Ce=!s.freeSolo,value:Ee}=s,M=Ft(mt);let A=Re;A=n=>{const t=Re(n);return typeof t!="string"?String(t):t};const ke=N.useRef(!1),ze=N.useRef(!0),w=N.useRef(null),F=N.useRef(null),[fe,et]=N.useState(null),[_,Se]=N.useState(-1),He=y?0:-1,k=N.useRef(He),[c,bt]=lt({controlled:Ee,default:P,name:L}),[f,X]=lt({controlled:_e,default:"",name:L,state:"inputValue"}),[he,Be]=N.useState(!1),re=N.useCallback((n,t)=>{if(!(g?c.length<t.length:t!==null)&&!b)return;let i;if(g)i="";else if(t==null)i="";else{const d=A(t);i=typeof d=="string"?d:""}f!==i&&(X(i),q&&q(n,i,"reset"))},[A,f,g,q,X,b,c]),[se,Ge]=lt({controlled:gt,default:!1,name:L,state:"open"}),[tt,Ve]=N.useState(!0),We=!g&&c!=null&&f===A(c),D=se&&!ae,x=D?oe(we.filter(n=>!(ee&&(g?c:[c]).some(t=>t!==null&&ue(n,t)))),{inputValue:We&&tt?"":f,getOptionLabel:A}):[],V=cs({filteredOptions:x,value:c,inputValue:f});N.useEffect(()=>{const n=c!==V.value;he&&!n||G&&!n||re(null,c)},[c,re,he,V.value,G]);const $e=se&&x.length>0&&!ae,me=qe(n=>{n===-1?w.current.focus():fe.querySelector(`[data-tag-index="${n}"]`).focus()});N.useEffect(()=>{g&&_>c.length-1&&(Se(-1),me(-1))},[c,g,_,me]);function ge(n,t){if(!F.current||n<0||n>=x.length)return-1;let r=n;for(;;){const i=F.current.querySelector(`[data-option-index="${r}"]`),d=m?!1:!i||i.disabled||i.getAttribute("aria-disabled")==="true";if(i&&i.hasAttribute("tabindex")&&!d)return r;if(t==="next"?r=(r+1)%x.length:r=(r-1+x.length)%x.length,r===n)return-1}}const K=qe(({event:n,index:t,reason:r="auto"})=>{if(k.current=t,t===-1?w.current.removeAttribute("aria-activedescendant"):w.current.setAttribute("aria-activedescendant",`${M}-option-${t}`),Me&&Me(n,t===-1?null:x[t],r),!F.current)return;const i=F.current.querySelector(`[role="option"].${l}-focused`);i&&(i.classList.remove(`${l}-focused`),i.classList.remove(`${l}-focusVisible`));let d=F.current;if(F.current.getAttribute("role")!=="listbox"&&(d=F.current.parentElement.querySelector('[role="listbox"]')),!d)return;if(t===-1){d.scrollTop=0;return}const v=F.current.querySelector(`[data-option-index="${t}"]`);if(v&&(v.classList.add(`${l}-focused`),r==="keyboard"&&v.classList.add(`${l}-focusVisible`),d.scrollHeight>d.clientHeight&&r!=="mouse"&&r!=="touch")){const I=v,Y=d.clientHeight+d.scrollTop,vt=I.offsetTop+I.offsetHeight;vt>Y?d.scrollTop=vt-d.clientHeight:I.offsetTop-I.offsetHeight*(Oe?1.3:0)<d.scrollTop&&(d.scrollTop=I.offsetTop-I.offsetHeight*(Oe?1.3:0))}}),W=qe(({event:n,diff:t,direction:r="next",reason:i="auto"})=>{if(!D)return;const v=ge((()=>{const I=x.length-1;if(t==="reset")return He;if(t==="start")return 0;if(t==="end")return I;const Y=k.current+t;return Y<0?Y===-1&&Ze?-1:Z&&k.current!==-1||Math.abs(t)>1?0:I:Y>I?Y===I+1&&Ze?-1:Z||Math.abs(t)>1?I:0:Y})(),r);if(K({index:v,reason:i,event:n}),h&&t!=="reset")if(v===-1)w.current.value=f;else{const I=A(x[v]);w.current.value=I,I.toLowerCase().indexOf(f.toLowerCase())===0&&f.length>0&&w.current.setSelectionRange(f.length,I.length)}}),xe=()=>{const n=(t,r)=>{const i=t?A(t):"",d=r?A(r):"";return i===d};if(k.current!==-1&&V.filteredOptions&&V.filteredOptions.length!==x.length&&V.inputValue===f&&(g?c.length===V.value.length&&V.value.every((t,r)=>A(c[r])===A(t)):n(V.value,c))){const t=V.filteredOptions[k.current];if(t)return Xe(x,r=>A(r)===A(t))}return-1},Le=N.useCallback(()=>{if(!D)return;const n=xe();if(n!==-1){k.current=n;return}const t=g?c[0]:c;if(x.length===0||t==null){W({diff:"reset"});return}if(F.current){if(t!=null){const r=x[k.current];if(g&&r&&Xe(c,d=>ue(r,d))!==-1)return;const i=Xe(x,d=>ue(d,t));i===-1?W({diff:"reset"}):K({index:i});return}if(k.current>=x.length-1){K({index:x.length-1});return}K({index:k.current})}},[x.length,g?!1:c,ee,W,K,D,f,g]),st=qe(n=>{Et(F,n),n&&Le()});N.useEffect(()=>{Le()},[Le]);const z=n=>{se||(Ge(!0),Ve(!0),Fe&&Fe(n))},J=(n,t)=>{se&&(Ge(!1),De&&De(n,t))},Q=(n,t,r,i)=>{if(g){if(c.length===t.length&&c.every((d,v)=>d===t[v]))return}else if(c===t)return;Pe&&Pe(n,t,r,i),bt(t)},be=N.useRef(!1),le=(n,t,r="selectOption",i="options")=>{let d=r,v=t;if(g){v=Array.isArray(c)?c.slice():[];const I=Xe(v,Y=>ue(t,Y));I===-1?v.push(t):i!=="freeSolo"&&(v.splice(I,1),d="removeOption")}re(n,v),Q(n,v,d,{option:t}),!R&&(!n||!n.ctrlKey&&!n.metaKey)&&J(n,d),(u===!0||u==="touch"&&be.current||u==="mouse"&&!be.current)&&w.current.blur()};function Ue(n,t){if(n===-1)return-1;let r=n;for(;;){if(t==="next"&&r===c.length||t==="previous"&&r===-1)return-1;const i=fe.querySelector(`[data-tag-index="${r}"]`);if(!i||!i.hasAttribute("tabindex")||i.disabled||i.getAttribute("aria-disabled")==="true")r+=t==="next"?1:-1;else return r}}const Ke=(n,t)=>{if(!g)return;f===""&&J(n,"toggleInput");let r=_;_===-1?f===""&&t==="previous"&&(r=c.length-1):(r+=t==="next"?1:-1,r<0&&(r=0),r===c.length&&(r=-1)),r=Ue(r,t),Se(r),me(r)},Qe=n=>{ke.current=!0,X(""),q&&q(n,"","clear"),Q(n,g?[]:null,"clear")},nt=n=>t=>{if(n.onKeyDown&&n.onKeyDown(t),!t.defaultMuiPrevented&&(_!==-1&&["ArrowLeft","ArrowRight"].indexOf(t.key)===-1&&(Se(-1),me(-1)),t.which!==229))switch(t.key){case"Home":D&&te&&(t.preventDefault(),W({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":D&&te&&(t.preventDefault(),W({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),W({diff:-5,direction:"previous",reason:"keyboard",event:t}),z(t);break;case"PageDown":t.preventDefault(),W({diff:us,direction:"next",reason:"keyboard",event:t}),z(t);break;case"ArrowDown":t.preventDefault(),W({diff:1,direction:"next",reason:"keyboard",event:t}),z(t);break;case"ArrowUp":t.preventDefault(),W({diff:-1,direction:"previous",reason:"keyboard",event:t}),z(t);break;case"ArrowLeft":Ke(t,"previous");break;case"ArrowRight":Ke(t,"next");break;case"Enter":if(k.current!==-1&&D){const r=x[k.current],i=E?E(r):!1;if(t.preventDefault(),i)return;le(t,r,"selectOption"),h&&w.current.setSelectionRange(w.current.value.length,w.current.value.length)}else G&&f!==""&&We===!1&&(g&&t.preventDefault(),le(t,f,"createOption","freeSolo"));break;case"Escape":D?(t.preventDefault(),t.stopPropagation(),J(t,"escape")):$&&(f!==""||g&&c.length>0)&&(t.preventDefault(),t.stopPropagation(),Qe(t));break;case"Backspace":if(g&&!ae&&f===""&&c.length>0){const r=_===-1?c.length-1:_,i=c.slice();i.splice(r,1),Q(t,i,"removeOption",{option:c[r]})}break;case"Delete":if(g&&!ae&&f===""&&c.length>0&&_!==-1){const r=_,i=c.slice();i.splice(r,1),Q(t,i,"removeOption",{option:c[r]})}break}},yt=n=>{Be(!0),xt&&!ke.current&&z(n)},ye=n=>{if(o(F)){w.current.focus();return}Be(!1),ze.current=!0,ke.current=!1,j&&k.current!==-1&&D?le(n,x[k.current],"blur"):j&&G&&f!==""?le(n,f,"blur","freeSolo"):b&&re(n,c),J(n,"blur")},S=n=>{const t=n.target.value;f!==t&&(X(t),Ve(!1),q&&q(n,t,"input")),t===""?!T&&!g&&Q(n,null,"clear"):z(n)},C=n=>{const t=Number(n.currentTarget.getAttribute("data-option-index"));k.current!==t&&K({event:n,index:t,reason:"mouse"})},U=n=>{K({event:n,index:Number(n.currentTarget.getAttribute("data-option-index")),reason:"touch"}),be.current=!0},jt=n=>{const t=Number(n.currentTarget.getAttribute("data-option-index"));le(n,x[t],"selectOption"),be.current=!1},ot=n=>t=>{const r=c.slice();r.splice(n,1),Q(t,r,"removeOption",{option:c[n]})},at=n=>{se?J(n,"toggleInput"):z(n)},rt=n=>{n.currentTarget.contains(n.target)&&n.target.getAttribute("id")!==M&&n.preventDefault()},Ye=n=>{n.currentTarget.contains(n.target)&&(w.current.focus(),Ce&&ze.current&&w.current.selectionEnd-w.current.selectionStart===0&&w.current.select(),ze.current=!1)},Te=n=>{!a&&(f===""||!se)&&at(n)};let ie=G&&f.length>0;ie=ie||(g?c.length>0:c!==null);let je=x;return Oe&&(je=x.reduce((n,t,r)=>{const i=Oe(t);return n.length>0&&n[n.length-1].group===i?n[n.length-1].options.push(t):n.push({key:r,index:r,group:i,options:[t]}),n},[])),a&&he&&ye(),{getRootProps:(n={})=>O({"aria-owns":$e?`${M}-listbox`:null},n,{onKeyDown:nt(n),onMouseDown:rt,onClick:Ye}),getInputLabelProps:()=>({id:`${M}-label`,htmlFor:M}),getInputProps:()=>({id:M,value:f,onBlur:ye,onFocus:yt,onChange:S,onMouseDown:Te,"aria-activedescendant":D?"":null,"aria-autocomplete":h?"both":"list","aria-controls":$e?`${M}-listbox`:void 0,"aria-expanded":$e,autoComplete:"off",ref:w,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:a}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Qe}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:at}),getTagProps:({index:n})=>O({key:n,"data-tag-index":n,tabIndex:-1},!ae&&{onDelete:ot(n)}),getListboxProps:()=>({role:"listbox",id:`${M}-listbox`,"aria-labelledby":`${M}-label`,ref:st,onMouseDown:n=>{n.preventDefault()}}),getOptionProps:({index:n,option:t})=>{var r;const i=(g?c:[c]).some(v=>v!=null&&ue(t,v)),d=E?E(t):!1;return{key:(r=de==null?void 0:de(t))!=null?r:A(t),tabIndex:-1,role:"option",id:`${M}-option-${n}`,onMouseMove:C,onClick:jt,onTouchStart:U,"data-option-index":n,"aria-disabled":d,"aria-selected":i}},id:M,inputValue:f,value:c,dirty:ie,expanded:D&&fe,popupOpen:D,focused:he||_!==-1,anchorEl:fe,setAnchorEl:et,focusedTag:_,groupedOptions:je}}function gs(s){return Ct("MuiListSubheader",s)}kt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const xs=["className","color","component","disableGutters","disableSticky","inset"],bs=s=>{const{classes:o,color:l,disableGutters:h,inset:y,disableSticky:j}=s,u={root:["root",l!=="default"&&`color${Je(l)}`,!h&&"gutters",y&&"inset",!j&&"sticky"]};return $t(u,gs,o)},ys=B("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:l}=s;return[o.root,l.color!=="default"&&o[`color${Je(l.color)}`],!l.disableGutters&&o.gutters,l.inset&&o.inset,!l.disableSticky&&o.sticky]}})(({theme:s,ownerState:o})=>O({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(s.vars||s).palette.text.secondary,fontFamily:s.typography.fontFamily,fontWeight:s.typography.fontWeightMedium,fontSize:s.typography.pxToRem(14)},o.color==="primary"&&{color:(s.vars||s).palette.primary.main},o.color==="inherit"&&{color:"inherit"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.inset&&{paddingLeft:72},!o.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(s.vars||s).palette.background.paper})),Mt=N.forwardRef(function(o,l){const h=St({props:o,name:"MuiListSubheader"}),{className:y,color:j="default",component:u="li",disableGutters:b=!1,disableSticky:$=!1,inset:L=!1}=h,P=Ae(h,xs),T=O({},h,{color:j,component:u,disableGutters:b,disableSticky:$,inset:L}),R=bs(T);return e.jsx(ys,O({as:u,className:Ie(R.root,y),ref:l,ownerState:T},P))});Mt.muiSkipListHighlight=!0;function js(s){return Ct("MuiAutocomplete",s)}const p=kt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Pt,wt;const vs=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Ns=["ref"],Is=["key"],Os=["key"],Ps=s=>{const{classes:o,disablePortal:l,expanded:h,focused:y,fullWidth:j,hasClearIcon:u,hasPopupIcon:b,inputFocused:$,popupOpen:L,size:P}=s,T={root:["root",h&&"expanded",y&&"focused",j&&"fullWidth",u&&"hasClearIcon",b&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",$&&"inputFocused"],tag:["tag",`tagSize${Je(P)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",L&&"popupIndicatorOpen"],popper:["popper",l&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return $t(T,js,o)},ws=B("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:l}=s,{fullWidth:h,hasClearIcon:y,hasPopupIcon:j,inputFocused:u,size:b}=l;return[{[`& .${p.tag}`]:o.tag},{[`& .${p.tag}`]:o[`tagSize${Je(b)}`]},{[`& .${p.inputRoot}`]:o.inputRoot},{[`& .${p.input}`]:o.input},{[`& .${p.input}`]:u&&o.inputFocused},o.root,h&&o.fullWidth,j&&o.hasPopupIcon,y&&o.hasClearIcon]}})({[`&.${p.focused} .${p.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${p.clearIndicator}`]:{visibility:"visible"}},[`& .${p.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${p.inputRoot}`]:{[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:30},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:56},[`& .${p.input}`]:{width:0,minWidth:30}},[`& .${it.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${it.root}.${ce.sizeSmall}`]:{[`& .${it.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Nt.root}`]:{padding:9,[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:39},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:65},[`& .${p.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${p.endAdornment}`]:{right:9}},[`& .${Nt.root}.${ce.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${p.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${ve.root}`]:{paddingTop:19,paddingLeft:8,[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:39},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:65},[`& .${ve.input}`]:{padding:"7px 4px"},[`& .${p.endAdornment}`]:{right:9}},[`& .${ve.root}.${ce.sizeSmall}`]:{paddingBottom:1,[`& .${ve.input}`]:{padding:"2.5px 4px"}},[`& .${ce.hiddenLabel}`]:{paddingTop:8},[`& .${ve.root}.${ce.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${p.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ve.root}.${ce.hiddenLabel}.${ce.sizeSmall}`]:{[`& .${p.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${p.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${p.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${p.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${p.inputRoot}`]:{flexWrap:"wrap"}}}]}),Cs=B("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(s,o)=>o.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),ks=B(Tt,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(s,o)=>o.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Ss=B(Tt,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:s},o)=>O({},o.popupIndicator,s.popupOpen&&o.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),$s=B(Dt,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(s,o)=>{const{ownerState:l}=s;return[{[`& .${p.option}`]:o.option},o.popper,l.disablePortal&&o.popperDisablePortal]}})(({theme:s})=>({zIndex:(s.vars||s).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),Ls=B(Lt,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(s,o)=>o.paper})(({theme:s})=>O({},s.typography.body1,{overflow:"auto"})),Ts=B("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(s,o)=>o.loading})(({theme:s})=>({color:(s.vars||s).palette.text.secondary,padding:"14px 16px"})),As=B("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(s,o)=>o.noOptions})(({theme:s})=>({color:(s.vars||s).palette.text.secondary,padding:"14px 16px"})),Rs=B("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(s,o)=>o.listbox})(({theme:s})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${p.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[s.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${p.focused}`]:{backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(s.vars||s).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${p.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:ct.alpha(s.palette.primary.main,s.palette.action.selectedOpacity),[`&.${p.focused}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:ct.alpha(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(s.vars||s).palette.action.selected}},[`&.${p.focusVisible}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.focusOpacity}))`:ct.alpha(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}}}})),_s=B(Mt,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(s,o)=>o.groupLabel})(({theme:s})=>({backgroundColor:(s.vars||s).palette.background.paper,top:-8})),Ds=B("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(s,o)=>o.groupUl})({padding:0,[`& .${p.option}`]:{paddingLeft:24}}),Ms=N.forwardRef(function(o,l){var h,y,j,u;const b=St({props:o,name:"MuiAutocomplete"}),{autoComplete:$=!1,autoHighlight:L=!1,autoSelect:P=!1,blurOnSelect:T=!1,ChipProps:R,className:a,clearIcon:m=Pt||(Pt=e.jsx(zt,{fontSize:"small"})),clearOnBlur:Z=!b.freeSolo,clearOnEscape:oe=!1,clearText:ee="Clear",closeText:G="Close",componentsProps:E={},defaultValue:de=b.multiple?[]:null,disableClearable:Re=!1,disableCloseOnSelect:Oe=!1,disabled:te=!1,disabledItemsFocusable:mt=!1,disableListWrap:Ze=!1,disablePortal:_e=!1,filterSelectedOptions:ue=!1,forcePopupIcon:g="auto",freeSolo:Pe=!1,fullWidth:De=!1,getLimitTagsText:Me=t=>`+${t}`,getOptionLabel:q,groupBy:Fe,handleHomeEndKeys:gt=!b.freeSolo,includeInputInList:xt=!1,limitTags:we=-1,ListboxComponent:ae="ul",ListboxProps:Ce,loading:Ee=!1,loadingText:M="Loading…",multiple:A=!1,noOptionsText:ke="No options",openOnFocus:ze=!1,openText:w="Open",PaperComponent:F=Lt,PopperComponent:fe=Dt,popupIcon:et=wt||(wt=e.jsx(Ht,{})),readOnly:_=!1,renderGroup:Se,renderInput:He,renderOption:k,renderTags:c,selectOnFocus:bt=!b.freeSolo,size:f="medium",slotProps:X={}}=b,he=Ae(b,vs),{getRootProps:Be,getInputProps:re,getInputLabelProps:se,getPopupIndicatorProps:Ge,getClearProps:tt,getTagProps:Ve,getListboxProps:We,getOptionProps:D,value:x,dirty:V,expanded:$e,id:me,popupOpen:ge,focused:K,focusedTag:W,anchorEl:xe,setAnchorEl:Le,inputValue:st,groupedOptions:z}=ms(O({},b,{componentName:"Autocomplete"})),J=!Re&&!te&&V&&!_,Q=(!Pe||g===!0)&&g!==!1,{onMouseDown:be}=re(),{ref:le}=Ce??{},Ue=We(),{ref:Ke}=Ue,Qe=Ae(Ue,Ns),nt=Bt(Ke,le),ye=q||(t=>{var r;return(r=t.label)!=null?r:t}),S=O({},b,{disablePortal:_e,expanded:$e,focused:K,fullWidth:De,getOptionLabel:ye,hasClearIcon:J,hasPopupIcon:Q,inputFocused:W===-1,popupOpen:ge,size:f}),C=Ps(S);let U;if(A&&x.length>0){const t=r=>O({className:C.tag,disabled:te},Ve(r));c?U=c(x,t,S):U=x.map((r,i)=>{const d=t({index:i}),{key:v}=d,I=Ae(d,Is);return e.jsx(ls,O({label:ye(r),size:f},I,R),v)})}if(we>-1&&Array.isArray(U)){const t=U.length-we;!K&&t>0&&(U=U.splice(0,we),U.push(e.jsx("span",{className:C.tag,children:Me(t)},U.length)))}const ot=Se||(t=>e.jsxs("li",{children:[e.jsx(_s,{className:C.groupLabel,ownerState:S,component:"div",children:t.group}),e.jsx(Ds,{className:C.groupUl,ownerState:S,children:t.children})]},t.key)),rt=k||((t,r)=>{const{key:i}=t,d=Ae(t,Os);return e.jsx("li",O({},d,{children:ye(r)}),i)}),Ye=(t,r)=>{const i=D({option:t,index:r});return rt(O({},i,{className:C.option}),t,{selected:i["aria-selected"],index:r,inputValue:st},S)},Te=(h=X.clearIndicator)!=null?h:E.clearIndicator,ie=(y=X.paper)!=null?y:E.paper,je=(j=X.popper)!=null?j:E.popper,n=(u=X.popupIndicator)!=null?u:E.popupIndicator;return e.jsxs(N.Fragment,{children:[e.jsx(ws,O({ref:l,className:Ie(C.root,a),ownerState:S},Be(he),{children:He({id:me,disabled:te,fullWidth:!0,size:f==="small"?"small":void 0,InputLabelProps:se(),InputProps:O({ref:Le,className:C.inputRoot,startAdornment:U,onClick:t=>{t.target===t.currentTarget&&be(t)}},(J||Q)&&{endAdornment:e.jsxs(Cs,{className:C.endAdornment,ownerState:S,children:[J?e.jsx(ks,O({},tt(),{"aria-label":ee,title:ee,ownerState:S},Te,{className:Ie(C.clearIndicator,Te==null?void 0:Te.className),children:m})):null,Q?e.jsx(Ss,O({},Ge(),{disabled:te,"aria-label":ge?G:w,title:ge?G:w,ownerState:S},n,{className:Ie(C.popupIndicator,n==null?void 0:n.className),children:et})):null]})}),inputProps:O({className:C.input,disabled:te,readOnly:_},re())})})),xe?e.jsx($s,O({as:fe,disablePortal:_e,style:{width:xe?xe.clientWidth:null},ownerState:S,role:"presentation",anchorEl:xe,open:ge},je,{className:Ie(C.popper,je==null?void 0:je.className),children:e.jsxs(Ls,O({ownerState:S,as:F},ie,{className:Ie(C.paper,ie==null?void 0:ie.className),children:[Ee&&z.length===0?e.jsx(Ts,{className:C.loading,ownerState:S,children:M}):null,z.length===0&&!Pe&&!Ee?e.jsx(As,{className:C.noOptions,ownerState:S,role:"presentation",onMouseDown:t=>{t.preventDefault()},children:ke}):null,z.length>0?e.jsx(Rs,O({as:ae,className:C.listbox,ownerState:S},Qe,Ce,{ref:nt,children:z.map((t,r)=>Fe?ot({key:t.key,group:t.group,children:t.options.map((i,d)=>Ye(i,t.index+d))}):Ye(t,r))})):null]}))})):null]})}),qs=()=>{var R;const s=At(),o=Rt(),l=pe.parse(s.search),h=_t(l["filter[keyword]"]||"",800),y={...l,page:l.page||1,limit:15,"filter[keyword]":h,include:"items|organization|branch|user|paymentMethod",sort:l.sort||"-created_at"},{hasEnabled:j}=os(),{data:u,isLoading:b}=ft({queryKey:["adminApi.adminOrders",y],queryFn:()=>ns.adminOrders(y).then(a=>a.data),enabled:j("v1.admin.orders.index"),staleTime:0}),$=(u==null?void 0:u.context.data)||[],L=a=>{const m={...l,page:a};o({pathname:s.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},[P,T]=N.useState();return e.jsxs(Gt,{permissions:["v1.admin.orders.index"],showEmpty:!0,children:[e.jsx(Vt,{title:"Danh sách đơn hàng",element:e.jsx("div",{className:"order-title flex-row align-items-center justify-content-end",children:e.jsx("span",{style:{whiteSpace:"nowrap"},className:"text-gray-400 fw-bold fs-7 gs-0",children:"Bộ lọc:"})})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-8",children:[e.jsx(Fs,{query:l}),e.jsx("div",{className:"filter-list"})]}),e.jsxs("div",{className:"card-header border-0 pt-5",children:[e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:`Tổng đơn hàng (${((R=u==null?void 0:u.context)==null?void 0:R.total)||0})`})}),e.jsx("div",{})]}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:b?e.jsx("div",{className:"d-flex justify-content-center py-3",children:e.jsx(Wt,{size:"30px",style:{color:"var(--beautyx)"}})}):e.jsxs("table",{className:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-80px",children:"Order Id"}),e.jsx("th",{className:"min-w-140px",children:"Tên KH"}),e.jsx("th",{className:"min-w-120px",children:"Cửa hàng"}),e.jsx("th",{className:"min-w-120px",children:"Nền tảng"}),e.jsx("th",{className:"min-w-120px",children:"Tổng đơn"}),e.jsx("th",{className:"min-w-100px",children:"Ngày mua"}),e.jsx("th",{className:"min-w-120px",children:"Trạng thái"}),e.jsx("th",{className:"min-w-40px text-end",children:"Actions"})]})}),e.jsx("tbody",{children:$==null?void 0:$.map(a=>{var m,Z,oe,ee,G,E,de;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(Ut,{to:"#",className:"text-dark fw-bold  fs-6",children:a==null?void 0:a.id})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"symbol symbol-45px me-5",children:e.jsx(rs,{src:((m=a.user)==null?void 0:m.avatar)||((Z=a.user)==null?void 0:Z.fullname),alt:(oe=a.user)==null?void 0:oe.fullname})}),e.jsxs("div",{className:"d-flex justify-content-start flex-column",children:[e.jsx("span",{className:"text-dark fw-bold fs-6",children:(ee=a.user)==null?void 0:ee.fullname}),e.jsx("span",{className:"fw-semobold text-muted d-block fs-6",children:(G=a.user)==null?void 0:G.telephone}),e.jsx("span",{className:"fw-semobold text-muted d-block fs-7",children:(E=a.user)==null?void 0:E.email})]})]})}),e.jsx("td",{children:(de=a.organization)==null?void 0:de.name}),e.jsx("td",{children:e.jsx(as,{platForm:a.platform})}),e.jsxs("td",{className:"text-dark fw-bold  fs-6",children:[ne((a==null?void 0:a.amount)-a.discount_value),"đ"]}),e.jsx("td",{className:"text-dark fw-bold  fs-6",children:Kt(a==null?void 0:a.created_at,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD")}),e.jsx("td",{children:e.jsx(ht,{status:a==null?void 0:a.status})}),e.jsx("td",{className:"text-end",children:e.jsx("div",{onClick:()=>T(a),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm",children:e.jsx("i",{className:"bi bi-eye fs-4"})})})]},a.id)})})]})})})]}),e.jsx("div",{className:"mt-5",children:e.jsx(Qt,{totalPage:(u==null?void 0:u.context.last_page)||1,onChangePage:L,defaultPage:(l==null?void 0:l.page)??1})}),e.jsx(Es,{detail:P,onClose:()=>T(void 0)})]})},Fs=({query:s})=>{const o=Rt(),l=At(),h=a=>{const m={...s,sort:a,page:1};o({pathname:l.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},y=a=>{const m={...s,"filter[status]":a,page:1};o({pathname:l.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},j=a=>{const m={...s,"filter[platform]":a,page:1};o({pathname:l.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},u=a=>{const m={"filter[keyword]":a,page:1};o({pathname:l.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},[b,$]=N.useState(""),L=_t(b,800),{data:P}=ft({queryKey:["ORG",L],queryFn:()=>It.getAll({limit:8,keyword:L}).then(a=>a.data.context)}),T=a=>{const m={...s,"filter[organization_id]":a==null?void 0:a.id,page:1};o({pathname:l.pathname,search:pe.stringify(H.pickBy(m,H.identity))})},{data:R}=ft({queryKey:["ORG_ID",s["filter[organization_id]"]],queryFn:()=>It.getOrgById(Number(s["filter[organization_id]"])).then(a=>a.data),enabled:!!s["filter[organization_id]"]});return e.jsxs("div",{children:[e.jsx("div",{className:"filter-list pb-6",children:e.jsx("div",{className:"filter-item",children:e.jsx("input",{value:s["filter[keyword]"]||"",onChange:a=>u(a.target.value),type:"text",className:"form-control form-control-solid",placeholder:"Tìm kiếm Tên, email, phone..."})})}),e.jsxs("div",{className:"filter-list",children:[e.jsx("div",{className:"filter-item",children:e.jsx(Ms,{size:"small",id:"country-select-demo",options:(P==null?void 0:P.data)||[],autoHighlight:!0,getOptionLabel:a=>a.name,onChange:(a,m)=>T(m),value:(R==null?void 0:R.context)||null,isOptionEqualToValue:(a,m)=>a.id===m.id,renderOption:(a,m)=>{const{key:Z,...oe}=a;return e.jsx(Yt,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...oe,children:m.name},Z)},renderInput:a=>e.jsx(is,{...a,label:"Cửa hàng",onChange:m=>$(m.target.value)})})}),e.jsx("div",{className:"filter-item",children:e.jsxs(pt,{style:{width:"100%"},size:"small",children:[e.jsx(dt,{id:"demo-select-small-label",children:"Xắp xếp theo"}),e.jsxs(ut,{labelId:"demo-select-small-label",id:"demo-select-small",label:"Mới nhất",value:s.sort||"-created_at",onChange:a=>h(a.target.value),children:[e.jsx(Ne,{value:"-created_at",children:"Mới nhất"}),e.jsx(Ne,{value:"id",children:"Theo ID"})]})]})}),e.jsx("div",{className:"filter-item",children:e.jsxs(pt,{style:{width:"100%"},size:"small",children:[e.jsx(dt,{id:"status-select-label",children:"Status"}),e.jsxs(ut,{labelId:"status-select-label",id:"status-select",label:"Tất cả",value:s["filter[status]"]||"",onChange:a=>y(a.target.value),children:[e.jsx(Ne,{value:"",children:"Tất cả"}),Object.values(qt).map(a=>e.jsx(Ne,{value:a,children:e.jsx(ht,{status:a})},a))]})]})}),e.jsx("div",{className:"filter-item",children:e.jsxs(pt,{style:{width:"100%"},size:"small",children:[e.jsx(dt,{id:"platform-select-label",children:"Platform"}),e.jsxs(ut,{labelId:"platform-select-label",id:"platform-select",label:"Tất cả",value:s["filter[platform]"]||"",onChange:a=>j(a.target.value),children:[e.jsx(Ne,{value:"",children:"Tất cả"}),Object.values(Xt).map(a=>e.jsx(Ne,{value:a,children:a},a))]})]})})]})]})},Es=({detail:s,onClose:o=()=>{}})=>{var h,y;const l=(s==null?void 0:s.items)||[];return e.jsx(Jt,{open:!!s,onClose:o,children:e.jsxs("div",{className:"order_detail_cnt",children:[e.jsxs("div",{className:"section_cnt",children:[e.jsx("p",{className:"section_title",children:"Trạng thái đơn hàng"}),e.jsx(ht,{status:(s==null?void 0:s.status)||""})]}),e.jsxs("div",{className:"section_cnt",children:[e.jsx("span",{className:"section_title",children:"Thông tin khách hàng"}),e.jsxs("div",{className:"d-flex",children:[e.jsxs("div",{className:"wrap-item w-50 p-3",children:[e.jsx("label",{className:"form-label",children:"Tên khách hàng"}),e.jsx("input",{value:((h=s==null?void 0:s.user)==null?void 0:h.fullname)||"",className:"form-control form-control-solid",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"wrap-item w-50 p-3",children:[e.jsx("label",{className:"form-label",children:"Số điện thoại"}),e.jsx("input",{value:s==null?void 0:s.user.telephone,className:"form-control form-control-solid",disabled:!0,readOnly:!0})]})]}),e.jsx("div",{className:"d-flex",children:e.jsxs("div",{className:"wrap-item w-50 p-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{value:((y=s==null?void 0:s.user)==null?void 0:y.email)||"",className:"form-control form-control-solid",disabled:!0,readOnly:!0})]})})]}),e.jsxs("div",{className:"section_cnt",children:[e.jsx("p",{className:"section_title",children:"Phương thức thanh toán"}),e.jsx(Zt,{payment_method_id:Number(s==null?void 0:s.payment_method_id)})]}),e.jsxs("div",{className:"section_cnt",children:[e.jsx("span",{className:"section_title",children:"Danh sách item"}),e.jsxs("table",{className:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-120px",children:"Mã"}),e.jsx("th",{className:"min-w-200px",children:"Dịch vụ"}),e.jsx("th",{className:"min-w-140px",children:"Giá gốc"}),e.jsx("th",{className:"min-w-120px",children:"Giá giảm"}),e.jsx("th",{className:"min-w-140px",children:"Giá mua"}),e.jsx("th",{className:"min-w-120px",children:"Số lượng"}),e.jsx("th",{className:"min-w-120px",children:"Tổng"})]})}),e.jsx("tbody",{children:l.map(j=>e.jsx(zs,{item:j,organization_id:Number(s==null?void 0:s.organization_id)},j.id))})]})]}),e.jsxs("div",{className:"section_cnt",children:[e.jsx("p",{className:"section_title",children:"Chi tiết thanh toán"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("div",{className:"w-50",children:[e.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[e.jsx("span",{className:"fs-5",children:"Tạm tính"}),e.jsxs("span",{className:"fw-bold fs-4",children:[ne(s==null?void 0:s.amount),"đ"]})]}),s&&(s==null?void 0:s.discount_value)>0?e.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[e.jsx("span",{className:"fs-5",children:"Giảm giá"}),e.jsxs("span",{className:"fw-bold fs-4",children:[ne(s==null?void 0:s.discount_value),"đ"]})]}):null,e.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[e.jsx("span",{className:"fs-5",children:"Thanh toán"}),e.jsxs("span",{className:"fw-bold fs-4",children:[ne(Number(s==null?void 0:s.amount)-Number(s==null?void 0:s.discount_value)),"đ"]})]})]})})]})]})})},zs=({organization_id:s,item:o})=>{const{detail:l}=es({org_id:s,id:Number(o.productable_id)});return l?e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("span",{className:"text-dark fw-bold d-block mb-1 fs-7",children:["# ",o.id]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"symbol symbol-50px",children:e.jsx("img",{onError:h=>ts(h),className:"symbol-label",src:l==null?void 0:l.image_url,alt:""})}),e.jsx("span",{className:"ms-5 text-dark fs-5 fw-bold text-hover-success",children:l==null?void 0:l.service_name})]})}),e.jsx("td",{children:e.jsxs("span",{className:"text-dark fs-5 fw-bold",children:[ne(l==null?void 0:l.price),"đ"]})}),e.jsx("td",{children:e.jsxs("span",{className:"text-dark fs-5 fw-bold",children:[ne(ss(Number(l==null?void 0:l.special_price),Number(l==null?void 0:l.special_price_momo))),"đ"]})}),e.jsx("td",{children:e.jsxs("span",{className:"text-dark fs-5 fw-bold",children:[ne(o.base_price),"đ"]})}),e.jsx("td",{children:e.jsx("span",{className:"text-dark fs-5 fw-bold",children:o.quantity})}),e.jsx("td",{children:e.jsxs("span",{className:"text-dark fs-5 fw-bold",children:[ne(o.base_price*o.quantity),"đ"]})})]}):e.jsx(e.Fragment,{})};export{qs as default};
