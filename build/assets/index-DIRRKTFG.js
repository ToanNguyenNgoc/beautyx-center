import{S as f,a as i,W as j,ah as b,j as s,bI as v,ao as C,bz as S,bH as d}from"./index-BHl1vF-Z.js";import{C as w}from"./Chip-DrXhVjId.js";import{A as N}from"./Avatar-Ckuqs-6L.js";const O=({origin:a,setOrigin:r,organization_id:c,required:h})=>{var n;f({queryKey:["ORG_SELECTION",c],queryFn:()=>d.getOrgById(c).then(e=>e.data),enabled:!!c,onSuccess:e=>r(e.context)});const o=i.useRef(null),l=e=>{o.current&&(e==="hide"&&o.current.classList.remove("org-search-show"),e==="show"&&o.current.classList.add("org-search-show"))};window.addEventListener("click",()=>l("hide"));const{data:t,mutate:m,isLoading:u}=j({mutationFn:e=>d.getAll({keyword:e,is_ecommerce:!0}).then(g=>g.data.context)}),x=i.useCallback(b.debounce(e=>m(e),600),[]),p=e=>x(e.target.value);return s.jsxs("div",{className:"col col-org",children:[s.jsx("label",{className:`${h&&"required"} filter-row_label mb-2`,children:"Gắn doanh nghiệp"}),s.jsx("div",{onClick:e=>{e.stopPropagation(),l("show")},className:"form-control form-control-solid",children:a?s.jsx(w,{avatar:s.jsx(N,{src:a.image_url,alt:a.subdomain}),color:"success",label:a.name,onDelete:()=>r(void 0)}):"Gắn doanh nghiệp"}),s.jsx(v,{ref:o,sx:{boxShadow:3},className:"org-search",children:s.jsxs("div",{onClick:e=>e.stopPropagation(),children:[s.jsx("input",{onChange:p,type:"text",className:"form-control form-control-solid",placeholder:"Tìm kiếm..."}),u&&s.jsx(C,{size:16}),s.jsx("div",{className:"org-list",children:s.jsx("ul",{className:"list",children:(n=t==null?void 0:t.data)==null?void 0:n.map(e=>s.jsx(S,{onClick:()=>r(e),children:e.name},e.id))})})]})})]})};export{O as S};
