import{ad as w,a as H,Y as D,_ as k,j as e,a1 as V,a8 as B,a4 as G,a5 as L,a2 as E,ae as X,N as $,a0 as F,af as U}from"./index-CwORS_Xz.js";import{u as Z,a as q}from"./approveApi-DVseihFm.js";import{X as l}from"./index-DY07LZ6s.js";import"./LoadingButton-Yjdjcb8X.js";const J="_title_page_z7ln7_2",K="_container_z7ln7_11",Q="_head_z7ln7_18",W="_head_left_z7ln7_26",ee="_head_item_z7ln7_31",te="_head_item_title_z7ln7_36",ae="_contract_table_z7ln7_43",se="_contract_table_item_z7ln7_47",ce="_contract_table_item_left_z7ln7_53",ie="_contract_table_item_right_z7ln7_61",t={title_page:J,container:K,head:Q,head_left:W,head_item:ee,head_item_title:te,contract_table:ae,contract_table_item:se,contract_table_item_left:ce,contract_table_item_right:ie},ne={include:"approve|organization"};function he(){var m,o,h,x,j,b,p,v,N,g,f,u,T,y,z;const c=w(),[R,r]=H.useState(!1),{response:i,error:Y,mutate:O}=D(c.id,k.CONTRACTS_BY_ID(c.id),ne),a=i,s=D(a==null?void 0:a.organization_id,k.ORGANIZATIONS_ID(a==null?void 0:a.organization_id)).response;let _=[];(m=a==null?void 0:a.extra)!=null&&m.ecommerce_branch&&(s!=null&&s.branches)&&(_=(h=(o=a==null?void 0:a.extra)==null?void 0:o.ecommerce_branch)==null?void 0:h.map(C=>{var A;return(A=s==null?void 0:s.branches)==null?void 0:A.find(M=>M.id===parseInt(C))}).filter(Boolean)),console.log(_);const{noti:n,firstLoad:P,resultLoad:d,onCloseNoti:S}=Z(),I=async()=>{P();try{await q.putApprove(a.approve.id,{log:"",status:"APPROVED"}),d("Đã lưu thay đổi")}catch{d("Có lỗi xảy ra")}O({...i,approve:{...i.approve,status:"APPROVED"}},!0)};return console.log(a),e.jsxs(e.Fragment,{children:[e.jsx(V,{title:n.message,open:n.openAlert,onClose:S}),e.jsx(B,{title:`Chi tiết hợp đồng ${(a==null?void 0:a.company_name)??"..."}`,element:e.jsxs("div",{className:t.title_page,children:[e.jsx(l,{title:"Xem hợp đồng",onClick:()=>r(!0)}),e.jsx(l,{title:"Thay đổi thông tin"}),e.jsx(l,{loading:n.load,color:"success",title:"Duyệt",onClick:I})]})}),a&&e.jsxs("div",{className:t.container,children:[e.jsxs("div",{className:t.head,children:[e.jsxs("div",{className:t.head_left,children:[e.jsxs("div",{className:t.head_item,children:[e.jsx("span",{className:t.head_item_title,children:"Hợp đồng của"}),e.jsx(G,{type:(x=a.approve)==null?void 0:x.type})]}),e.jsxs("div",{className:t.head_item,children:[e.jsx("span",{className:t.head_item_title,children:"Trạng thái"}),e.jsx(L,{status:(j=a.approve)==null?void 0:j.status})]})]}),e.jsxs("div",{className:t.head_item,children:[e.jsx("span",{className:t.head_item_title,children:"Ngày tạo:"}),E(a.created_at).format("HH:mm DD/MM/YYYY")]})]}),e.jsxs("div",{className:t.contract_table,children:[e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Mã hợp đồng"}),e.jsx("div",{className:t.contract_table_item_right,children:((b=a.extra)==null?void 0:b.corporate_tax_code)??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Gói đăng ký"}),e.jsx("div",{className:t.contract_table_item_right,children:a.package_name})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Tên doanh nghiệp"}),e.jsx("div",{className:t.contract_table_item_right,children:(p=a.organization)==null?void 0:p.name})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Link gian hàng"}),e.jsx("div",{className:t.contract_table_item_right,children:e.jsx("span",{onClick:()=>X(s==null?void 0:s.subdomain),style:{cursor:"pointer"},children:`https://beautyx.vn/cua-hang/${s==null?void 0:s.subdomain}`})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Chi nhánh đăng ký"}),e.jsxs("div",{className:t.contract_table_item_right,children:[(N=(v=a.extra)==null?void 0:v.ecommerce_branch)==null?void 0:N.length,((f=(g=a.extra)==null?void 0:g.ecommerce_branch)==null?void 0:f.length)>0&&e.jsx("span",{children:e.jsx("i",{className:"bi bi-eye fs-4"})})]})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Số điện thoại"}),e.jsx("div",{className:t.contract_table_item_right,children:a.telephone??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Địa chỉ doanh nghiệp"}),e.jsx("div",{className:t.contract_table_item_right,children:(u=a.organization)==null?void 0:u.full_address})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Người đại diện"}),e.jsx("div",{className:t.contract_table_item_right,children:((T=a.extra)==null?void 0:T.accountant_name)??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Email liên hệ"}),e.jsx("div",{className:t.contract_table_item_right,children:(y=a.email)==null?void 0:y.join(", ")})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Địa chỉ công ty"}),e.jsx("div",{className:t.contract_table_item_right,children:a.address??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Mã số thuế"}),e.jsx("div",{className:t.contract_table_item_right,children:((z=a.extra)==null?void 0:z.corporate_tax_code)??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Tên ngân hàng"}),e.jsx("div",{className:t.contract_table_item_right,children:a.bank_name??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Tên chủ thẻ"}),e.jsx("div",{className:t.contract_table_item_right,children:a.bank_owner_name??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Số tài khoản"}),e.jsx("div",{className:t.contract_table_item_right,children:a.bank_number??e.jsx("h6",{children:"Trống"})})]}),e.jsxs("div",{className:t.contract_table_item,children:[e.jsx("div",{className:t.contract_table_item_left,children:"Ngày tạo"}),e.jsx("div",{className:t.contract_table_item_right,children:E(a.created_at).format("HH:mm - DD/MM/YYYY")})]})]})]}),a&&e.jsx(le,{open:R,setOpen:r,contract:a}),Y&&e.jsx($,{to:"/error/404"})]})}const le=c=>e.jsx(F,{open:c.open,onClose:()=>c.setOpen(!1),children:e.jsx("div",{style:{height:"98vh",aspectRatio:"1682 / 2378"},children:e.jsx(U,{pdf_url:c.contract.pdf})})});export{he as default};
