import{ad as p,W as f,B as v,v as g,bJ as x,w as b,j as e,b1 as j,a8 as N,bG as o}from"./index-BHl1vF-Z.js";import{a as y}from"./adminApi-CWj4GUWV.js";import{E as _,L as w}from"./react-drag-drop-files.esm-BUyAiMln.js";import{u as P}from"./usePostMedia-CUHIh1c9.js";import{L}from"./LoadingButton-BU6aPnkN.js";import"./mediaApi-BVlMDnWK.js";const q=()=>{const i=p(),a=(i==null?void 0:i.os_platform)||"ios",l=i==null?void 0:i.bundle,{isLoading:t,handlePostMedia:d}=P(),{mutate:c,isLoading:m}=f({mutationFn:r=>y.postBrandAppVersion(String(l),r),onSuccess:()=>o.open({title:"Tạo mới thành công",type:"success"}),onError:()=>o.open({title:"Có lỗi xảy ra",type:"error"})}),s=v({initialValues:{version:"",os_platform:a,media_id:void 0,status:!0},validationSchema:g({version:b().required("Nhập phiên bản"),media_id:x().required("upload file build")}),onSubmit(r){l&&c(r)}}),u=r=>{d({e:{target:{files:[r]}},callBack(h){var n;o.open({title:"Upload file thành công",type:"success"}),s.setFieldValue("media_id",(n=h[0])==null?void 0:n.model_id)},version:"myspa",resetOriginalResult:!0})};return e.jsxs(j,{permissions:["v1.brand_app_versions.store"],showEmpty:!0,children:[e.jsx(N,{title:`Tạo mới build ${a}`}),e.jsx("div",{className:"card p-4",children:e.jsxs("form",{onSubmit:s.handleSubmit,noValidate:!0,className:"form",children:[e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Phiên bản hiện tại trên Store"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx("input",{type:"text",className:"form-control form-control-lg form-control-solid mb-3 mb-lg-0",placeholder:"Phiên bản",...s.getFieldProps("version")}),s.touched.version&&s.errors.version&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.version})})]})})})]}),e.jsxs("div",{className:"row mb-6",children:[e.jsx("label",{className:"col-lg-4 col-form-label required fw-bold fs-6",children:"Build file"}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 fv-row",children:[e.jsx(_,{handleChange:u,name:"file",types:["zip"]}),t&&e.jsx("div",{style:{marginTop:8},children:e.jsx(w,{})}),s.touched.media_id&&s.errors.media_id&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:s.errors.media_id})})]})})})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(L,{loading:m,size:"large",color:"success",type:"submit",variant:"contained",children:"Tạo mới"})})]})})]})};export{q as default};
