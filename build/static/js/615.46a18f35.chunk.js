"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[615],{59615:function(e,l,a){a.r(l);var i=a(1413),n=a(70885),s=a(11838),r=a(16871),t=(a(79373),a(86009),a(91933)),o=a(52902),d=a(77356),c=a(92506),u=a(35058),m=a(35036),h=a(58702),v=a(57482),x=a(66362),p=a(17964),f=a(39891),g=a(27391),j=a(13239),N=a(65298),b=a(18838),y=a(72426),_=a.n(y),Z=a(72791),C=a(66770),L=a.n(C),F=a(39709),R=a(76863),U=a(66305),w=a(80184);l.default=function(){var e,l=null!==(e=(0,r.TH)().state)&&void 0!==e?e:0,a=(0,r.UO)(),j=(0,N.UD)(),y=j.resultLoad,C=j.noti,L=j.onCloseNoti,T=(0,Z.useState)(),V=(0,n.Z)(T,2),B=V[0],S=V[1],M=(0,N.zX)(),O=M.isLoading,q=M.handlePostMedia,z=(0,t.useMutation)({mutationFn:function(e){return a.id?d.$w.putBanner(a.id,e):d.$w.postBanner(e)},onSuccess:function(){y({message:"".concat(a.id?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi"," banner th\xe0nh c\xf4ng"),color:"success"})},onError:function(e){var l;y({color:"error",message:"C\xf3 l\u1ed7i x\u1ea3y ra. M\xe3 l\u1ed7i ".concat(null===e||void 0===e||null===(l=e.request)||void 0===l?void 0:l.status)})}}),H=z.mutate,I=z.isLoading,D=(0,c.TA)({initialValues:{imageURL:"",name:"",platform:"",expires_at:"",type:"",htmlTemplate:"",url:""},validationSchema:R.Ry({imageURL:R.Z_().required("Upload h\xecnh c\u1ee7a banner"),name:R.Z_().required("Nh\u1eadp t\xean c\u1ee7a Banner"),type:R.Z_().required("Ch\u1ecdn lo\u1ea1i Banner")}),onSubmit:function(e){H((0,i.Z)((0,i.Z)({},e),{},{origin_id:null===B||void 0===B?void 0:B.id,priority:a.id?void 0:l+1}))}}),E=(0,t.useQuery)({queryKey:[o.xG.BANNER,a.id],queryFn:function(){return d.$w.getDetailById(a.id)},enabled:!!a.id,onSuccess:function(e){var l,a,i,n,s=e.context;D.setFieldValue("name",s.name),D.setFieldValue("imageURL",s.imageURL),D.setFieldValue("platform",null!==(l=s.platform)&&void 0!==l?l:""),D.setFieldValue("expires_at",s.expires_at),D.setFieldValue("type",null!==(a=s.type)&&void 0!==a?a:""),D.setFieldValue("url",null!==(i=s.url)&&void 0!==i?i:""),D.setFieldValue("htmlTemplate",null!==(n=s.htmlTemplate)&&void 0!==n?n:"")}}),P=E.data,A=E.refetch,Y=E.isFetching;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(U.Ct,{severity:C.color,message:C.message,open:C.openAlert,close:L}),(0,w.jsx)(s.Z,{title:a.id?"C\u1eadp nh\u1eadt banner":"T\u1ea1o m\u1edbi banner"}),(0,w.jsx)("div",{className:"post d-flex flex-column-fluid",id:"kt_post",children:(0,w.jsx)("div",{className:"container cus-container",children:(0,w.jsxs)("form",{className:"banner-form",autoComplete:"off",onSubmit:D.handleSubmit,children:[(0,w.jsx)("div",{className:"required form-label",children:"Banner"}),(0,w.jsx)("div",{className:"drag-banner",children:(0,w.jsx)(u.b,{className:"form-input-file",style:{width:"100%"},multiple:!1,handleChange:function(e){D.setFieldValue("imageURL",""),q({e:{target:{files:[e]}},callBack:function(e){var l,a;console.log(e),D.setFieldValue("imageURL",null!==(l=null===(a=e[0])||void 0===a?void 0:a.original_url)&&void 0!==l?l:"")},version:"myspa",resetOriginalResult:!0})},name:"file",types:m.rh,children:(0,w.jsxs)("div",{className:"banner-form__img",children:[(0,w.jsx)("img",{src:""===D.values.imageURL?h.J.imgPlaceHolder:D.values.imageURL,alt:"",className:"image-value"}),O&&(0,w.jsxs)("div",{className:"placeholder",children:[(0,w.jsx)("span",{children:"\u0110ang t\u1ea3i l\xean"}),(0,w.jsx)(v.Z,{})]}),""===D.values.imageURL&&(0,w.jsx)("div",{className:"placeholder",children:(0,w.jsx)("span",{children:"K\xe9o th\u1ea3 h\xecnh \u1ea3nh v\xe0o \u0111\xe2y ho\u1eb7c Click \u0111\u1ec3 ch\u1ecdn h\xecnh \u1ea3nh"})})]})})}),(0,w.jsx)("input",{value:D.values.imageURL,onChange:D.handleChange,type:"text",name:"imageURL",className:"form-control form-control-solid mt-4 mb-4",placeholder:"Ho\u1eb7c link h\xecnh \u1ea3nh...."}),D.errors.imageURL&&D.touched.imageURL&&(0,w.jsx)("span",{className:"text-danger",children:D.errors.imageURL}),(0,w.jsxs)("div",{className:"input-form",children:[(0,w.jsxs)("div",{className:"input-form__wrap",children:[(0,w.jsx)("label",{className:"required form-label",children:"T\xean Banners"}),(0,w.jsx)("input",{value:D.values.name,onChange:D.handleChange,type:"text",name:"name",className:"form-control form-control-solid",placeholder:"T\xean Banner"}),D.errors.name&&D.touched.name&&(0,w.jsx)("span",{className:"text-danger",children:D.errors.name})]}),(0,w.jsxs)("div",{className:"row mt-8",children:[(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"N\u1ec1n t\u1ea3ng"}),(0,w.jsx)(x.Z,{size:"small",children:(0,w.jsxs)(p.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:D.values.platform,onChange:function(e){return D.setFieldValue("platform",e.target.value)},children:[(0,w.jsx)(f.Z,{value:"",children:(0,w.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),m.eN.map((function(e){return(0,w.jsx)(f.Z,{value:e,children:e},e)}))]})})]}),(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"Ng\xe0y h\u1ebft h\u1ea1n"}),(0,w.jsx)(b.$,{disablePast:!0,inputFormat:"dd/MM/yyyy",value:D.values.expires_at&&new Date(D.values.expires_at),onChange:function(e){return D.setFieldValue("expires_at",_()(e).format("YYYY-MM-DD HH:mm:ss"))},renderInput:function(e){return(0,w.jsx)(g.Z,(0,i.Z)({},e))}}),D.errors.expires_at&&D.touched.expires_at&&(0,w.jsx)("span",{className:"text-danger",children:D.errors.expires_at})]}),(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"Lo\u1ea1i banner cho"}),(0,w.jsx)(x.Z,{size:"small",children:(0,w.jsx)(p.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:D.values.type,onChange:function(e){return D.setFieldValue("type",e.target.value)},children:m.EY.map((function(e){return(0,w.jsx)(f.Z,{value:e.type,children:e.title},e.type)}))})}),D.errors.type&&D.touched.type&&(0,w.jsx)("span",{className:"text-danger",children:D.errors.type})]})]}),(0,w.jsx)(k,{formik:D,origin:B,setOrigin:S,banner:null===P||void 0===P?void 0:P.context})]}),(0,w.jsxs)("div",{className:"d-flex justify-content-end mt-6",children:[a.id&&(0,w.jsx)(F.Z,{style:{marginRight:"8px"},loading:Y,onClick:function(){return A()},size:"large",color:"primary",type:"button",variant:"contained",children:"Kh\xf4i ph\u1ee5c"}),(0,w.jsx)(F.Z,{loading:I,size:"large",color:"success",type:"submit",variant:"contained",children:a.id?"L\u01b0u thay \u0111\u1ed5i":"T\u1ea1o m\u1edbi banner"})]})]})})})]})};var k=function(e){var l=e.formik,a=e.origin,i=e.setOrigin,n=e.banner,s=l.values.type,r=(0,N.zX)(),t=r.isLoading,o=r.handlePostMedia,d=(0,m.lu)(l.values.url),c=d.isYoutubeLink,u=d.embedLink;return(0,w.jsxs)("div",{className:"mt-8",children:[(s===m.Zi.SEARCH_RESULT||s===m.Zi.WEB||s===m.Zi.POPUP||s===m.Zi.DISCOUNT)&&(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"\u0110\u01b0\u1eddng d\u1eabn"}),(0,w.jsx)("input",{name:"url",onChange:l.handleChange,type:"text",className:"form-control form-control-solid",value:l.values.url,placeholder:"\u0110\u01b0\u1eddng d\u1eabn URL..."})]}),s===m.Zi.HTML&&(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"Nh\u1eadp content"}),(0,w.jsx)(L(),{value:l.values.htmlTemplate,onChange:function(e){return l.setFieldValue("htmlTemplate",e)}})]}),s===m.Zi.ORGANIZATION&&(0,w.jsx)(U.QN,{organization_id:null===n||void 0===n?void 0:n.origin_id,origin:a,setOrigin:i}),s===m.Zi.VIDEO&&(0,w.jsxs)("div",{className:"col col-video",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"Upload video"}),(0,w.jsxs)("div",{className:"drag-video",children:[(0,w.jsx)("input",{name:"url",onChange:l.handleChange,value:l.values.url,type:"text",placeholder:"Ho\u1eb7c link video",className:"form-control form-control-solid"}),(0,w.jsx)("input",{onChange:function(e){l.setFieldValue("url",""),o({e:e,callBack:function(e){var a;l.setFieldValue("url",null===(a=e[0])||void 0===a?void 0:a.original_url)},version:"api.beautyx"})},hidden:!0,id:"video",type:"file",accept:"video/mp4, video/mov, video/avi, video/wmv"}),(0,w.jsxs)("label",{htmlFor:"video",className:"btn btn-primary p-2",children:[(0,w.jsx)("i",{className:"bi bi-cloud-arrow-up-fill"}),"T\u1ea3i video l\xean"]}),(0,w.jsx)("div",{className:"video-placeholder d-flex justify-content-center mt-5",children:(0,w.jsxs)("div",{className:"video d-flex flex-column align-item-center",children:[t&&(0,w.jsxs)("div",{className:"video-load d-flex flex-column align-items-center",children:["\u0110ang t\u1ea3i video l\xean...",(0,w.jsx)(j.Z,{size:22})]}),""!==l.values.url&&(0,w.jsx)(w.Fragment,{children:c?(0,w.jsx)("iframe",{src:u,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Media",style:{width:"100%",height:"100%"}}):(0,w.jsx)("video",{controls:!0,children:(0,w.jsx)("source",{src:l.values.url})})})]})})]})]})]})}},11838:function(e,l,a){a.d(l,{Z:function(){return n}});a(72791);var i=a(80184);var n=function(e){var l=e.title,a=e.element;return(0,i.jsx)("div",{className:"toolbar",id:"kt_toolbar",children:(0,i.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,i.jsx)("h1",{className:"d-flex align-items-center text-dark fw-bolder my-1 fs-3",children:l}),a]})})}},79373:function(){}}]);
//# sourceMappingURL=615.46a18f35.chunk.js.map