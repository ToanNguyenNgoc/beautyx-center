{"version":3,"file":"static/js/324.a3f5bd2b.chunk.js","mappings":"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","sources":["app/pages/promotions/index.tsx"],"sourcesContent":["import { CircularProgress } from \"@mui/material\";\nimport { KTSVG } from \"_metronic/helpers\";\nimport { promotionApi } from \"app/api\";\nimport { Promotion } from \"app/interface\";\nimport { formatDate } from \"app/util\";\nimport { QR_KEY } from \"common\";\nimport { PageCircularProgress, XSwitch } from \"components\";\nimport TitlePage from \"components/TitlePage\";\nimport { FC } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Link } from \"react-router-dom\";\n\nfunction Promotions() {\n  const { data, isLoading } = useQuery({\n    queryKey: [QR_KEY.PROMOTION],\n    queryFn: () => promotionApi.getAll({\n      limit: 15,\n      page: 1\n    })\n  })\n  return (\n    <>\n      <TitlePage\n        element={\n          // METHOD?.includes(\"POST\") ?\n          <Link\n            to={{ pathname: \"/pages/promotions-form\" }}\n            className=\"btn btn-sm btn-primary\"\n          >\n            Tạo mới\n          </Link>\n          // :\n          // <></>\n        }\n        title=\"Danh sách Promotion\"\n      />\n      <div className={`card mb-5 mb-xl-8`}>\n        <div className='card-header border-0 pt-5'>\n          <h3 className='card-title align-items-start flex-column'>\n            <span className='card-label fw-bold fs-3 mb-1'>Promotion</span>\n            <span className='text-muted mt-1 fw-semobold fs-7'>Số lượng : {data?.total ?? 1}</span>\n          </h3>\n        </div>\n        <div className='card-body py-3'>\n          <div className='table-responsive'>\n            <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\n              <thead>\n                <tr className='fw-bold text-muted'>\n                  <th className='min-w-100px'>Image</th>\n                  <th className='min-w-150px'>Tên promotion</th>\n                  <th className='min-w-50px'>Popup</th>\n                  <th className='min-w-100px'>Từ ngày</th>\n                  <th className='min-w-100px'>Đến ngày</th>\n                  <th className='min-w-80px'></th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  data?.data?.map((item: Promotion, index: number) => <PromotionItem key={index} item={item} />)\n                }\n              </tbody>\n            </table>\n            <PageCircularProgress loading={isLoading} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst PromotionItem: FC<{ item: Promotion }> = ({ item }) => {\n  const qrClient = useQueryClient()\n  const { mutate, isLoading } = useMutation({\n    mutationFn: (id: number | string) => promotionApi.delete(id),\n    onSuccess: () => qrClient.invalidateQueries({ queryKey: QR_KEY.PROMOTION })\n  })\n  return (\n    <tr>\n      <td>\n        <div className='d-flex align-items-center'>\n          <div className='symbol symbol-100px me-5'>\n            <img style={{ objectFit: 'contain' }} src={item.media_url || ''} alt='' />\n          </div>\n        </div>\n      </td>\n      <td>\n        <div className='d-flex align-items-center'>\n          <div className='d-flex justify-content-start flex-column'>\n            <span className='text-dark fw-bold text-hover-primary fs-6'>\n              {item.name}\n            </span>\n            {\n              item.priority < 0 &&\n              <span>\n                Webview đối tác\n              </span>\n            }\n            <span className='text-muted fw-semobold text-muted d-block fs-7'>\n              {formatDate(item.created_at)}\n            </span>\n          </div>\n        </div>\n      </td>\n      <td>\n        <XSwitch value={item.is_popup === 1 ? true : false} label=\"\" />\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {formatDate(item.valid_from)}\n        </span>\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {formatDate(item.valid_util)}\n        </span>\n      </td>\n      <td>\n        <div className='d-flex justify-content-end flex-shrink-0 tb-control'>\n          {\n            // METHOD?.includes(\"UPDATE\") &&\n            <Link\n              to={{\n                pathname: `/pages/promotions-form/${item.id}`\n              }}\n              aria-label='Xem chi tiết'\n              className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n            >\n              <KTSVG path='/media/icons/duotune/art/art005.svg' className='svg-icon-3' />\n            </Link>\n          }\n          <button onClick={() => mutate(item.id)} disabled={isLoading}\n            className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n          >\n            {\n              isLoading ?\n                <CircularProgress size={12} />\n                :\n                <KTSVG path='/media/icons/duotune/general/gen027.svg' className='svg-icon-3' />\n            }\n          </button>\n        </div>\n      </td>\n    </tr>\n  )\n}\n\n\nexport default Promotions;"],"names":["PromotionItem","_ref","item","qrClient","useQueryClient","mutate","isLoading","useMutation","mutationFn","id","promotionApi","delete","onSuccess","invalidateQueries","queryKey","QR_KEY","PROMOTION","_jsxs","children","_jsx","className","style","objectFit","src","media_url","alt","name","priority","formatDate","created_at","XSwitch","value","is_popup","label","valid_from","valid_util","Link","to","pathname","KTSVG","path","onClick","disabled","CircularProgress","size","_data$total","_data$data","data","useQuery","queryFn","getAll","limit","page","_Fragment","TitlePage","element","title","total","map","index","PageCircularProgress","loading"],"sourceRoot":""}