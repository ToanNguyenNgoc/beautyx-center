"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[653],{96653:(e,l,a)=>{a.r(l),a.d(l,{default:()=>R});var s=a(93511),i=a(86971),n=(a(86636),a(25884),a(82907)),r=a(6171),t=a(73589),o=a(63516),d=a(84529),c=a(42807),m=a(56850),u=a(10611),h=a(87561),v=a(83521),x=a(88988),p=a(15795),g=a(81637),j=a(39842),f=a(69803),N=a(86178),b=a.n(N),y=a(65043),_=a(92823),C=a.n(_),A=a(72812),L=a(73033),T=a(55854),F=a(70579);const R=function(){var e;const l=null!==(e=(0,i.zy)().state)&&void 0!==e?e:0,a=(0,i.g)(),{resultLoad:g,noti:N,onCloseNoti:_}=(0,j.JX)(),[C,R]=(0,y.useState)(),{isLoading:w,handlePostMedia:V}=(0,j._r)(),{mutate:k,isLoading:B}=(0,n.useMutation)({mutationFn:e=>a.id?t.zb.putBanner(a.id,e):t.zb.postBanner(e),onSuccess:()=>{g({message:(a.id?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi")+" banner th\xe0nh c\xf4ng",color:"success"})},onError:e=>{var l;g({color:"error",message:`C\xf3 l\u1ed7i x\u1ea3y ra. M\xe3 l\u1ed7i ${null===e||void 0===e||null===(l=e.request)||void 0===l?void 0:l.status}`})}});let S=(0,o.Wx)({initialValues:{imageURL:"",name:"",platform:"",expires_at:"",type:"",htmlTemplate:"",url:""},validationSchema:L.Ik({imageURL:L.Yj().required("Upload h\xecnh c\u1ee7a banner"),name:L.Yj().required("Nh\u1eadp t\xean c\u1ee7a Banner"),type:L.Yj().required("Ch\u1ecdn lo\u1ea1i Banner")}),onSubmit:e=>{k({...e,origin_id:null===C||void 0===C?void 0:C.id,priority:a.id?void 0:l+1})}});const{data:z,refetch:M,isFetching:I}=(0,n.useQuery)({queryKey:[r.Eo.BANNER,a.id],queryFn:()=>t.zb.getDetailById(a.id),enabled:!!a.id,onSuccess:e=>{var l,a,s,i;const n=e.context;S.setFieldValue("name",n.name),S.setFieldValue("imageURL",n.imageURL),S.setFieldValue("platform",null!==(l=n.platform)&&void 0!==l?l:""),S.setFieldValue("expires_at",n.expires_at),S.setFieldValue("type",null!==(a=n.type)&&void 0!==a?a:""),S.setFieldValue("url",null!==(s=n.url)&&void 0!==s?s:""),S.setFieldValue("htmlTemplate",null!==(i=n.htmlTemplate)&&void 0!==i?i:"")}});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(T.ce,{severity:N.color,message:N.message,open:N.openAlert,close:_}),(0,F.jsx)(s.A,{title:a.id?"C\u1eadp nh\u1eadt banner":"T\u1ea1o m\u1edbi banner"}),(0,F.jsx)("div",{className:"post d-flex flex-column-fluid",id:"kt_post",children:(0,F.jsx)("div",{className:"container cus-container",children:(0,F.jsxs)("form",{className:"banner-form",autoComplete:"off",onSubmit:S.handleSubmit,children:[(0,F.jsx)("div",{className:"required form-label",children:"Banner"}),(0,F.jsx)("div",{className:"drag-banner",children:(0,F.jsx)(d.l,{className:"form-input-file",style:{width:"100%"},multiple:!1,handleChange:e=>{S.setFieldValue("imageURL","");V({e:{target:{files:[e]}},callBack(e){var l,a;console.log(e),S.setFieldValue("imageURL",null!==(l=null===(a=e[0])||void 0===a?void 0:a.original_url)&&void 0!==l?l:"")},version:"myspa",resetOriginalResult:!0})},name:"file",types:c.Uv,children:(0,F.jsxs)("div",{className:"banner-form__img",children:[(0,F.jsx)("img",{src:""===S.values.imageURL?m.X.imgPlaceHolder:S.values.imageURL,alt:"",className:"image-value"}),w&&(0,F.jsxs)("div",{className:"placeholder",children:[(0,F.jsx)("span",{children:"\u0110ang t\u1ea3i l\xean"}),(0,F.jsx)(u.A,{})]}),""===S.values.imageURL&&(0,F.jsx)("div",{className:"placeholder",children:(0,F.jsx)("span",{children:"K\xe9o th\u1ea3 h\xecnh \u1ea3nh v\xe0o \u0111\xe2y ho\u1eb7c Click \u0111\u1ec3 ch\u1ecdn h\xecnh \u1ea3nh"})})]})})}),(0,F.jsx)("input",{value:S.values.imageURL,onChange:S.handleChange,type:"text",name:"imageURL",className:"form-control form-control-solid mt-4 mb-4",placeholder:"Ho\u1eb7c link h\xecnh \u1ea3nh...."}),S.errors.imageURL&&S.touched.imageURL&&(0,F.jsx)("span",{className:"text-danger",children:S.errors.imageURL}),(0,F.jsxs)("div",{className:"input-form",children:[(0,F.jsxs)("div",{className:"input-form__wrap",children:[(0,F.jsx)("label",{className:"required form-label",children:"T\xean Banners"}),(0,F.jsx)("input",{value:S.values.name,onChange:S.handleChange,type:"text",name:"name",className:"form-control form-control-solid",placeholder:"T\xean Banner"}),S.errors.name&&S.touched.name&&(0,F.jsx)("span",{className:"text-danger",children:S.errors.name})]}),(0,F.jsxs)("div",{className:"row mt-8",children:[(0,F.jsxs)("div",{className:"col",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"N\u1ec1n t\u1ea3ng"}),(0,F.jsx)(h.A,{size:"small",children:(0,F.jsxs)(v.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:S.values.platform,onChange:e=>S.setFieldValue("platform",e.target.value),children:[(0,F.jsx)(x.A,{value:"",children:(0,F.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),c.Te.map((e=>(0,F.jsx)(x.A,{value:e,children:e},e)))]})})]}),(0,F.jsxs)("div",{className:"col",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"Ng\xe0y h\u1ebft h\u1ea1n"}),(0,F.jsx)(f.T,{disablePast:!0,inputFormat:"dd/MM/yyyy",value:S.values.expires_at&&new Date(S.values.expires_at),onChange:e=>S.setFieldValue("expires_at",b()(e).format("YYYY-MM-DD HH:mm:ss")),renderInput:e=>(0,F.jsx)(p.A,{...e})}),S.errors.expires_at&&S.touched.expires_at&&(0,F.jsx)("span",{className:"text-danger",children:S.errors.expires_at})]}),(0,F.jsxs)("div",{className:"col",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"Lo\u1ea1i banner cho"}),(0,F.jsx)(h.A,{size:"small",children:(0,F.jsx)(v.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:S.values.type,onChange:e=>S.setFieldValue("type",e.target.value),children:c.vr.map((e=>(0,F.jsx)(x.A,{value:e.type,children:e.title},e.type)))})}),S.errors.type&&S.touched.type&&(0,F.jsx)("span",{className:"text-danger",children:S.errors.type})]})]}),(0,F.jsx)(U,{formik:S,origin:C,setOrigin:R,banner:null===z||void 0===z?void 0:z.context})]}),(0,F.jsxs)("div",{className:"d-flex justify-content-end mt-6",children:[a.id&&(0,F.jsx)(A.A,{style:{marginRight:"8px"},loading:I,onClick:()=>M(),size:"large",color:"primary",type:"button",variant:"contained",children:"Kh\xf4i ph\u1ee5c"}),(0,F.jsx)(A.A,{loading:B,size:"large",color:"success",type:"submit",variant:"contained",children:a.id?"L\u01b0u thay \u0111\u1ed5i":"T\u1ea1o m\u1edbi banner"})]})]})})})]})},U=e=>{let{formik:l,origin:a,setOrigin:s,banner:i}=e;const n=l.values.type,{isLoading:r,handlePostMedia:t}=(0,j._r)(),{isYoutubeLink:o,embedLink:d}=(0,c.sE)(l.values.url);return(0,F.jsxs)("div",{className:"mt-8",children:[(n===c.AT.SEARCH_RESULT||n===c.AT.WEB||n===c.AT.POPUP||n===c.AT.DISCOUNT)&&(0,F.jsxs)("div",{className:"col",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"\u0110\u01b0\u1eddng d\u1eabn"}),(0,F.jsx)("input",{name:"url",onChange:l.handleChange,type:"text",className:"form-control form-control-solid",value:l.values.url,placeholder:"\u0110\u01b0\u1eddng d\u1eabn URL..."})]}),n===c.AT.HTML&&(0,F.jsxs)("div",{className:"col",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"Nh\u1eadp content"}),(0,F.jsx)(C(),{value:l.values.htmlTemplate,onChange:e=>l.setFieldValue("htmlTemplate",e)})]}),n===c.AT.ORGANIZATION&&(0,F.jsx)(T.$P,{organization_id:null===i||void 0===i?void 0:i.origin_id,origin:a,setOrigin:s}),n===c.AT.VIDEO&&(0,F.jsxs)("div",{className:"col col-video",children:[(0,F.jsx)("label",{className:"filter-row_label",children:"Upload video"}),(0,F.jsxs)("div",{className:"drag-video",children:[(0,F.jsx)("input",{name:"url",onChange:l.handleChange,value:l.values.url,type:"text",placeholder:"Ho\u1eb7c link video",className:"form-control form-control-solid"}),(0,F.jsx)("input",{onChange:e=>{l.setFieldValue("url",""),t({e:e,callBack(e){var a;l.setFieldValue("url",null===(a=e[0])||void 0===a?void 0:a.original_url)},version:"api.beautyx"})},hidden:!0,id:"video",type:"file",accept:"video/mp4, video/mov, video/avi, video/wmv"}),(0,F.jsxs)("label",{htmlFor:"video",className:"btn btn-primary p-2",children:[(0,F.jsx)("i",{className:"bi bi-cloud-arrow-up-fill"}),"T\u1ea3i video l\xean"]}),(0,F.jsx)("div",{className:"video-placeholder d-flex justify-content-center mt-5",children:(0,F.jsxs)("div",{className:"video d-flex flex-column align-item-center",children:[r&&(0,F.jsxs)("div",{className:"video-load d-flex flex-column align-items-center",children:["\u0110ang t\u1ea3i video l\xean...",(0,F.jsx)(g.A,{size:22})]}),""!==l.values.url&&(0,F.jsx)(F.Fragment,{children:o?(0,F.jsx)("iframe",{src:d,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Media",style:{width:"100%",height:"100%"}}):(0,F.jsx)("video",{controls:!0,children:(0,F.jsx)("source",{src:l.values.url})})})]})})]})]})]})}},86636:()=>{}}]);
//# sourceMappingURL=653.4024be19.chunk.js.map