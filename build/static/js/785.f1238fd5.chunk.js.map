{"version":3,"file":"static/js/785.f1238fd5.chunk.js","mappings":"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","sources":["app/pages/push-notification/module/push-notification-form.tsx"],"sourcesContent":["import TitlePage from \"components/TitlePage\";\nimport \"./form.scss\"\nimport { useFormik } from \"formik\";\nimport { MenuItem, Select } from \"@mui/material\";\nimport { IMGS } from \"_metronic/assets/imgs/imgs\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { NOTI_TYPES, PLAT_FORM, TYPE, dev, getEnvParam } from \"app/util\";\nimport * as yup from \"yup\"\nimport { useMutation } from \"react-query\";\nimport { ReqPostNotification } from \"@types\";\nimport { notificationApi } from \"app/api\";\nimport { useMessage } from \"app/hooks\";\nimport { AxiosError } from \"axios\";\nimport { AppSnack, SelectPromotion, SelectionDiscounts, SelectionOrg } from \"components\";\nimport { useState } from \"react\";\nimport { IDiscountPar, IOrganization } from \"app/interface\";\nimport { request3rdApi } from \"app/api/api-3rd-client\";\n\nfunction PushNotificationForm() {\n  const { resultLoad, noti, onCloseNoti } = useMessage()\n  const [org, setOrg] = useState<IOrganization>()\n  const [discount, setDiscount] = useState<IDiscountPar>()\n  const { mutate, isLoading } = useMutation({\n    mutationFn: (body: ReqPostNotification) => getEnvParam() === dev ?\n      request3rdApi.postNotification(body)\n      :\n      notificationApi.post(body),\n    onSuccess: () => resultLoad({\n      message: 'Push thông báo thành công',\n      color: 'success'\n    }),\n    onError: (errors: any) => {\n      const err = errors as AxiosError\n      resultLoad({\n        color: 'error',\n        message: `Có lỗi xảy ra. Mã lỗi ${err?.request?.status}`\n      })\n    }\n  })\n  const { values, errors, handleChange, handleSubmit, touched, setFieldValue } = useFormik({\n    initialValues: {\n      title: '',\n      description: '',\n      type: '',\n      link: '',\n      payload_id: ''\n    },\n    validationSchema: yup.object({\n      title: yup.string().required('Nhập tiêu đền'),\n      description: yup.string().required('Nhập nội dung'),\n      type: yup.string().required('Chọn loại thông báo cho'),\n      link: yup.string().required('NHập đường dẫn')\n    }),\n    onSubmit: (values) => {\n      let payload_id = values.payload_id\n      if (Number(values.type) === TYPE.ORG.id && org) payload_id = String(org?.id)\n      if (Number(values.type) === TYPE.DISCOUNT.id && discount) payload_id = discount.uuid\n      mutate({ ...values, payload_id })\n    }\n  })\n  return (\n    <>\n      <TitlePage title=\"Thông báo\" />\n      <AppSnack\n        severity={noti.color}\n        message={noti.message}\n        open={noti.openAlert}\n        close={onCloseNoti}\n      />\n      <div className='post d-flex flex-column-fluid' id=\"kt_post\">\n        <div className=\"notification-cnt\">\n          <form onSubmit={handleSubmit} className=\"form-left\">\n            <div className=\"column\">\n              <div className=\"required form-label\">Tiêu đề</div>\n              <input\n                value={values.title}\n                onChange={handleChange}\n                type=\"text\"\n                name=\"title\"\n                className=\"form-control form-control-solid mt-1 mb-4\"\n              />\n              {\n                errors.title && touched.title &&\n                <span className=\"text-danger\">{errors.title}</span>\n              }\n            </div>\n            <div className=\"column\">\n              <div className=\"required form-label\">Nội dung thông báo</div>\n              <input\n                value={values.description}\n                onChange={handleChange}\n                type=\"text\"\n                name=\"description\"\n                className=\"form-control form-control-solid mt-1 mb-4\"\n              />\n              {\n                errors.description && touched.description &&\n                <span className=\"text-danger\">{errors.description}</span>\n              }\n            </div>\n            <div className=\"column mb-4\">\n              <div className=\"required form-label\">Thông báo cho</div>\n              <Select\n                size=\"small\"\n                name=\"type\"\n                value={values.type}\n                onChange={handleChange}\n              >\n                {\n                  NOTI_TYPES.map(i => (\n                    <MenuItem key={i.id} value={String(i.id)}>{i.title}</MenuItem>\n                  ))\n                }\n              </Select>\n              {\n                errors.type && touched.type &&\n                <span className=\"text-danger\">{errors.type}</span>\n              }\n            </div>\n            <>\n              {\n                Number(values.type) === TYPE.ORG.id &&\n                <div className=\"column\">\n                  <SelectionOrg\n                    organization_id={values.payload_id}\n                    origin={org}\n                    setOrigin={setOrg}\n                  />\n                </div>\n              }\n              {\n                Number(values.type) === TYPE.PROMOTION.id &&\n                <div className=\"column\">\n                  <SelectPromotion\n                    value={values.payload_id}\n                    onChange={(id) => setFieldValue('payload_id', String(id))}\n                  />\n                </div>\n              }\n              {\n                Number(values.type) === TYPE.DISCOUNT.id &&\n                <div className=\"column\">\n                  <SelectionDiscounts\n                    label=\"Gắn deal giảm giá\"\n                    onChangeDiscounts={(i) => setDiscount(i[i.length - 1])}\n                    filterAll={false}\n                    platform={PLAT_FORM.MOMO}\n                    discounts={discount ? [discount] : []}\n                  />\n                </div>\n              }\n            </>\n            <div className=\"column\">\n              <div className=\"required form-label\">Đường dẫn</div>\n              <input\n                value={values.link}\n                onChange={handleChange}\n                type=\"text\"\n                name=\"link\"\n                className=\"form-control form-control-solid mt-1 mb-4\"\n              />\n              {\n                errors.link && touched.link &&\n                <span className=\"text-danger\">{errors.link}</span>\n              }\n            </div>\n            <div className=\"d-flex justify-content-end mt-6\">\n              <LoadingButton type=\"submit\" variant=\"contained\" color=\"success\" loading={isLoading} >\n                Push thông báo\n              </LoadingButton>\n            </div>\n          </form>\n          <div className=\"preview-right\">\n            <span className=\"title\">Giao diện thông báo</span>\n            <div className=\"device-cnt\">\n              <div className=\"device\">\n                <img className=\"device-img\" src={IMGS.android} alt=\"\" />\n                <div className=\"device-noti\">\n                  <div className=\"item\">\n                    <div className=\"item-icon\">\n                      <img src={IMGS.beautyxIcon} alt=\"\" />\n                    </div>\n                    <div className=\"item-right\">\n                      <p className=\"item-right-title\">{values.title}</p>\n                      <p className=\"item-right-content\">{values.description}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"device-cnt\">\n              <div className=\"device\">\n                <img className=\"device-img\" src={IMGS.iphone} alt=\"\" />\n                <div className=\"device-noti\" style={{ marginTop: '50px' }}>\n                  <div className=\"item\">\n                    <div className=\"item-icon\">\n                      <img src={IMGS.beautyxIcon} alt=\"\" />\n                    </div>\n                    <div className=\"item-right\">\n                      <p className=\"item-right-title\">{values.title}</p>\n                      <p className=\"item-right-content\">{values.description}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default PushNotificationForm;"],"names":["resultLoad","noti","onCloseNoti","useMessage","org","setOrg","useState","discount","setDiscount","mutate","isLoading","useMutation","mutationFn","body","getEnvParam","dev","request3rdApi","postNotification","notificationApi","post","onSuccess","message","color","onError","errors","_err$request","request","status","values","handleChange","handleSubmit","touched","setFieldValue","useFormik","initialValues","title","description","type","link","payload_id","validationSchema","yup","required","onSubmit","Number","TYPE","ORG","id","String","DISCOUNT","uuid","_jsxs","_Fragment","children","_jsx","TitlePage","AppSnack","severity","open","openAlert","close","className","value","onChange","name","Select","size","NOTI_TYPES","map","i","MenuItem","SelectionOrg","organization_id","origin","setOrigin","PROMOTION","SelectPromotion","SelectionDiscounts","label","onChangeDiscounts","length","filterAll","platform","PLAT_FORM","MOMO","discounts","LoadingButton","variant","loading","src","IMGS","android","alt","beautyxIcon","iphone","style","marginTop"],"sourceRoot":""}