"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[413,704],{49389:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var s=t(1413),a=t(43504),n=t(16871),i=t(11838),r=t(15842),d=t(6991),c=t(64248),o=t(72930),m=t(66305),u=t(91933),h=t(52902),x=t(77356),f=t(4245),p=t(66362),j=t(17964),v=t(39891),b=t(35036),g=t(763),N=t(22095),y=t(72791),w=t(80184);var k=function(e){var l,t,a,i=e.query,r=[{sort:"-created_at",title:"Ng\xe0y t\u1ea1o"},{sort:"-total",title:"S\u1ed1 l\u01b0\u1ee3ng m\xe3"},{sort:"-priority",title:"\u0110\u1ed9 \u01b0u ti\xean"}],c=(0,n.s0)(),o=(0,n.TH)(),m=(0,y.useCallback)((0,g.debounce)((function(e){return c(""===e.trim()?"".concat(o.pathname):"".concat(o.pathname,"?filter[keyword]=").concat(e),{replace:!0})}),600),[]);return(0,w.jsxs)("div",{className:"d-flex justify-content-between filter-cnt",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"filter-row_label",children:"T\xecm ki\u1ebfm"}),(0,w.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},className:"form-control form-control-solid py-2 px-6",placeholder:"Ti\xeau \u0111\u1ec1..."})]}),(0,w.jsxs)("div",{className:"filter-row",children:[(0,w.jsxs)("div",{className:"filter-row_platform",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"H\xecnh th\u1ee9c gi\u1ea3m gi\xe1"}),(0,w.jsx)(p.Z,{sx:{m:1,minWidth:150},size:"small",children:(0,w.jsxs)(j.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(l=i["filter[discount_type]"])&&void 0!==l?l:"",onChange:function(e){var l=(0,s.Z)((0,s.Z)({},i),{},{page:1,"filter[discount_type]":""!==e.target.value?e.target.value:""});c({pathname:o.pathname,search:f.stringify((0,g.pickBy)(l,g.identity))})},children:[(0,w.jsx)(v.Z,{value:"",children:(0,w.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),d.id.map((function(e){return(0,w.jsx)(v.Z,{value:e.TYPE,children:e.title},e.id)}))]})})]}),(0,w.jsxs)("div",{className:"filter-row_platform",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"N\u1ec1n t\u1ea3ng"}),(0,w.jsx)(p.Z,{sx:{m:1,minWidth:150},size:"small",children:(0,w.jsxs)(j.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(t=i["filter[platform]"])&&void 0!==t?t:"",onChange:function(e){var l=(0,s.Z)((0,s.Z)({},i),{},{page:1,"filter[platform]":""!==e.target.value?e.target.value:""});c({pathname:o.pathname,search:f.stringify((0,g.pickBy)(l,g.identity))})},children:[(0,w.jsx)(v.Z,{value:"",children:(0,w.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),b.eN.map((function(e){return(0,w.jsx)(v.Z,{value:e,children:e},e)}))]})})]}),(0,w.jsxs)("div",{className:"filter-row_platform",children:[(0,w.jsx)("label",{className:"filter-row_label",children:"S\u1eafp x\u1ebfp theo"}),(0,w.jsx)(p.Z,{sx:{m:1,minWidth:150},size:"small",children:(0,w.jsx)(j.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(a=i.sort)&&void 0!==a?a:r[0].sort,onChange:function(e){var l=(0,s.Z)((0,s.Z)({},i),{},{sort:e.target.value});c({pathname:o.pathname,search:f.stringify(l)})},children:r.map((function(e){return(0,w.jsx)(v.Z,{value:e.sort,children:e.title},e.sort)}))})})]})]})]})},_=function(){var e,l,t,p,j=(0,n.TH)(),v=(0,n.s0)(),b=f.parse(j.search),g=(0,u.useQuery)({queryKey:[h.xG.DISCOUNT_PAGE,b],queryFn:function(){var e,l;return x.SX.getAll({page:null!==(e=null===b||void 0===b?void 0:b.page)&&void 0!==e?e:1,limit:15,"filter[keyword]":b["filter[keyword]"],"filter[filter_all]":!0,"filter[platform]":b["filter[platform]"],"filter[discount_type]":b["filter[discount_type]"],sort:null!==(l=b.sort)&&void 0!==l?l:"-created_at"})}}),y=g.data,_=g.isLoading,Z=null!==(e=null===y||void 0===y?void 0:y.data)&&void 0!==e?e:[],T=(0,u.useQueryClient)();return(0,u.useMutation)({mutationFn:function(e){return x.SX.deleteById(e)},onSuccess:function(){T.invalidateQueries([h.xG.DISCOUNT_PAGE,b])}}).mutate,(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.Z,{element:(0,w.jsx)(a.rU,{to:{pathname:"/pages/discounts-form"},className:"btn btn-sm btn-primary",children:"T\u1ea1o m\u1edbi"}),title:"Danh s\xe1ch M\xe3 gi\u1ea3m gi\xe1"}),(0,w.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,w.jsx)("div",{className:"card-header border-0 pt-5",children:(0,w.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,w.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"M\xe3 gi\u1ea3m gi\xe1"}),(0,w.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:["S\u1ed1 l\u01b0\u1ee3ng : ",null!==(l=null===y||void 0===y?void 0:y.total)&&void 0!==l?l:1]})]})}),(0,w.jsx)(k,{query:b}),(0,w.jsx)("div",{className:"card-body py-3",children:(0,w.jsxs)("div",{className:"table-responsive",children:[(0,w.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"fw-bold text-muted",children:[(0,w.jsx)("th",{className:"min-w-150px",children:"Ti\xeau \u0111\u1ec1"}),(0,w.jsx)("th",{className:"min-w-80px",children:"\u01afu ti\xean"}),(0,w.jsx)("th",{className:"min-w-150px",children:"H\xecnh th\u1ee9c gi\u1ea3m"}),(0,w.jsx)("th",{className:"min-w-100px",children:"T\u1eeb ng\xe0y"}),(0,w.jsx)("th",{className:"min-w-100px",children:"\u0110\u1ebfn ng\xe0y"}),(0,w.jsx)("th",{className:"min-w-100px text-end",children:"N\u1ec1n t\u1ea3ng"}),(0,w.jsx)("th",{className:"min-w-100px text-end",children:"S\u1ed1 l\u01b0\u1ee3ng m\xe3"}),(0,w.jsx)("th",{className:"min-w-150px text-end",children:"S\u1eed d\u1ee5ng/1 kh\xe1ch"}),(0,w.jsx)("th",{className:"min-w-100px text-end",children:"Actions"})]})}),(0,w.jsx)("tbody",{children:Z.map((function(e,l){var t,s,a,n;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"d-flex align-items-center",children:[(0,w.jsx)("div",{className:"symbol symbol-45px me-5",children:(0,w.jsx)("img",{src:null===(t=e.items[0])||void 0===t||null===(s=t.productable)||void 0===s?void 0:s.image_url,alt:""})}),(0,w.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,w.jsx)("span",{className:"text-dark fw-bold text-hover-primary fs-6",children:e.title}),(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,r.p6)(e.created_at)})]})]})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-dark text-center fw-bold d-block mb-1 fs-7",children:e.priority})}),(0,w.jsx)("td",{children:(0,w.jsx)("div",{className:"d-flex flex-column w-100 me-2",children:(0,w.jsx)(d.zs,{TYPE:e.discount_type})})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,r.p6)(e.valid_from)})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,r.p6)(e.valid_util)})}),(0,w.jsx)("td",{children:(0,w.jsx)(c.Z,{platForm:e.platform})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:null!==(a=e.total)&&void 0!==a?a:"Kh\xf4ng gi\u1edbi h\u1ea1n"})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-muted text-end fw-semobold text-muted d-block fs-7",children:null!==(n=e.limit)&&void 0!==n?n:"Kh\xf4ng gi\u1edbi h\u1ea1n"})}),(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"d-flex justify-content-end flex-shrink-0 tb-control",children:[(0,w.jsx)("button",{onClick:function(){return v("/pages/discounts-form/".concat(e.uuid),{state:e})},"aria-label":"Xem chi ti\u1ebft",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,w.jsx)(o.D8,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})}),("SHOPEE"===e.platform||"VINID"===e.platform||"BEAUTYX"===e.platform)&&(0,w.jsx)("button",{className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:function(){return v("/pages/discounts/".concat(e.uuid))},children:(0,w.jsx)(o.D8,{path:"/media/icons/duotune/general/gen019.svg",className:"svg-icon-3"})}),("SHOPEE"===e.platform||"VINID"===e.platform||"BEAUTYX"===e.platform)&&(0,w.jsx)(N.ExportCode,{title:"",size:"small",discount:e})]})})]},l)}))})]}),(0,w.jsx)(m.Am,{loading:_}),(0,w.jsx)(m.Aw,{totalPage:null!==(t=null===y||void 0===y?void 0:y.last_page)&&void 0!==t?t:1,onChangePage:function(e){var l=(0,s.Z)((0,s.Z)({},b),{},{page:e});v({pathname:j.pathname,search:f.stringify(l)})},defaultPage:null!==(p=null===b||void 0===b?void 0:b.page)&&void 0!==p?p:1})]})})]})]})}}}]);
//# sourceMappingURL=413.5e57a443.chunk.js.map