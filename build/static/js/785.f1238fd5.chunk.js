"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[785],{20785:(e,i,s)=>{s.r(i),s.d(i,{default:()=>v});var l=s(93511),n=s(63516),t=s(83521),a=s(88988),c=s(56850),d=s(72812),r=s(42807),o=s(73033),m=s(82907),h=s(73589),u=s(39842),x=s(55854),p=s(65043),j=s(6940),N=s(70579);const v=function(){const{resultLoad:e,noti:i,onCloseNoti:s}=(0,u.JX)(),[v,g]=(0,p.useState)(),[b,y]=(0,p.useState)(),{mutate:f,isLoading:k}=(0,m.useMutation)({mutationFn:e=>(0,r.r4)()===r.kx?j.Z7.postNotification(e):h.OT.post(e),onSuccess:()=>e({message:"Push th\xf4ng b\xe1o th\xe0nh c\xf4ng",color:"success"}),onError:i=>{var s;e({color:"error",message:`C\xf3 l\u1ed7i x\u1ea3y ra. M\xe3 l\u1ed7i ${null===i||void 0===i||null===(s=i.request)||void 0===s?void 0:s.status}`})}}),{values:C,errors:S,handleChange:O,handleSubmit:q,touched:T,setFieldValue:_}=(0,n.Wx)({initialValues:{title:"",description:"",type:"",link:"",payload_id:""},validationSchema:o.Ik({title:o.Yj().required("Nh\u1eadp ti\xeau \u0111\u1ec1n"),description:o.Yj().required("Nh\u1eadp n\u1ed9i dung"),type:o.Yj().required("Ch\u1ecdn lo\u1ea1i th\xf4ng b\xe1o cho"),link:o.Yj().required("NH\u1eadp \u0111\u01b0\u1eddng d\u1eabn")}),onSubmit:e=>{let i=e.payload_id;Number(e.type)===r.ZE.ORG.id&&v&&(i=String(null===v||void 0===v?void 0:v.id)),Number(e.type)===r.ZE.DISCOUNT.id&&b&&(i=b.uuid),f({...e,payload_id:i})}});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(l.A,{title:"Th\xf4ng b\xe1o"}),(0,N.jsx)(x.ce,{severity:i.color,message:i.message,open:i.openAlert,close:s}),(0,N.jsx)("div",{className:"post d-flex flex-column-fluid",id:"kt_post",children:(0,N.jsxs)("div",{className:"notification-cnt",children:[(0,N.jsxs)("form",{onSubmit:q,className:"form-left",children:[(0,N.jsxs)("div",{className:"column",children:[(0,N.jsx)("div",{className:"required form-label",children:"Ti\xeau \u0111\u1ec1"}),(0,N.jsx)("input",{value:C.title,onChange:O,type:"text",name:"title",className:"form-control form-control-solid mt-1 mb-4"}),S.title&&T.title&&(0,N.jsx)("span",{className:"text-danger",children:S.title})]}),(0,N.jsxs)("div",{className:"column",children:[(0,N.jsx)("div",{className:"required form-label",children:"N\u1ed9i dung th\xf4ng b\xe1o"}),(0,N.jsx)("input",{value:C.description,onChange:O,type:"text",name:"description",className:"form-control form-control-solid mt-1 mb-4"}),S.description&&T.description&&(0,N.jsx)("span",{className:"text-danger",children:S.description})]}),(0,N.jsxs)("div",{className:"column mb-4",children:[(0,N.jsx)("div",{className:"required form-label",children:"Th\xf4ng b\xe1o cho"}),(0,N.jsx)(t.A,{size:"small",name:"type",value:C.type,onChange:O,children:r.Jz.map((e=>(0,N.jsx)(a.A,{value:String(e.id),children:e.title},e.id)))}),S.type&&T.type&&(0,N.jsx)("span",{className:"text-danger",children:S.type})]}),(0,N.jsxs)(N.Fragment,{children:[Number(C.type)===r.ZE.ORG.id&&(0,N.jsx)("div",{className:"column",children:(0,N.jsx)(x.$P,{organization_id:C.payload_id,origin:v,setOrigin:g})}),Number(C.type)===r.ZE.PROMOTION.id&&(0,N.jsx)("div",{className:"column",children:(0,N.jsx)(x.EK,{value:C.payload_id,onChange:e=>_("payload_id",String(e))})}),Number(C.type)===r.ZE.DISCOUNT.id&&(0,N.jsx)("div",{className:"column",children:(0,N.jsx)(x.Nv,{label:"G\u1eafn deal gi\u1ea3m gi\xe1",onChangeDiscounts:e=>y(e[e.length-1]),filterAll:!1,platform:r.Jv.MOMO,discounts:b?[b]:[]})})]}),(0,N.jsxs)("div",{className:"column",children:[(0,N.jsx)("div",{className:"required form-label",children:"\u0110\u01b0\u1eddng d\u1eabn"}),(0,N.jsx)("input",{value:C.link,onChange:O,type:"text",name:"link",className:"form-control form-control-solid mt-1 mb-4"}),S.link&&T.link&&(0,N.jsx)("span",{className:"text-danger",children:S.link})]}),(0,N.jsx)("div",{className:"d-flex justify-content-end mt-6",children:(0,N.jsx)(d.A,{type:"submit",variant:"contained",color:"success",loading:k,children:"Push th\xf4ng b\xe1o"})})]}),(0,N.jsxs)("div",{className:"preview-right",children:[(0,N.jsx)("span",{className:"title",children:"Giao di\u1ec7n th\xf4ng b\xe1o"}),(0,N.jsx)("div",{className:"device-cnt",children:(0,N.jsxs)("div",{className:"device",children:[(0,N.jsx)("img",{className:"device-img",src:c.X.android,alt:""}),(0,N.jsx)("div",{className:"device-noti",children:(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("div",{className:"item-icon",children:(0,N.jsx)("img",{src:c.X.beautyxIcon,alt:""})}),(0,N.jsxs)("div",{className:"item-right",children:[(0,N.jsx)("p",{className:"item-right-title",children:C.title}),(0,N.jsx)("p",{className:"item-right-content",children:C.description})]})]})})]})}),(0,N.jsx)("div",{className:"device-cnt",children:(0,N.jsxs)("div",{className:"device",children:[(0,N.jsx)("img",{className:"device-img",src:c.X.iphone,alt:""}),(0,N.jsx)("div",{className:"device-noti",style:{marginTop:"50px"},children:(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("div",{className:"item-icon",children:(0,N.jsx)("img",{src:c.X.beautyxIcon,alt:""})}),(0,N.jsxs)("div",{className:"item-right",children:[(0,N.jsx)("p",{className:"item-right-title",children:C.title}),(0,N.jsx)("p",{className:"item-right-content",children:C.description})]})]})})]})})]})]})})]})}}}]);
//# sourceMappingURL=785.f1238fd5.chunk.js.map