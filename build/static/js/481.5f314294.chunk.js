"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[481],{13481:function(e,s,a){a.r(s),a.d(s,{default:function(){return M}});var t=a(42982),l=a(70885),n=a(1413),i=a(11838),c=a(66305),r=a(6991),d=a(43504),o=a(16871),m=a(58233),h=a(72791),x=a(4245),u=a(66362),f=a(94925),j=a(17964),v=a(39891),b=a(39709),g=a(91933),p=a(77356),N=a(763),y=a(64802),w=a(34045),_=a(72426),k=a.n(_),T=a(65298),Z=a(80184);var D=function(e){var s=e.data,a=x.parse((0,o.TH)().search),t=(0,o.s0)(),l=(0,o.TH)();return(0,Z.jsxs)("div",{className:"card-body filter-cnt",children:[(0,Z.jsx)("div",{className:"search",children:(0,Z.jsx)("input",{type:"text",className:"form-control form-control-solid",placeholder:"T\xecm ki\u1ebfm MC"})}),(0,Z.jsxs)("div",{className:"filter",children:[(0,Z.jsx)("div",{className:"filter-item",children:(0,Z.jsxs)(u.Z,{style:{width:"100%"},size:"small",children:[(0,Z.jsx)(f.Z,{id:"demo-select-small-label",children:"Tr\u1ea1ng th\xe1i TMDT"}),(0,Z.jsxs)(j.Z,{labelId:"demo-select-small-label",id:"demo-select-small",label:"Tr\u1ea1ng th\xe1i TMDT",value:a.is_ecommerce||"",onChange:function(e){var s=(0,n.Z)((0,n.Z)({},a),{},{page:"",is_ecommerce:e.target.value});t({pathname:l.pathname,search:x.stringify((0,N.pickBy)(s,N.identity))})},children:[(0,Z.jsx)(v.Z,{value:"",children:"T\u1ea5t c\u1ea3"}),(0,Z.jsx)(v.Z,{value:"true",children:"\u0110ang m\u1edf"}),(0,Z.jsx)(v.Z,{value:"false",children:"\u0110ang \u0111\xf3ng"})]})]})}),(0,Z.jsx)("div",{className:"filter-item",children:s&&(0,Z.jsx)(C,{query:a,data:s})})]})]})},C=function(e){var s=e.query,a=e.data,n=(0,h.useState)([]),i=(0,l.Z)(n,2),r=i[0],d=i[1],o=(0,T.UD)(),m=o.resultLoad,x=o.noti,u=o.onCloseNoti,f=(0,h.useState)(!1),j=(0,l.Z)(f,2),v=j[0],N=j[1],y=(0,g.useMutation)({mutationFn:function(e){return p.RX.getAll({page:e,is_ecommerce:s.is_ecommerce||"",sort:"-created_at",limit:30}).then((function(e){return e.data.context}))},onSuccess:function(e){return d((function(s){return[].concat((0,t.Z)(s),(0,t.Z)(e.data))}))}}),w=y.mutate,_=y.isLoading;return(0,h.useEffect)((function(){v&&r.length>0&&r.length===(null===a||void 0===a?void 0:a.total)&&A(r).then((function(){m({message:"Xu\u1ea5t File th\xe0nh c\xf4ng",color:"success"}),d([]),N(!1)})),r.length===(null===a||void 0===a?void 0:a.total)&&d([])}),[r,null===a||void 0===a?void 0:a.total]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.Ct,{severity:x.color,message:x.message,open:x.openAlert,close:u}),(0,Z.jsx)(b.Z,{onClick:function(){N(!0);for(var e=1;e<=(null===a||void 0===a?void 0:a.last_page);e++)w(e)},loading:_,color:"success",variant:"contained",size:"medium",children:"Xu\u1ea5t DS"})]})},A=function(e){return new Promise((function(s,a){var l=[["#","ID","T\xean MC","Link gian h\xe0ng","Subdomain","Tr\u1ea1ng th\xe1i","Ng\xe0y t\u1ea1o"]].concat((0,t.Z)(e.map((function(e,s){return[s+1,e.id,e.name,"https://beautyx.vn/cua-hang/".concat(e.subdomain),e.subdomain,e.is_momo_ecommerce_enable?"\u0110ang m\u1edf":"\u0110ang t\u1eaft",k()(e.created_at).format("DD/MM/YYYY")]})))),n=w.P6.aoa_to_sheet(l);n["!cols"]=[{wch:5},{wch:10},{wch:75},{wch:45},{wch:25},{wch:25},{wch:25}];var i={Sheets:{data:n},SheetNames:["data"]},c=w.cW(i,{bookType:"xlsx",type:"array"}),r=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});y.saveAs(r,"ds_mc_".concat(k()().format("DDHHmmss"))+".xlsx"),s(!0)}))},M=function(){var e,s,a,t=(0,o.TH)(),l=(0,o.s0)(),h=x.parse(t.search),u=(0,g.useQuery)({queryKey:["ORG",h],queryFn:function(){return p.RX.getAll({page:h.page||1,limit:30,is_ecommerce:h.is_ecommerce||"",sort:"-created_at"}).then((function(e){return e.data.context}))}}).data;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(i.Z,{title:"Danh s\xe1ch doanh nghi\u1ec7p"}),(0,Z.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,Z.jsx)("div",{className:"card-header border-0 pt-5",children:(0,Z.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,Z.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"Danh s\xe1ch doanh nghi\u1ec7p"}),(0,Z.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:[null===u||void 0===u?void 0:u.total," doanh nghi\u1ec7p"]})]})}),(0,Z.jsx)(D,{data:u}),(0,Z.jsx)("div",{className:"card-body py-3",children:(0,Z.jsxs)("div",{className:"table-responsive",children:[(0,Z.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,Z.jsx)("th",{className:"ps-4 min-w-300px rounded-start",children:"Th\xf4ng tin"}),(0,Z.jsx)("th",{className:"min-w-125px",children:"Li\xean l\u1ea1c"}),(0,Z.jsx)("th",{className:"min-w-125px",children:"L\u01b0\u1ee3t th\xedch"}),(0,Z.jsx)("th",{className:"min-w-200px",children:"Tr\u1ea1ng th\xe1i TMDT"}),(0,Z.jsx)("th",{className:"min-w-100px",children:"Rating"}),(0,Z.jsx)("th",{className:"min-w-150px text-end rounded-end"})]})}),(0,Z.jsx)("tbody",{children:null===u||void 0===u||null===(e=u.data)||void 0===e?void 0:e.map((function(e,s){var a;return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{children:(0,Z.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Z.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,Z.jsx)(c.qE,{src:e.image_url})}),(0,Z.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,Z.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:e.name}),(0,Z.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:e.full_address})]})]})}),(0,Z.jsx)("td",{children:(0,Z.jsx)("span",{className:"text-dark fw-bold text-hover-primary d-block mb-1 fs-7",children:null===(a=e.telephone)||void 0===a?void 0:a.join(", ")})}),(0,Z.jsx)("td",{children:(0,Z.jsx)("span",{className:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6",children:e.favorites_count})}),(0,Z.jsx)("td",{children:(0,Z.jsx)(r.w5,{status:e.is_momo_ecommerce_enable})}),(0,Z.jsxs)("td",{children:[(0,Z.jsxs)("div",{className:"rating",children:[(0,Z.jsx)("div",{className:"rating-label me-2 checked",children:(0,Z.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,Z.jsx)("div",{className:"rating-label me-2 checked",children:(0,Z.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,Z.jsx)("div",{className:"rating-label me-2 checked",children:(0,Z.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,Z.jsx)("div",{className:"rating-label me-2 checked",children:(0,Z.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,Z.jsx)("div",{className:"rating-label me-2 checked",children:(0,Z.jsx)("i",{className:"bi bi-star-fill fs-5"})})]}),(0,Z.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:"Best Rated"})]}),(0,Z.jsx)("td",{className:"text-end",children:(0,Z.jsx)(d.rU,{to:{pathname:m.Z.ORGANIZATIONS_DETAIL(e.id)},className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2",children:(0,Z.jsx)("i",{className:"bi bi-eye fs-4"})})})]},s)}))})]}),(0,Z.jsx)(c.Aw,{totalPage:null!==(s=null===u||void 0===u?void 0:u.last_page)&&void 0!==s?s:1,onChangePage:function(e){var s=(0,n.Z)((0,n.Z)({},h),{},{page:e});l({pathname:t.pathname,search:x.stringify(s)})},defaultPage:null!==(a=null===h||void 0===h?void 0:h.page)&&void 0!==a?a:1})]})})]})]})}},11838:function(e,s,a){a.d(s,{Z:function(){return l}});a(72791);var t=a(80184);var l=function(e){var s=e.title,a=e.element;return(0,t.jsx)("div",{className:"toolbar",id:"kt_toolbar",children:(0,t.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,t.jsx)("h1",{className:"d-flex align-items-center text-dark fw-bolder my-1 fs-3",children:s}),a]})})}}}]);
//# sourceMappingURL=481.5f314294.chunk.js.map