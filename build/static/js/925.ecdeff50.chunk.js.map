{"version":3,"file":"static/js/925.ecdeff50.chunk.js","mappings":"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","sources":["app/pages/voucher/VoucherFormPage.tsx"],"sourcesContent":["import TitlePage from \"components/TitlePage\";\nimport { FC } from \"react\";\nimport './voucher.style.scss'\nimport { AppSnack, XDateRangePicker, XSwitch } from \"components\";\nimport { useFormik } from \"formik\";\nimport * as Yup from 'yup'\nimport { LoadingButton } from \"@mui/lab\";\nimport moment from \"moment\";\nimport { discountsApi } from \"app/api\";\nimport { useMutation } from \"react-query\";\nimport { ReqDiscountBody } from \"@types\";\nimport { useMessage } from \"app/hooks\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst VoucherFormPage: FC = () => {\n  const navigate = useNavigate()\n  const { resultLoad, onCloseNoti, noti } = useMessage()\n  const { mutate, isLoading } = useMutation<any, any, ReqDiscountBody>({\n    mutationFn: body => discountsApi.postDiscount(body),\n    onSuccess: (data) => {\n      resultLoad({\n        message: 'Tạo thành công',\n        color: 'success'\n      })\n      setTimeout(() => navigate(-1), 2000)\n    },\n    onError: (error, variables, context) => {\n      resultLoad({\n        message: 'Có lỗi xảy ra',\n        color: 'error'\n      })\n    },\n  })\n  const formik = useFormik({\n    initialValues: {\n      title: '',\n      coupon_code: '',\n      description: '',\n      discount_value: '',\n      total: '',\n      valid_from: moment().format('YYYY-MM-DD HH:mm:ss'),\n      valid_util: moment().format('YYYY-MM-DD HH:mm:ss'),\n      limit:''\n    },\n    validationSchema: Yup.object({\n      title: Yup.string().required(\"Vui lòng nhập tên chương trình khuyến mại\"),\n      coupon_code: Yup.string().required(\"Vui lòng nhập Mã giảm giá\"),\n      description: Yup.string().required(\"Vui lòng nhập mô tả chương trình khuyến mại\"),\n      discount_value: Yup.number().min(1000, 'Giá trị giảm lớn hơn 1000').required(\"Vui lòng nhập giá trị giảm\"),\n      total: Yup.number().min(0, 'Số lượng mã tối đa 4000 mã')\n        .max(4000, 'Số lượng mã tối đa 4000 mã')\n        .required('Vui lòng nhập số lượng mã'),\n      limit:Yup.number().min(1, 'Lượt sử dụng mỗi khách lớn hơn 1')\n    }),\n    onSubmit: (values) => {\n      const { title, coupon_code, description, discount_value, total, valid_from, valid_util, limit } = values\n      mutate({\n        title,\n        coupon_code,\n        description,\n        platform: 'BEAUTYX',\n        discount_type: 'SUB_TOTAL',\n        discount_unit: 'PRICE',\n        is_campaign: 1,\n        valid_from,\n        valid_util,\n        discount_value,\n        total: Number(total),\n        minimum_order_value: Number(discount_value),\n        limit:Number(limit)\n      })\n    }\n  })\n  return (\n    <>\n      <AppSnack\n        severity={noti.color}\n        message={noti.message}\n        open={noti.openAlert}\n        close={onCloseNoti}\n      />\n      <TitlePage\n        title=\"Tạo mới voucher\"\n      />\n      <div className='post d-flex flex-column-fluid' id=\"kt_post\">\n        <div className=\"container\">\n          <form autoComplete=\"off\" className=\"form\" onSubmit={formik.handleSubmit}>\n            <div className=\"flex-row-sp align-items-center input-wrap\">\n              <div className=\"wrap-item\">\n                <XSwitch\n                  value={true}\n                  label='Is campaign (Áp dụng mã giảm giá BeautyX)'\n                />\n              </div>\n            </div>\n            <div className=\"flex-row-sp input-wrap\">\n              <div className=\"wrap-item\">\n                <label className=\"required form-label\">Mã giảm giá</label>\n                <input\n                  onChange={formik.handleChange}\n                  value={formik.values.coupon_code}\n                  name=\"coupon_code\"\n                  type=\"text\"\n                  className=\"form-control form-control-solid\"\n                  placeholder={`BTX${moment().format('DDMM')}`}\n                />\n                {formik.errors.coupon_code && formik.touched.coupon_code && (\n                  <span className='text-danger'>\n                    {formik.errors.coupon_code}\n                  </span>\n                )}\n              </div>\n              <div className=\"wrap-item\">\n                <label className=\"required form-label\">Tên</label>\n                <input\n                  onChange={formik.handleChange}\n                  value={formik.values.title}\n                  name=\"title\"\n                  type=\"text\"\n                  className=\"form-control form-control-solid\"\n                  placeholder=\"Chương trình khuyến mại\"\n                />\n                {formik.errors.title && formik.touched.title && (\n                  <span className='text-danger'>\n                    {formik.errors.title}\n                  </span>\n                )}\n              </div>\n            </div>\n            <div className=\"input-wrap\">\n              <label className=\"required form-label\">Mô tả</label>\n              <input\n                onChange={formik.handleChange}\n                value={formik.values.description}\n                name=\"description\"\n                type=\"text\"\n                className=\"form-control form-control-solid\"\n                placeholder=\"Mô tả chương trình khuyến mại\"\n              />\n              {formik.errors.description && formik.touched.description && (\n                <span className='text-danger'>\n                  {formik.errors.description}\n                </span>\n              )}\n            </div>\n            <div className=\"flex-row-sp input-wrap\">\n              <div className=\"wrap-item wrap-item-col-4\">\n                <label className=\"required form-label\">\n                  Giá trị giảm giá\n                </label>\n                <input\n                  onChange={formik.handleChange}\n                  value={formik.values.discount_value}\n                  name=\"discount_value\"\n                  type=\"number\"\n                  className=\"form-control form-control-solid\"\n                  placeholder=\"Giá trị giảm giá\"\n                />\n                {formik.errors.discount_value && formik.touched.discount_value && (\n                  <span className='text-danger'>\n                    {formik.errors.discount_value}\n                  </span>\n                )}\n              </div>\n            </div>\n            <div className=\"flex-row-sp input-wrap\">\n              <div className=\"wrap-item wrap-item-col-4\">\n                <label className=\"required form-label\">Số lượng</label>\n                <input\n                  value={formik.values.total}\n                  onChange={formik.handleChange}\n                  name=\"total\"\n                  type=\"number\"\n                  className=\"form-control form-control-solid\"\n                  placeholder=\"\"\n                />\n                {formik.errors.total && formik.touched.total && (\n                  <span className='text-danger'>\n                    {formik.errors.total}\n                  </span>\n                )}\n              </div>\n              <div className=\"wrap-item wrap-item-col-4\">\n                <label className=\"required form-label\">Lượt sử dụng mỗi khách</label>\n                <input\n                  value={formik.values.limit}\n                  onChange={formik.handleChange}\n                  name=\"limit\"\n                  type=\"number\"\n                  className=\"form-control form-control-solid\"\n                  placeholder=\"\"\n                />\n                {formik.errors.limit && formik.touched.limit && (\n                  <span className='text-danger'>\n                    {formik.errors.limit}\n                  </span>\n                )}\n              </div>\n              <div className=\"wrap-item wrap-item-col-4\">\n                <XDateRangePicker\n                  minDate={new Date()}\n                  startDate={new Date(formik.values.valid_from)}\n                  endDate={new Date(formik.values.valid_util)}\n                  onChange={(e) => {\n                    formik.setFieldValue('valid_from', moment(e.selection.startDate).format('YYYY-MM-DD HH:mm:ss'))\n                    formik.setFieldValue('valid_util', moment(e.selection.endDate).format('YYYY-MM-DD HH:mm:ss'))\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"input-form__bot\">\n              <LoadingButton\n                type=\"submit\"\n                variant='contained'\n                size=\"large\"\n                color=\"success\"\n                loading={isLoading}\n              >\n                Lưu thay đổi\n              </LoadingButton>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default VoucherFormPage"],"names":["VoucherFormPage","navigate","useNavigate","resultLoad","onCloseNoti","noti","useMessage","mutate","isLoading","useMutation","mutationFn","body","discountsApi","postDiscount","onSuccess","data","message","color","setTimeout","onError","error","variables","context","formik","useFormik","initialValues","title","coupon_code","description","discount_value","total","valid_from","moment","format","valid_util","limit","validationSchema","Yup","required","min","max","onSubmit","values","platform","discount_type","discount_unit","is_campaign","Number","minimum_order_value","_jsxs","_Fragment","children","_jsx","AppSnack","severity","open","openAlert","close","TitlePage","className","id","autoComplete","handleSubmit","XSwitch","value","label","onChange","handleChange","name","type","placeholder","errors","touched","XDateRangePicker","minDate","Date","startDate","endDate","e","setFieldValue","selection","LoadingButton","variant","size","loading"],"sourceRoot":""}