{"version":3,"file":"static/js/436.b18fe3cd.chunk.js","mappings":"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","sources":["app/pages/promotions/index.tsx","components/TitlePage/index.tsx"],"sourcesContent":["import { CircularProgress } from \"@mui/material\";\nimport { KTSVG } from \"_metronic/helpers\";\nimport { promotionApi } from \"app/api\";\nimport { Promotion } from \"app/interface\";\nimport { formatDate } from \"app/util\";\nimport { QR_KEY } from \"common\";\nimport { PageCircularProgress, XSwitch } from \"components\";\nimport TitlePage from \"components/TitlePage\";\nimport { FC } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Link } from \"react-router-dom\";\n\nfunction Promotions() {\n  const { data, isLoading } = useQuery({\n    queryKey: [QR_KEY.PROMOTION],\n    queryFn: () => promotionApi.getAll({\n      limit: 15,\n      page: 1\n    })\n  })\n  return (\n    <>\n      <TitlePage\n        element={\n          // METHOD?.includes(\"POST\") ?\n          <Link\n            to={{ pathname: \"/pages/promotions-form\" }}\n            className=\"btn btn-sm btn-primary\"\n          >\n            Tạo mới\n          </Link>\n          // :\n          // <></>\n        }\n        title=\"Danh sách Promotion\"\n      />\n      <div className={`card mb-5 mb-xl-8`}>\n        <div className='card-header border-0 pt-5'>\n          <h3 className='card-title align-items-start flex-column'>\n            <span className='card-label fw-bold fs-3 mb-1'>Promotion</span>\n            <span className='text-muted mt-1 fw-semobold fs-7'>Số lượng : {data?.total ?? 1}</span>\n          </h3>\n        </div>\n        <div className='card-body py-3'>\n          <div className='table-responsive'>\n            <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\n              <thead>\n                <tr className='fw-bold text-muted'>\n                  <th className='min-w-100px'>Image</th>\n                  <th className='min-w-150px'>Tên promotion</th>\n                  <th className='min-w-50px'>Popup</th>\n                  <th className='min-w-100px'>Từ ngày</th>\n                  <th className='min-w-100px'>Đến ngày</th>\n                  <th className='min-w-80px'></th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  data?.data?.map((item: Promotion, index: number) => <PromotionItem key={index} item={item} />)\n                }\n              </tbody>\n            </table>\n            <PageCircularProgress loading={isLoading} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst PromotionItem: FC<{ item: Promotion }> = ({ item }) => {\n  const qrClient = useQueryClient()\n  const { mutate, isLoading } = useMutation({\n    mutationFn: (id: number | string) => promotionApi.delete(id),\n    onSuccess: () => qrClient.invalidateQueries({ queryKey: QR_KEY.PROMOTION })\n  })\n  return (\n    <tr>\n      <td>\n        <div className='d-flex align-items-center'>\n          <div className='symbol symbol-100px me-5'>\n            <img style={{ objectFit: 'contain' }} src={item.media_url || ''} alt='' />\n          </div>\n        </div>\n      </td>\n      <td>\n        <div className='d-flex align-items-center'>\n          <div className='d-flex justify-content-start flex-column'>\n            <span className='text-dark fw-bold text-hover-primary fs-6'>\n              {item.name}\n            </span>\n            <span className='text-muted fw-semobold text-muted d-block fs-7'>\n              {formatDate(item.created_at)}\n            </span>\n          </div>\n        </div>\n      </td>\n      <td>\n        <XSwitch value={item.is_popup === 1 ? true : false} label=\"\" />\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {formatDate(item.valid_from)}\n        </span>\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {formatDate(item.valid_util)}\n        </span>\n      </td>\n      <td>\n        <div className='d-flex justify-content-end flex-shrink-0 tb-control'>\n          {\n            // METHOD?.includes(\"UPDATE\") &&\n            <Link\n              to={{\n                pathname: `/pages/promotions-form/${item.id}`\n              }}\n              aria-label='Xem chi tiết'\n              className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n            >\n              <KTSVG path='/media/icons/duotune/art/art005.svg' className='svg-icon-3' />\n            </Link>\n          }\n          <button onClick={() => mutate(item.id)} disabled={isLoading}\n            className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n          >\n            {\n              isLoading ?\n                <CircularProgress size={12} />\n                :\n                <KTSVG path='/media/icons/duotune/general/gen027.svg' className='svg-icon-3' />\n            }\n          </button>\n        </div>\n      </td>\n    </tr>\n  )\n}\n\n\nexport default Promotions;","import React from 'react';\nimport './style.scss'\n\ninterface IProps {\n    title: string\n    element?: JSX.Element\n}\n\nfunction TitlePage(props: IProps) {\n    const { title, element } = props;\n    return (\n        <div className='toolbar' id='kt_toolbar'>\n            <div id=\"kt_toolbar_container\" className='container-fluid d-flex flex-stack'>\n                <h1 className='d-flex align-items-center text-dark fw-bolder my-1 fs-3'>\n                    {title}\n                </h1>\n                {element}\n            </div>\n        </div>\n    );\n}\n\nexport default TitlePage;"],"names":["PromotionItem","item","qrClient","useQueryClient","useMutation","mutationFn","id","promotionApi","onSuccess","invalidateQueries","queryKey","QR_KEY","mutate","isLoading","className","style","objectFit","src","media_url","alt","name","formatDate","created_at","value","is_popup","label","valid_from","valid_util","to","pathname","path","onClick","disabled","size","useQuery","queryFn","limit","page","data","element","title","total","map","index","loading","props"],"sourceRoot":""}