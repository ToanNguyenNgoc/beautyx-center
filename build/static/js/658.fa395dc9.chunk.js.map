{"version":3,"file":"static/js/658.fa395dc9.chunk.js","mappings":"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","sources":["app/pages/discounts/index.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport TitlePage from 'components/TitlePage';\nimport { formatDate } from 'app/util/format';\nimport { DISCOUNTS_TYPE, DiscountsTypeElement } from 'app/util/fileType';\nimport FlatFormOrder from 'components/PlatForm';\nimport { KTSVG } from '_metronic/helpers';\nimport { IDiscountPar } from 'app/interface';\nimport { PageCircularProgress, XPagination } from 'components';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { QR_KEY } from 'common';\nimport { discountsApi } from 'app/api';\nimport queryString from 'query-string';\nimport { QrDiscount } from '@types';\nimport { FormControl, MenuItem, Select, SelectChangeEvent } from '@mui/material';\nimport { PLAT_FORM_ARR } from 'app/util';\nimport './style.scss'\nimport { debounce, identity, pickBy } from 'lodash';\nimport { ExportCode } from './module/discount-form'\nimport { ChangeEvent, useCallback } from 'react';\n\nfunction Discounts() {\n  // const { METHOD } = useVerifyRoute()\n  const location = useLocation()\n  const navigate = useNavigate()\n  const query = queryString.parse(location.search) as QrDiscount\n  const { data, isLoading } = useQuery({\n    queryKey: [QR_KEY.DISCOUNT_PAGE, query],\n    queryFn: () => discountsApi.getAll({\n      page: query?.page ?? 1,\n      limit: 15,\n      'filter[keyword]': query['filter[keyword]'],\n      'filter[filter_all]': true,\n      'filter[platform]': query['filter[platform]'],\n      'filter[discount_type]': query['filter[discount_type]'],\n      'sort': query.sort ?? '-created_at'\n    })\n  })\n  const discounts: IDiscountPar[] = data?.data ?? []\n  const onChangePage = (p: number) => {\n    const newQuery = {\n      ...query,\n      page: p\n    }\n    navigate({\n      pathname: location.pathname,\n      search: queryString.stringify(newQuery)\n    })\n  }\n  const queryClient = useQueryClient()\n  const { mutate } = useMutation({\n    mutationFn: (id: number | string) => discountsApi.deleteById(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries([QR_KEY.DISCOUNT_PAGE, query])\n    }\n  })\n  return (\n    <>\n      <TitlePage\n        element={\n          // METHOD?.includes(\"POST\") ?\n          <Link\n            to={{ pathname: \"/pages/discounts-form\" }}\n            className=\"btn btn-sm btn-primary\"\n          >\n            Tạo mới\n          </Link>\n          // :\n          // <></>\n        }\n        title=\"Danh sách Mã giảm giá\"\n      />\n      <div className={`card mb-5 mb-xl-8`}>\n        <div className='card-header border-0 pt-5'>\n          <h3 className='card-title align-items-start flex-column'>\n            <span className='card-label fw-bold fs-3 mb-1'>Mã giảm giá</span>\n            <span className='text-muted mt-1 fw-semobold fs-7'>Số lượng : {data?.total ?? 1}</span>\n          </h3>\n        </div>\n        <Filter query={query} />\n        <div className='card-body py-3'>\n          <div className='table-responsive'>\n            <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\n              <thead>\n                <tr className='fw-bold text-muted'>\n                  {/* <th className='min-w-120px'>Mã</th> */}\n                  <th className='min-w-150px'>Tiêu đề</th>\n                  <th className='min-w-80px'>Ưu tiên</th>\n                  {/* <th className='min-w-150px'>Mô tả</th> */}\n                  <th className='min-w-150px'>Hình thức giảm</th>\n                  {/* <th className='min-w-150px'>Loại giảm giá</th> */}\n                  <th className='min-w-100px'>Từ ngày</th>\n                  <th className='min-w-100px'>Đến ngày</th>\n                  <th className='min-w-100px text-end'>Nền tảng</th>\n                  <th className='min-w-100px text-end'>Số lượng mã</th>\n                  <th className='min-w-150px text-end'>Sử dụng/1 khách</th>\n                  <th className='min-w-100px text-end'>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  discounts.map((item: IDiscountPar, index: number) => (\n                    <tr key={index} >\n                      <td>\n                        <div className='d-flex align-items-center'>\n                          <div className='symbol symbol-45px me-5'>\n                            <img src={item.items[0]?.productable?.image_url} alt='' />\n                          </div>\n                          <div className='d-flex justify-content-start flex-column'>\n                            <span className='text-dark fw-bold text-hover-primary fs-6'>\n                              {item.title}\n                            </span>\n                            <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                              {formatDate(item.created_at)}\n                            </span>\n                          </div>\n                        </div>\n                      </td>\n                      <td>\n                        <span className='text-dark text-center fw-bold d-block mb-1 fs-7'>\n                          {item.priority}\n                        </span>\n                      </td>\n                      <td>\n                        <div className='d-flex flex-column w-100 me-2'>\n                          <DiscountsTypeElement\n                            TYPE={item.discount_type}\n                          />\n                        </div>\n                      </td>\n                      <td>\n                        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                          {formatDate(item.valid_from)}\n                        </span>\n                      </td>\n                      <td>\n                        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                          {formatDate(item.valid_util)}\n                        </span>\n                      </td>\n                      <td>\n                        <FlatFormOrder\n                          platForm={item.platform}\n                        />\n                      </td>\n                      <td>\n                        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                          {item.total ?? 'Không giới hạn'}\n                        </span>\n                      </td>\n                      <td>\n                        <span className='text-muted text-end fw-semobold text-muted d-block fs-7'>\n                          {item.limit ?? 'Không giới hạn'}\n                        </span>\n                      </td>\n                      <td>\n                        <div className='d-flex justify-content-end flex-shrink-0 tb-control'>\n                          {\n                            // METHOD?.includes(\"UPDATE\") &&\n                            <button\n                              // to={{\n                              //   pathname: `/pages/discounts-form/${item.uuid}`,\n                              // }}\n                              onClick={() => navigate(`/pages/discounts-form/${item.uuid}`, { state: item })}\n                              aria-label='Xem chi tiết'\n                              className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n                            >\n                              <KTSVG path='/media/icons/duotune/art/art005.svg' className='svg-icon-3' />\n                            </button>\n                          }\n                          {\n                            // METHOD?.includes(\"GET_BY_ID\") &&\n                            (item.platform === 'SHOPEE' || item.platform === 'VINID' || item.platform === 'BEAUTYX') &&\n                            <button\n                              className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n                              onClick={() => navigate(`/pages/discounts/${item.uuid}`)}\n                            >\n                              <KTSVG\n                                path='/media/icons/duotune/general/gen019.svg'\n                                className='svg-icon-3'\n                              />\n                            </button>\n                          }\n                          {\n                            // METHOD?.includes(\"DELETE\") &&\n                            // <button\n                            //   className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n                            //   onClick={() =>mutate(item.id)}\n                            // >\n                            //   <KTSVG\n                            //     path='/media/icons/duotune/arrows/arr015.svg'\n                            //     className='svg-icon-3'\n                            //   />\n                            // </button>\n                          }\n                          {\n                            (item.platform === 'SHOPEE' || item.platform === 'VINID' || item.platform === 'BEAUTYX') &&\n                            <ExportCode\n                              title=''\n                              size=\"small\"\n                              discount={item}\n                            />\n                          }\n                        </div>\n                      </td>\n                    </tr>\n                  ))\n                }\n              </tbody>\n            </table>\n            <PageCircularProgress loading={isLoading} />\n            <XPagination\n              totalPage={data?.last_page ?? 1}\n              onChangePage={onChangePage}\n              defaultPage={query?.page ?? 1}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\nconst Filter = ({ query }: { query: QrDiscount }) => {\n  const sorts = [\n    { sort: '-created_at', title: 'Ngày tạo' },\n    { sort: '-total', title: 'Số lượng mã' },\n    { sort: '-priority', title: 'Độ ưu tiên' },\n  ]\n  const navigate = useNavigate()\n  const location = useLocation()\n  const debounceKeyword = useCallback(\n    debounce((keyword) => navigate(\n      keyword.trim() === \"\" ?\n        `${location.pathname}`\n        :\n        `${location.pathname}?filter[keyword]=${keyword}`\n      , { replace: true }), 600),\n    []\n  );\n  const onInputChange = (e: ChangeEvent<HTMLInputElement>) => debounceKeyword(e.target.value)\n  const handleChange = (event: SelectChangeEvent) => {\n    const newQuery = {\n      ...query,\n      'page': 1,\n      'filter[platform]': event.target.value !== \"\" ? event.target.value : \"\"\n    }\n    navigate({\n      pathname: location.pathname,\n      search: queryString.stringify(pickBy(newQuery, identity))\n    })\n  };\n  const onChangeType = (e: SelectChangeEvent) => {\n    const newQuery: QrDiscount = {\n      ...query,\n      'page': 1,\n      'filter[discount_type]': e.target.value !== \"\" ? e.target.value : \"\"\n    }\n    navigate({\n      pathname: location.pathname,\n      search: queryString.stringify(pickBy(newQuery, identity))\n    })\n  }\n  const onChangeSort = (e: SelectChangeEvent) => {\n    const newQuery: QrDiscount = {\n      ...query,\n      'sort': e.target.value\n    }\n    navigate({\n      pathname: location.pathname,\n      search: queryString.stringify(newQuery)\n    })\n  }\n  return (\n    <div className=\"d-flex justify-content-between filter-cnt\">\n      <div>\n        <label className=\"filter-row_label\">Tìm kiếm</label>\n        <input\n          type=\"text\" onChange={onInputChange}\n          className=\"form-control form-control-solid py-2 px-6\"\n          placeholder=\"Tiêu đề...\"\n        />\n      </div>\n      <div className=\"filter-row\">\n        <div className=\"filter-row_platform\">\n          <label className=\"filter-row_label\">Hình thức giảm giá</label>\n          <FormControl sx={{ m: 1, minWidth: 150 }} size=\"small\">\n            <Select\n              labelId=\"demo-select-small-label\"\n              id=\"demo-select-small\"\n              value={query['filter[discount_type]'] ?? ''}\n              onChange={onChangeType}\n            >\n              <MenuItem value=\"\">\n                <em>Tất cả</em>\n              </MenuItem>\n              {\n                DISCOUNTS_TYPE.map(item => (\n                  <MenuItem key={item.id} value={item.TYPE}>{item.title}</MenuItem>\n                ))\n              }\n            </Select>\n          </FormControl>\n        </div>\n        <div className=\"filter-row_platform\">\n          <label className=\"filter-row_label\">Nền tảng</label>\n          <FormControl sx={{ m: 1, minWidth: 150 }} size=\"small\">\n            <Select\n              labelId=\"demo-select-small-label\"\n              id=\"demo-select-small\"\n              value={query['filter[platform]'] ?? ''}\n              onChange={handleChange}\n            >\n              <MenuItem value=\"\">\n                <em>Tất cả</em>\n              </MenuItem>\n              {\n                PLAT_FORM_ARR.map(item => (\n                  <MenuItem key={item} value={item}>{item}</MenuItem>\n                ))\n              }\n            </Select>\n          </FormControl>\n        </div>\n        <div className=\"filter-row_platform\">\n          <label className=\"filter-row_label\">Sắp xếp theo</label>\n          <FormControl sx={{ m: 1, minWidth: 150 }} size=\"small\">\n            <Select\n              labelId=\"demo-select-small-label\"\n              id=\"demo-select-small\"\n              value={query.sort ?? sorts[0].sort}\n              onChange={onChangeSort}\n            >\n              {\n                sorts.map(item => (\n                  <MenuItem key={item.sort} value={item.sort}>{item.title}</MenuItem>\n                ))\n              }\n            </Select>\n          </FormControl>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Discounts;"],"names":["Filter","_ref","_query$filterDiscoun","_query$filterPlatfor","_query$sort2","query","sorts","sort","title","navigate","useNavigate","location","useLocation","debounceKeyword","useCallback","debounce","keyword","trim","pathname","replace","_jsxs","className","children","_jsx","type","onChange","e","target","value","placeholder","FormControl","sx","m","minWidth","size","Select","labelId","id","newQuery","search","queryString","pickBy","identity","MenuItem","DISCOUNTS_TYPE","map","item","TYPE","event","PLAT_FORM_ARR","_data$data","_data$total","_data$last_page","_query$page2","data","isLoading","useQuery","queryKey","QR_KEY","DISCOUNT_PAGE","queryFn","_query$page","_query$sort","discountsApi","getAll","page","limit","discounts","queryClient","useQueryClient","mutate","useMutation","mutationFn","deleteById","onSuccess","invalidateQueries","_Fragment","TitlePage","element","Link","to","total","index","_item$items$","_item$items$$producta","_item$total","_item$limit","src","items","productable","image_url","alt","formatDate","created_at","priority","DiscountsTypeElement","discount_type","valid_from","valid_util","FlatFormOrder","platForm","platform","onClick","uuid","state","KTSVG","path","ExportCode","discount","PageCircularProgress","loading","XPagination","totalPage","last_page","onChangePage","p","defaultPage"],"sourceRoot":""}