"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[658,700],{46423:(e,l,t)=>{t.r(l),t.d(l,{default:()=>_});var s=t(86971),a=t(51318),i=t(93511),n=t(96356),d=t(2011),r=t(50301),c=t(85450),m=t(55854),o=t(82907),h=t(6171),x=t(73589),u=t(9370),p=t(87561),f=t(83521),j=t(88988),g=t(42807),v=t(53536),b=t(65104),N=t(65043),y=t(70579);const w=e=>{var l,t,a;let{query:i}=e;const n=[{sort:"-created_at",title:"Ng\xe0y t\u1ea1o"},{sort:"-total",title:"S\u1ed1 l\u01b0\u1ee3ng m\xe3"},{sort:"-priority",title:"\u0110\u1ed9 \u01b0u ti\xean"}],r=(0,s.Zp)(),c=(0,s.zy)(),m=(0,N.useCallback)((0,v.debounce)((e=>r(""===e.trim()?`${c.pathname}`:`${c.pathname}?filter[keyword]=${e}`,{replace:!0})),600),[]);return(0,y.jsxs)("div",{className:"d-flex justify-content-between filter-cnt",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"filter-row_label",children:"T\xecm ki\u1ebfm"}),(0,y.jsx)("input",{type:"text",onChange:e=>m(e.target.value),className:"form-control form-control-solid py-2 px-6",placeholder:"Ti\xeau \u0111\u1ec1..."})]}),(0,y.jsxs)("div",{className:"filter-row",children:[(0,y.jsxs)("div",{className:"filter-row_platform",children:[(0,y.jsx)("label",{className:"filter-row_label",children:"H\xecnh th\u1ee9c gi\u1ea3m gi\xe1"}),(0,y.jsx)(p.A,{sx:{m:1,minWidth:150},size:"small",children:(0,y.jsxs)(f.A,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(l=i["filter[discount_type]"])&&void 0!==l?l:"",onChange:e=>{const l={...i,page:1,"filter[discount_type]":""!==e.target.value?e.target.value:""};r({pathname:c.pathname,search:u.stringify((0,v.pickBy)(l,v.identity))})},children:[(0,y.jsx)(j.A,{value:"",children:(0,y.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),d.uI.map((e=>(0,y.jsx)(j.A,{value:e.TYPE,children:e.title},e.id)))]})})]}),(0,y.jsxs)("div",{className:"filter-row_platform",children:[(0,y.jsx)("label",{className:"filter-row_label",children:"N\u1ec1n t\u1ea3ng"}),(0,y.jsx)(p.A,{sx:{m:1,minWidth:150},size:"small",children:(0,y.jsxs)(f.A,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(t=i["filter[platform]"])&&void 0!==t?t:"",onChange:e=>{const l={...i,page:1,"filter[platform]":""!==e.target.value?e.target.value:""};r({pathname:c.pathname,search:u.stringify((0,v.pickBy)(l,v.identity))})},children:[(0,y.jsx)(j.A,{value:"",children:(0,y.jsx)("em",{children:"T\u1ea5t c\u1ea3"})}),g.Te.map((e=>(0,y.jsx)(j.A,{value:e,children:e},e)))]})})]}),(0,y.jsxs)("div",{className:"filter-row_platform",children:[(0,y.jsx)("label",{className:"filter-row_label",children:"S\u1eafp x\u1ebfp theo"}),(0,y.jsx)(p.A,{sx:{m:1,minWidth:150},size:"small",children:(0,y.jsx)(f.A,{labelId:"demo-select-small-label",id:"demo-select-small",value:null!==(a=i.sort)&&void 0!==a?a:n[0].sort,onChange:e=>{const l={...i,sort:e.target.value};r({pathname:c.pathname,search:u.stringify(l)})},children:n.map((e=>(0,y.jsx)(j.A,{value:e.sort,children:e.title},e.sort)))})})]})]})]})},_=function(){var e,l,t,p;const f=(0,s.zy)(),j=(0,s.Zp)(),v=u.parse(f.search),{data:N,isLoading:_}=(0,o.useQuery)({queryKey:[h.Eo.DISCOUNT_PAGE,v],queryFn:()=>{var e,l;return x.x4.getAll({page:null!==(e=null===v||void 0===v?void 0:v.page)&&void 0!==e?e:1,limit:15,"filter[keyword]":v["filter[keyword]"],"filter[filter_all]":!0,"filter[platform]":v["filter[platform]"],"filter[discount_type]":v["filter[discount_type]"],sort:null!==(l=v.sort)&&void 0!==l?l:"-created_at"})}}),k=null!==(e=null===N||void 0===N?void 0:N.data)&&void 0!==e?e:[],A=(0,o.useQueryClient)(),{mutate:E}=(0,o.useMutation)({mutationFn:e=>x.x4.deleteById(e),onSuccess:()=>{A.invalidateQueries([h.Eo.DISCOUNT_PAGE,v])}});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.A,{element:(0,y.jsx)("div",{children:(0,y.jsx)(a.N_,{to:{pathname:"/pages/discounts-form"},className:"btn btn-sm btn-primary",style:{marginLeft:12},children:"T\u1ea1o m\u1edbi m\xe3 gi\u1ea3m gi\xe1"})}),title:"Danh s\xe1ch M\xe3 gi\u1ea3m gi\xe1"}),(0,y.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,y.jsx)("div",{className:"card-header border-0 pt-5",children:(0,y.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,y.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"M\xe3 gi\u1ea3m gi\xe1"}),(0,y.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:["S\u1ed1 l\u01b0\u1ee3ng : ",null!==(l=null===N||void 0===N?void 0:N.total)&&void 0!==l?l:1]})]})}),(0,y.jsx)(w,{query:v}),(0,y.jsx)("div",{className:"card-body py-3",children:(0,y.jsxs)("div",{className:"table-responsive",children:[(0,y.jsxs)("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"fw-bold text-muted",children:[(0,y.jsx)("th",{className:"min-w-150px",children:"Ti\xeau \u0111\u1ec1"}),(0,y.jsx)("th",{className:"min-w-80px",children:"\u01afu ti\xean"}),(0,y.jsx)("th",{className:"min-w-150px",children:"H\xecnh th\u1ee9c gi\u1ea3m"}),(0,y.jsx)("th",{className:"min-w-150px",children:"Gi\xe1 gi\u1ea3m"}),(0,y.jsx)("th",{className:"min-w-100px",children:"T\u1eeb ng\xe0y"}),(0,y.jsx)("th",{className:"min-w-100px",children:"\u0110\u1ebfn ng\xe0y"}),(0,y.jsx)("th",{className:"min-w-100px text-end",children:"N\u1ec1n t\u1ea3ng"}),(0,y.jsx)("th",{className:"min-w-100px text-end",children:"S\u1ed1 l\u01b0\u1ee3ng m\xe3"}),(0,y.jsx)("th",{className:"min-w-150px text-end",children:"S\u1eed d\u1ee5ng/1 kh\xe1ch"}),(0,y.jsx)("th",{className:"min-w-100px text-end",children:"Actions"})]})}),(0,y.jsx)("tbody",{children:k.map(((e,l)=>{var t,s,a,i;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("div",{className:"symbol symbol-45px me-5",children:(0,y.jsx)("img",{src:null===(t=e.items[0])||void 0===t||null===(s=t.productable)||void 0===s?void 0:s.image_url,alt:""})}),(0,y.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,y.jsx)("span",{className:"text-dark fw-bold text-hover-primary fs-6",children:e.title}),(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,n.Yq)(e.created_at)})]})]})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-dark text-center fw-bold d-block mb-1 fs-7",children:e.priority})}),(0,y.jsx)("td",{children:(0,y.jsx)("div",{className:"d-flex flex-column w-100 me-2",children:(0,y.jsx)(d.XJ,{TYPE:e.discount_type})})}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex flex-column w-100 me-2",children:[(0,n.$g)(e.discount_value||0),"PERCENT"===e.discount_type?"%":"\u0111"]})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,n.Yq)(e.valid_from)})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:(0,n.Yq)(e.valid_util)})}),(0,y.jsx)("td",{children:(0,y.jsx)(r.A,{platForm:e.platform})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:null!==(a=e.total)&&void 0!==a?a:"Kh\xf4ng gi\u1edbi h\u1ea1n"})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted text-end fw-semobold text-muted d-block fs-7",children:null!==(i=e.limit)&&void 0!==i?i:"Kh\xf4ng gi\u1edbi h\u1ea1n"})}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex justify-content-end flex-shrink-0 tb-control",children:[(0,y.jsx)("button",{onClick:()=>j(`/pages/discounts-form/${e.uuid}`,{state:e}),"aria-label":"Xem chi ti\u1ebft",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,y.jsx)(c.aO,{path:"/media/icons/duotune/art/art005.svg",className:"svg-icon-3"})}),("SHOPEE"===e.platform||"VINID"===e.platform||"BEAUTYX"===e.platform||e.platform===g.Jv.VIETTEL_MONEY||e.platform===g.Jv.LIVWELL||e.platform===g.Jv.TAPTAP)&&(0,y.jsx)("button",{className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:()=>j(`/pages/discounts/${e.uuid}`),children:(0,y.jsx)(c.aO,{path:"/media/icons/duotune/general/gen019.svg",className:"svg-icon-3"})}),("SHOPEE"===e.platform||"VINID"===e.platform||"BEAUTYX"===e.platform||e.platform===g.Jv.VIETTEL_MONEY||e.platform===g.Jv.LIVWELL||e.platform===g.Jv.TAPTAP)&&(0,y.jsx)(b.ExportCode,{title:"",size:"small",discount:e}),(0,y.jsx)("button",{onClick:()=>E(e.id),"aria-label":"Xem chi ti\u1ebft",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:(0,y.jsx)(c.aO,{path:"/media/icons/duotune/general/gen027.svg",className:"svg-icon-3"})})]})})]},l)}))})]}),(0,y.jsx)(m.kJ,{loading:_}),(0,y.jsx)(m.f_,{totalPage:null!==(t=null===N||void 0===N?void 0:N.last_page)&&void 0!==t?t:1,onChangePage:e=>{const l={...v,page:e};j({pathname:f.pathname,search:u.stringify(l)})},defaultPage:null!==(p=null===v||void 0===v?void 0:v.page)&&void 0!==p?p:1})]})})]})]})}}}]);
//# sourceMappingURL=658.83b17d13.chunk.js.map