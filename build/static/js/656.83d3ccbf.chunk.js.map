{"version":3,"file":"static/js/656.83d3ccbf.chunk.js","mappings":"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","sources":["app/pages/banners/index.tsx","components/TitlePage/index.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\n// import Draggable from 'react-draggable';\nimport React, { FC, useState } from \"react\";\nimport './style.scss';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport {\n  SortableContainer,\n  SortableContainerProps,\n  SortableElement,\n  SortableElementProps,\n  SortableHandle\n} from \"react-sortable-hoc\";\nimport { arrayMoveImmutable } from \"array-move\";\n// import { useVerifyRoute } from \"app/hooks\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { QR_KEY } from \"common\";\nimport bannerApi from \"app/api/bannerApi\";\nimport { IBanner } from \"app/interface\";\nimport TitlePage from \"components/TitlePage\";\nimport { KTSVG, toAbsoluteUrl } from \"_metronic/helpers\";\nimport { BannerTypeElement, formatDate } from \"app/util\";\nimport moment from \"moment\";\nimport { Button, CircularProgress } from \"@mui/material\";\nimport { PageCircularProgress } from \"components\";\n\nfunction BannerWidget(props: any) {\n  const navigate = useNavigate()\n  // const { METHOD } = useVerifyRoute()\n  const [banners, setBanners] = useState<IBanner[]>([])\n  useQuery({\n    queryKey: [QR_KEY.BANNER],\n    queryFn: () => bannerApi.banners(),\n    onSuccess(data) {\n      setBanners(data.data)\n    },\n  })\n  const onSortEnd = (oldIndex: number, newIndex: number) => {\n    setBanners(arrayMoveImmutable(banners, oldIndex, newIndex))\n  }\n\n\n  return (\n    <>\n      <TitlePage\n        element={\n          // METHOD?.includes(\"POST\") &&\n          <Button\n            onClick={() => navigate('/pages/banners-form', {\n              state: banners[0]?.priority\n            })}\n            variant=\"contained\"\n            size=\"large\"\n          >\n            Tạo mới banner\n          </Button>\n        }\n        title=\"Danh sách banners\"\n      />\n      <div className=\"row g-5 gx-xxl-8 table-banner\">\n        <div className={`card mb-5 mb-xl-8`}>\n          <div className='card-header border-0 pt-5'>\n            <h3 className='card-title align-items-start flex-column'>\n              <span className='card-label fw-bold fs-3 mb-1'>Banners Campaigns</span>\n              <span className='text-muted mt-1 fw-semobold fs-7'>{banners.length}</span>\n            </h3>\n          </div>\n          {/* end::Header */}\n          {/* begin::Body */}\n          <div className='card-body py-3'>\n            {/* begin::Table container */}\n            <div className='table-responsive'>\n              {/* begin::Table */}\n              <table className='table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4'>\n                {/* begin::Table head */}\n                <thead>\n                  <tr className='fw-bold text-muted'>\n                    <th className='w-25px'>\n                      <div className='form-check form-check-sm form-check-custom form-check-solid'>\n\n                      </div>\n                    </th>\n                    <th className='min-w-150px'>Banner</th>\n                    {/* <th className='min-w-50px'>Độ ưu tiên</th> */}\n                    <th className='min-w-140px'>Loại</th>\n                    <th className='min-w-140px'>Ngày hết hạn</th>\n                    <th className='min-w-140px'>Nền tảng</th>\n                    <th className='min-w-100px text-end'>Actions</th>\n                  </tr>\n                </thead>\n                {/* end::Table head */}\n                {/* begin::Table body */}\n                <SortableComponent\n                  onSortEnd={onSortEnd}\n                  banners={banners}\n                />\n                {/* end::Table body */}\n              </table>\n              {/* end::Table */}\n              <PageCircularProgress loading={banners.length === 0} />\n            </div>\n            {/* end::Table container */}\n          </div>\n        </div>\n      </div>\n      {/* <SortableComponent /> */}\n    </>\n  )\n}\nexport default BannerWidget;\n\ninterface SortableComponentProps {\n  banners: IBanner[]\n  onSortEnd: (oldIndex: number, newIndex: number) => void\n}\n\ninterface ISortableItem extends SortableElementProps {\n  children: React.ReactNode\n  className?: string\n}\ninterface ISortableContainer extends SortableContainerProps {\n  children: React.ReactNode\n  className?: string\n}\n\nconst SortableItem: React.ComponentClass<ISortableItem, any> = SortableElement(\n  ({ children, className }: { children: React.ReactNode; className: string }) => (\n    <tr>{children}</tr>\n  )\n)\ninterface ISortableHandleElement {\n  children: React.ReactNode\n  className?: string\n}\n\nconst SortableList: React.ComponentClass<ISortableContainer, any> = SortableContainer(\n  ({ children, className }: { children: React.ReactNode; className: string }) => {\n    return <tbody>{children}</tbody>\n  }\n)\nconst DndTrigger: React.ComponentClass<ISortableHandleElement, any> = SortableHandle(\n  ({ children, className }: { children: React.ReactNode; className: string }) => (\n    <div className={className || ''}>{children}</div>\n  )\n)\nconst SortableComponent: FC<SortableComponentProps> = ({ banners, onSortEnd }) => {\n  const handleSortEnd = ({ oldIndex, newIndex }: { oldIndex: number; newIndex: number }): void => {\n    onSortEnd(oldIndex, newIndex)\n  }\n  // const { METHOD } = useVerifyRoute()\n  const qrClient = useQueryClient()\n  const { mutate, isLoading } = useMutation({\n    mutationFn: (id: number) => bannerApi.deleteBanner(id),\n    onSuccess: () => {\n      qrClient.invalidateQueries({ queryKey: [QR_KEY.BANNER] })\n    },\n    onError: () => { }\n  })\n  return (\n    <SortableList\n      lockAxis=\"y\"\n      lockToContainerEdges={true}\n      useDragHandle\n      onSortEnd={handleSortEnd}\n\n    >\n      {banners.map((item: IBanner, index: number) => (\n        <SortableItem\n          key={`item-${index}`}\n          index={index} className=\"item\"\n        >\n          <td>\n            {\n              // METHOD?.includes(\"UPDATE\") &&\n              <DndTrigger className=\"itemTrigger\">\n                <img src={toAbsoluteUrl(\"/media/icons/duotune/abstract/abs015.svg\")} alt=\"\" />\n              </DndTrigger>\n            }\n          </td>\n          <td>\n            <div className='d-flex align-items-center'>\n              <div className='symbol symbol-45px me-5'>\n                <img className=\"banner-item__img\" src={item.imageURL} alt='' />\n              </div>\n              <div className='d-flex justify-content-start flex-column'>\n                <span className='text-dark fw-bold text-hover-primary fs-6'>\n                  {item.name}\n                </span>\n                <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                  {formatDate(item.created_at)}\n                </span>\n              </div>\n            </div>\n          </td>\n          {/* <td>\n                        <span className='text-dark fw-bold text-hover-primary fs-6'>\n                            {item.priority}\n                        </span>\n                    </td> */}\n          <td>\n            <BannerTypeElement\n              TYPE={item.type}\n            />\n          </td>\n          <td>\n            <span className='text-dark fw-bold text-hover-primary d-block fs-6'>\n              {item.expires_at ? moment(item.expires_at).format('DD/MM/YYYY') : 'Không thời hạn'}\n            </span>\n          </td>\n          <td>\n            <span className='text-dark fw-bold text-hover-primary d-block fs-6'>\n              Tất cả\n            </span>\n          </td>\n          <td>\n            <div className='d-flex justify-content-end flex-shrink-0'>\n              {\n                // METHOD?.includes(\"UPDATE\") &&\n                <Link\n                  to={{\n                    pathname: `/pages/banners-form/${item.id}`,\n                  }}\n                  className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1'\n                >\n                  <KTSVG path='/media/icons/duotune/art/art005.svg' className='svg-icon-3' />\n                </Link>\n              }\n              <button\n                onClick={() => mutate(item.id)} disabled={isLoading}\n                className='btn btn-icon btn-bg-light btn-active-color-primary btn-sm'\n              >\n                {\n                  isLoading ?\n                    <CircularProgress size={12} />\n                    :\n                    <KTSVG path='/media/icons/duotune/general/gen027.svg' className='svg-icon-3' />\n                }\n              </button>\n            </div>\n          </td>\n        </SortableItem>\n      ))}\n    </SortableList>\n  )\n}\n\n","import React from 'react';\nimport './style.scss'\n\ninterface IProps {\n    title: string\n    element?: JSX.Element\n}\n\nfunction TitlePage(props: IProps) {\n    const { title, element } = props;\n    return (\n        <div className='toolbar' id='kt_toolbar'>\n            <div id=\"kt_toolbar_container\" className='container-fluid d-flex flex-stack'>\n                <h1 className='d-flex align-items-center text-dark fw-bolder my-1 fs-3'>\n                    {title}\n                </h1>\n                {element}\n            </div>\n        </div>\n    );\n}\n\nexport default TitlePage;"],"names":["props","navigate","useNavigate","useState","banners","setBanners","useQuery","queryKey","QR_KEY","queryFn","bannerApi","onSuccess","data","element","onClick","state","priority","variant","size","title","className","length","SortableComponent","onSortEnd","oldIndex","newIndex","arrayMoveImmutable","loading","SortableItem","SortableElement","children","SortableList","SortableContainer","DndTrigger","SortableHandle","qrClient","useQueryClient","useMutation","mutationFn","id","invalidateQueries","onError","mutate","isLoading","lockAxis","lockToContainerEdges","useDragHandle","map","item","index","src","toAbsoluteUrl","alt","imageURL","name","formatDate","created_at","TYPE","type","expires_at","moment","format","to","pathname","path","disabled"],"sourceRoot":""}