{"version":3,"file":"static/js/892.b2dab5b5.chunk.js","mappings":"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","sources":["app/pages/discounts/module/discount-detail/index.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { Link, useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { IDiscountPar } from 'app/interface/discounts';\nimport TitlePage from 'components/TitlePage';\nimport FlatFormOrder from 'components/PlatForm';\nimport { useQuery } from 'react-query';\nimport { QR_KEY } from 'common';\nimport { discountsApi } from 'app/api';\nimport moment from 'moment';\nimport { PageCircularProgress, XPagination } from 'components';\nimport { ExportCode } from 'app/pages/discounts/module/discount-form';\nimport queryString from 'query-string'\nimport \"./style.scss\";\n\nfunction DiscountDetail() {\n    // const { METHOD } = useVerifyRoute()\n    const navigate = useNavigate()\n    const params: any = useParams()\n    const location = useLocation()\n    const query: any = queryString.parse(location.search)\n    const state = location.state as IDiscountPar | null\n    const { data } = useQuery({\n        queryKey: [QR_KEY.DISCOUNT, params.id],\n        queryFn: () => discountsApi.getDiscountDetail({ id: params.id }),\n        enabled: !state ? true : false,\n        onError: () => navigate(\"/error/404\")\n    })\n    const discount = state ?? data?.context\n    const { data: dataCode } = useQuery({\n        queryKey: [QR_KEY.DISCOUNT_CODE, params.id, query],\n        queryFn: () => discountsApi.getCodeIsCampaign({\n            uuid: params.id,\n            limit: 50,\n            page: query?.page ?? 1\n        }),\n        enabled: params?.id ? true : false\n    })\n    const onChangePage = (page: number) => {\n        const newQuery = { page: page }\n        navigate({\n            pathname: location.pathname,\n            search: queryString.stringify(newQuery),\n        })\n    }\n\n    return (\n        discount ?\n            <>\n                <TitlePage\n                    title={discount?.title ?? ''}\n                    element={\n                        // METHOD?.includes(\"UPDATE\") ?\n                        <Link\n                            to={{\n                                pathname: `/pages/discounts-form/${discount?.uuid}`\n                            }}\n                            className=\"btn btn-sm btn-success\">Thay đổi thông tin\n                        </Link>\n                        // :\n                        // <></>\n                    }\n                />\n                <div className=\"container\">\n                    <div className=\"detail\">\n                        <div className=\"d-flex justify-content-between align-items-start\">\n                            <p className=\"fw-semobold d-block fs-4\">Danh sách mã giảm giá ({discount.total} mã)</p>\n                            <div>\n                                <div className=\"d-flex align-items-center\">\n                                    <label style={{ marginRight: '8px' }}>Nền tảng</label>\n                                    <FlatFormOrder\n                                        platForm={discount?.platform ?? ''}\n                                    />\n                                </div>\n                                <div className=\"d-flex align-items-center\">\n                                    <label style={{ marginRight: '8px' }}>Áp dụng từ</label>\n                                    {\n                                        (discount?.valid_from && discount?.valid_util) &&\n                                        <div className='d-flex align-items-center'>\n                                            <span className=\"fw-semobold d-block fs-6\">{moment(discount.valid_from).format('DD/MM/YYYY')}</span>\n                                            -\n                                            <span className=\"fw-semobold d-block fs-6\">{moment(discount.valid_util).format('DD/MM/YYYY')}</span>\n                                        </div>\n                                    }\n                                </div>\n                                <div className='d-flex justify-content-end mt-2 mb-2'>\n                                    <ExportCode\n                                        discount={discount}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <table className=\"table table-rounded table-row-bordered border gy-7 gs-7\">\n                            <thead>\n                                <tr className=\"fw-bold fs-6 text-gray-800 border-bottom-2 border-gray-200\">\n                                    <th>STT</th>\n                                    <th>Mã giảm giá</th>\n                                    <th>Trạng thái sử dụng</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {\n                                    dataCode?.data?.map((item, index) => (\n                                        <tr key={index} className={item.status === \"1\" ? \"\" : \"table-active\"}>\n                                            <td>{index + 1}</td>\n                                            <td>{item.coupon_code}</td>\n                                            <td>\n                                                {item.status === '1' ? 'Chưa sử dụng' : 'Đã sử dụng'}\n                                            </td>\n                                        </tr>\n                                    ))\n                                }\n                            </tbody>\n                        </table>\n                        <XPagination\n                            totalPage={dataCode?.total ? Math.ceil(dataCode.total / 50) : 1}\n                            defaultPage={query?.page ?? 1}\n                            onChangePage={onChangePage}\n                        />\n                    </div>\n                </div>\n            </>\n            :\n            <PageCircularProgress loading={true} />\n    );\n}\n\nexport default DiscountDetail;"],"names":["navigate","useNavigate","params","useParams","location","useLocation","query","queryString","search","state","data","useQuery","queryKey","QR_KEY","id","queryFn","discountsApi","enabled","onError","discount","context","dataCode","uuid","limit","page","TitlePage","title","element","to","pathname","className","total","style","marginRight","platForm","platform","valid_from","valid_util","moment","format","ExportCode","map","item","index","status","coupon_code","totalPage","Math","ceil","defaultPage","onChangePage","newQuery","loading"],"sourceRoot":""}