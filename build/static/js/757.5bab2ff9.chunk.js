"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[757],{23757:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(65043),l=t(93511),o=t(39842),i=t(16422),d=t(897),n=t(85450),r=t(42807),c=t(60446),_=t.n(c),m=t(61485),p=t(73589);const h={container:"style_container__+81jf",header:"style_header__zM1cn",header_title:"style_header_title__Na18B",header_created:"style_header_created__inFcF",body:"style_body__ygHJ1",body_head_cnt:"style_body_head_cnt__ydNQZ",body_org:"style_body_org__ks0kn",body_org_img:"style_body_org_img__u-856",body_org_detail:"style_body_org_detail__Tqs3N",org_name:"style_org_name__QGV+j",org_address:"style_org_address__vq-FB",org_contact:"style_org_contact__YXKFR",org_contact_title:"style_org_contact_title__KmmWm",body_approve_detail:"style_body_approve_detail__mhwUg",body_approve_section:"style_body_approve_section__qXLJ+",body_approve_title:"style_body_approve_title__NxpbT",body_approve_btn:"style_body_approve_btn__zzYaK",approve_list:"style_approve_list__5HUQL",approve_list_show:"style_approve_list_show__-MsYE",approve_list_item:"style_approve_list_item__iAYlh",body_log_cnt:"style_body_log_cnt__EcGgV",body_log_left:"style_body_log_left__r8uJC",body_log_right:"style_body_log_right__CoNIq",approve_logs:"style_approve_logs__tYunn",approve_logs_item:"style_approve_logs_item__gi-xC",log_item:"style_log_item__hDeI5",log_item_date:"style_log_item_date__roojc",approve_bot:"style_approve_bot__4+1-J"};var x=t(2011),g=t(55854),y=t(70579);const b=function(e){var s,t,l;const{open:n,setOpen:c,approve:b}=e,v=(0,o.S3)(),[j,u]=(0,a.useState)({log:"",status:b.status}),{noti:N,firstLoad:f,resultLoad:w,onCloseNoti:Y}=(0,o.m4)(),[k,C]=(0,a.useState)(!1);(0,o.YJ)(k&&n,d.ts.APPROVES,{...i.K_,page:null!==(s=null===v||void 0===v?void 0:v.page)&&void 0!==s?s:1});const z=(0,a.useRef)(),D=()=>{var e,s;null===(e=z.current)||void 0===e||null===(s=e.classList)||void 0===s||s.toggle(h.approve_list_show)};let S=!1;return"APPROVED"!==b.status&&"REJECT"!==b.status||(S=!0),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.A,{open:n,onClose:()=>{C(!1),c(!1)},children:[(0,y.jsx)(g.JG,{title:N.message,open:N.openAlert,onClose:Y}),(0,y.jsxs)("div",{className:h.container,children:[(0,y.jsxs)("div",{className:h.header,children:[(0,y.jsx)("span",{className:h.header_title,children:"Chi ti\u1ebft ki\u1ec3m duy\u1ec7t"}),(0,y.jsxs)("span",{className:h.header_created,children:["Ng\xe0y t\u1ea1o:",_()(b.created_at).format("HH:mm DD/MM/YYYY")]})]}),b.organization&&(0,y.jsx)("div",{className:h.body,children:(0,y.jsxs)("div",{className:h.body_head_cnt,children:[(0,y.jsxs)("div",{className:h.body_org,children:[(0,y.jsx)("div",{className:h.body_org_img,children:(0,y.jsx)("img",{onError:e=>(0,r.pG)(e),src:b.organization.image_url,alt:""})}),(0,y.jsxs)("div",{className:h.body_org_detail,children:[(0,y.jsx)("p",{title:"Xem gian h\xe0ng",className:h.org_name,children:b.organization.name}),(0,y.jsx)("p",{className:h.org_address,children:b.organization.full_address}),(0,y.jsxs)("div",{className:h.org_contact,children:[(0,y.jsx)("p",{className:h.org_contact_title,children:"Th\xf4ng tin li\xean l\u1ea1c"}),(0,y.jsx)("div",{className:h.org_contact_list,children:null===(t=b.organization.telephone)||void 0===t?void 0:t.map((e=>(0,y.jsx)("p",{className:h.org_contact_item,children:e},e)))})]})]})]}),(0,y.jsxs)("div",{className:h.body_approve_detail,children:[(0,y.jsxs)("div",{className:h.body_approve_section,children:[(0,y.jsx)("p",{className:h.body_approve_title,children:"Ki\u1ec3m duy\u1ec7t cho"}),(0,y.jsx)(x.Iw,{type:b.type})]}),(0,y.jsxs)("div",{className:h.body_approve_section,children:[(0,y.jsx)("p",{className:h.body_approve_title,children:"Tr\u1ea1ng th\xe1i"}),(0,y.jsx)(x.o5,{status:j.status}),(0,y.jsxs)("button",{style:S?{cursor:"not-allowed"}:{},disabled:S,onFocus:D,onBlur:D,className:h.body_approve_btn,children:[(0,y.jsx)("i",{className:"bi bi-pencil-fill fs-5"}),(0,y.jsx)("ul",{ref:z,className:h.approve_list,children:x.tC.map((e=>(0,y.jsx)("li",{onClick:()=>{return s=e.STATUS,u({...j,status:s});var s},className:h.approve_list_item,children:(0,y.jsx)(x.o5,{status:e.STATUS})},e.STATUS)))})]})]})]})]})}),(0,y.jsxs)("div",{className:h.body_log_cnt,children:[(0,y.jsxs)("div",{className:h.body_log_left,children:[(0,y.jsx)("span",{className:h.body_approve_title,children:"Ghi ch\xfa"}),(0,y.jsx)("ul",{className:h.approve_logs,children:null===(l=b.logs)||void 0===l?void 0:l.map((e=>(0,y.jsxs)("li",{className:h.approve_logs_item,children:[(0,y.jsx)("div",{className:h.log_item,children:e.note}),(0,y.jsx)("span",{className:h.log_item_date,children:_()(e.created_at).format("HH:mm DD/MM/YYYY")})]},e.id)))})]}),(0,y.jsxs)("div",{className:h.body_log_right,children:[(0,y.jsx)("span",{className:h.body_approve_title,children:"Vi\u1ebft ghi ch\xfa"}),(0,y.jsx)(g.fs,{onChange:e=>{u({...j,log:e.target.value})},placeholder:"Vi\u1ebft ghi ch\xfa..."})]})]}),(0,y.jsx)("div",{className:h.approve_bot,children:(0,y.jsx)(g.b2,{onClick:async()=>{f();try{await p._H.putApprove(b.id,j),C(!0),w("\u0110\xe3 l\u01b0u thay \u0111\u1ed5i")}catch(e){w("C\xf3 l\u1ed7i x\u1ea3y ra")}},title:"L\u01b0u thay \u0111\u1ed5i",color:"success",loading:N.load,disable:S})})]})]})})};var v=t(86971);const j=function(){var e,s;const t=(0,v.zy)(),a=(0,v.Zp)(),r=(0,o.S3)(),{responseArray:c,totalItem:_,totalPage:m}=(0,o.YJ)(!0,d.ts.APPROVES,{...i.K_,page:null!==(e=null===r||void 0===r?void 0:r.page)&&void 0!==e?e:1});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.A,{title:"Ki\u1ec3m duy\u1ec7t"}),(0,y.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,y.jsxs)("div",{className:"card-header border-0 pt-5",children:[(0,y.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,y.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"Danh s\xe1ch ki\u1ec3m duy\u1ec7t"}),(0,y.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:[_," ki\u1ec3m duy\u1ec7t"]})]}),(0,y.jsx)("div",{className:"card-toolbar",children:(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-icon btn-color-primary btn-active-light-primary","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end","data-kt-menu-flip":"top-end",children:(0,y.jsx)(n.aO,{path:"/media/icons/duotune/general/gen024.svg",className:"svg-icon-2"})})})]}),(0,y.jsx)("div",{className:"card-body py-3",children:(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,y.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Doanh nghi\u1ec7p"}),(0,y.jsx)("th",{className:"min-w-110px",children:"Duy\u1ec7t cho"}),(0,y.jsx)("th",{className:"min-w-110px",children:" Tr\u1ea1ng th\xe1i "}),(0,y.jsx)("th",{className:"min-w-150px",children:"Ghi ch\xfa"}),(0,y.jsx)("th",{className:"min-w-140px",children:"Ng\xe0y t\u1ea1o"}),(0,y.jsx)("th",{className:"min-w-140px",children:"C\u1eadp nh\u1eadt l\xfac"}),(0,y.jsx)("th",{className:"min-w-100px text-end rounded-end"})]})}),(0,y.jsx)("tbody",{children:null===c||void 0===c?void 0:c.map(((e,s)=>(0,y.jsx)(u,{item:e},s)))})]})})})]}),(0,y.jsx)(g.f_,{totalPage:m,onChangePage:e=>{a({pathname:t.pathname,search:`page=${e}`})},defaultPage:null!==(s=null===r||void 0===r?void 0:r.page)&&void 0!==s?s:1})]})},u=e=>{var s;let{item:t}=e;const[l,o]=(0,a.useState)(!1);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b,{open:l,setOpen:o,approve:t}),(0,y.jsxs)("tr",{children:[t.organization&&(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,y.jsx)(g.eu,{src:t.organization.image_url})}),(0,y.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,y.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:t.organization.name}),(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:t.organization.address})]})]})}),(0,y.jsx)("td",{children:(0,y.jsx)(r.Iw,{type:t.type})}),(0,y.jsx)("td",{children:(0,y.jsx)(r.o5,{status:t.status})}),(0,y.jsx)("td",{children:t.logs.length>0&&(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:null===(s=t.logs[0])||void 0===s?void 0:s.note})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:_()(t.created_at).format("HH:mm - DD/MM/YYYY")})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:_()(t.updated_at).format("HH:mm - DD/MM/YYYY")})}),(0,y.jsx)("td",{className:"text-end",children:(0,y.jsx)("button",{onClick:()=>o(!0),className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",children:(0,y.jsx)("i",{className:"bi bi-pencil-fill fs-6"})})})]})]})}}}]);
//# sourceMappingURL=757.5bab2ff9.chunk.js.map