"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[401],{39401:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var l=a(93511),t=a(95434),i=a(2011),n=a(86971),c=a(51318),d=a(24069),r=a(65043),m=a(9370),o=a(87561),h=a(79190),x=a(83521),u=a(88988),j=a(72812),b=a(82907),g=a(73589),p=a(53536),f=a(72450),v=a(11238),N=a(86178),y=a.n(N),_=a(3717),w=a(70579);const k=e=>{let{data:s}=e;const a=m.parse((0,n.zy)().search),l=(0,n.Zp)(),t=(0,n.zy)();return(0,w.jsxs)("div",{className:"card-body filter-cnt",children:[(0,w.jsx)("div",{className:"search",children:(0,w.jsx)("input",{type:"text",className:"form-control form-control-solid",placeholder:"T\xecm ki\u1ebfm MC"})}),(0,w.jsxs)("div",{className:"filter",children:[(0,w.jsx)("div",{className:"filter-item",children:(0,w.jsxs)(o.A,{style:{width:"100%"},size:"small",children:[(0,w.jsx)(h.A,{id:"demo-select-small-label",children:"Tr\u1ea1ng th\xe1i TMDT"}),(0,w.jsxs)(x.A,{labelId:"demo-select-small-label",id:"demo-select-small",label:"Tr\u1ea1ng th\xe1i TMDT",value:a.is_ecommerce||"",onChange:e=>{const s={...a,page:"",is_ecommerce:e.target.value};l({pathname:t.pathname,search:m.stringify((0,p.pickBy)(s,p.identity))})},children:[(0,w.jsx)(u.A,{value:"",children:"T\u1ea5t c\u1ea3"}),(0,w.jsx)(u.A,{value:"true",children:"\u0110ang m\u1edf"}),(0,w.jsx)(u.A,{value:"false",children:"\u0110ang \u0111\xf3ng"})]})]})}),(0,w.jsx)("div",{className:"filter-item",children:s&&(0,w.jsx)(T,{query:a,data:s})})]})]})},T=e=>{let{query:s,data:a}=e;const[l,i]=(0,r.useState)([]),{resultLoad:n,noti:c,onCloseNoti:d}=(0,_.JX)(),[m,o]=(0,r.useState)(!1),{mutate:h,isLoading:x}=(0,b.useMutation)({mutationFn:e=>g.ZP.getAll({page:e,is_ecommerce:s.is_ecommerce||"",sort:"-created_at",limit:30}).then((e=>e.data.context)),onSuccess:e=>i((s=>[...s,...e.data]))});return(0,r.useEffect)((()=>{m&&l.length>0&&l.length===(null===a||void 0===a?void 0:a.total)&&A(l).then((()=>{n({message:"Xu\u1ea5t File th\xe0nh c\xf4ng",color:"success"}),i([]),o(!1)})),l.length===(null===a||void 0===a?void 0:a.total)&&i([])}),[l,null===a||void 0===a?void 0:a.total]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.ce,{severity:c.color,message:c.message,open:c.openAlert,close:d}),(0,w.jsx)(j.A,{onClick:()=>{o(!0);for(var e=1;e<=(null===a||void 0===a?void 0:a.last_page);e++)h(e)},loading:x,color:"success",variant:"contained",size:"medium",children:"Xu\u1ea5t DS"})]})},A=e=>new Promise(((s,a)=>{const l=[["#","ID","T\xean MC","Link gian h\xe0ng","Subdomain","Tr\u1ea1ng th\xe1i","Ng\xe0y t\u1ea1o"],...e.map(((e,s)=>[s+1,e.id,e.name,`https://beautyx.vn/cua-hang/${e.subdomain}`,e.subdomain,e.is_momo_ecommerce_enable?"\u0110ang m\u1edf":"\u0110ang t\u1eaft",y()(e.created_at).format("DD/MM/YYYY")]))],t=v.Wp.aoa_to_sheet(l);t["!cols"]=[{wch:5},{wch:10},{wch:75},{wch:45},{wch:25},{wch:25},{wch:25}];const i={Sheets:{data:t},SheetNames:["data"]},n=v.M9(i,{bookType:"xlsx",type:"array"}),c=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});f.saveAs(c,`ds_mc_${y()().format("DDHHmmss")}.xlsx`),s(!0)})),D=function(){var e,s,a;const r=(0,n.zy)(),o=(0,n.Zp)(),h=m.parse(r.search),{data:x}=(0,b.useQuery)({queryKey:["ORG",h],queryFn:()=>g.ZP.getAll({page:h.page||1,limit:30,is_ecommerce:h.is_ecommerce||"",sort:"-created_at"}).then((e=>e.data.context))});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.A,{title:"Danh s\xe1ch doanh nghi\u1ec7p"}),(0,w.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,w.jsx)("div",{className:"card-header border-0 pt-5",children:(0,w.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,w.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"Danh s\xe1ch doanh nghi\u1ec7p"}),(0,w.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:[null===x||void 0===x?void 0:x.total," doanh nghi\u1ec7p"]})]})}),(0,w.jsx)(k,{data:x}),(0,w.jsx)("div",{className:"card-body py-3",children:(0,w.jsxs)("div",{className:"table-responsive",children:[(0,w.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,w.jsx)("th",{className:"ps-4 min-w-300px rounded-start",children:"Th\xf4ng tin"}),(0,w.jsx)("th",{className:"min-w-125px",children:"Li\xean l\u1ea1c"}),(0,w.jsx)("th",{className:"min-w-125px",children:"L\u01b0\u1ee3t th\xedch"}),(0,w.jsx)("th",{className:"min-w-200px",children:"Tr\u1ea1ng th\xe1i TMDT"}),(0,w.jsx)("th",{className:"min-w-100px",children:"Rating"}),(0,w.jsx)("th",{className:"min-w-150px text-end rounded-end"})]})}),(0,w.jsx)("tbody",{children:null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.map(((e,s)=>{var a;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"d-flex align-items-center",children:[(0,w.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,w.jsx)(t.eu,{src:e.image_url})}),(0,w.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,w.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:e.name}),(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:e.full_address})]})]})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-dark fw-bold text-hover-primary d-block mb-1 fs-7",children:null===(a=e.telephone)||void 0===a?void 0:a.join(", ")})}),(0,w.jsx)("td",{children:(0,w.jsx)("span",{className:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6",children:e.favorites_count})}),(0,w.jsx)("td",{children:(0,w.jsx)(i.oK,{status:e.is_momo_ecommerce_enable})}),(0,w.jsxs)("td",{children:[(0,w.jsxs)("div",{className:"rating",children:[(0,w.jsx)("div",{className:"rating-label me-2 checked",children:(0,w.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,w.jsx)("div",{className:"rating-label me-2 checked",children:(0,w.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,w.jsx)("div",{className:"rating-label me-2 checked",children:(0,w.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,w.jsx)("div",{className:"rating-label me-2 checked",children:(0,w.jsx)("i",{className:"bi bi-star-fill fs-5"})}),(0,w.jsx)("div",{className:"rating-label me-2 checked",children:(0,w.jsx)("i",{className:"bi bi-star-fill fs-5"})})]}),(0,w.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:"Best Rated"})]}),(0,w.jsx)("td",{className:"text-end",children:(0,w.jsx)(c.N_,{to:{pathname:d.A.ORGANIZATIONS_DETAIL(e.id)},className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2",children:(0,w.jsx)("i",{className:"bi bi-eye fs-4"})})})]},s)}))})]}),(0,w.jsx)(t.f_,{totalPage:null!==(s=null===x||void 0===x?void 0:x.last_page)&&void 0!==s?s:1,onChangePage:e=>{const s={...h,page:e};o({pathname:r.pathname,search:m.stringify(s)})},defaultPage:null!==(a=null===h||void 0===h?void 0:h.page)&&void 0!==a?a:1})]})})]})]})}},93511:(e,s,a)=>{a.d(s,{A:()=>t});a(65043);var l=a(70579);const t=function(e){const{title:s,element:a}=e;return(0,l.jsx)("div",{className:"toolbar",id:"kt_toolbar",children:(0,l.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,l.jsx)("h1",{className:"d-flex align-items-center text-dark fw-bolder my-1 fs-3",children:s}),a]})})}}}]);
//# sourceMappingURL=401.ae8e4781.chunk.js.map